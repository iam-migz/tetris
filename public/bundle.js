(()=>{"use strict";var __webpack_modules__={221:function(__unused_webpack_module,exports,__webpack_require__){eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst Piece_1 = __importDefault(__webpack_require__(674));\nconst Stack_1 = __importDefault(__webpack_require__(457));\nconst ShadowPiece_1 = __importDefault(__webpack_require__(592));\nclass Game {\n    constructor() {\n        this.canvas = document.getElementById('tetris');\n        this.ctx = this.canvas.getContext('2d');\n        this.waitingPieceCanvas = document.getElementById('next');\n        this.waitingPieceCtx = this.waitingPieceCanvas.getContext('2d');\n        this.holdPieceCanvas = document.getElementById('hold');\n        this.holdPieceCtx = this.holdPieceCanvas.getContext('2d');\n        this.isHolding = false;\n        this.isGamePaused = false;\n        this.ctx.scale(20, 20);\n        this.waitingPieceCtx.scale(20, 20);\n        this.holdPieceCtx.scale(20, 20);\n        this.colors = [\n            'purple',\n            'yellow',\n            'orange',\n            'blue',\n            'cyan',\n            'green',\n            'red',\n        ];\n        this.score = 0;\n        this.updateScore(0);\n        this.stack = new Stack_1.default();\n        this.activePiece = new Piece_1.default(this.stack.stackMatrix);\n        this.shadowPiece = new ShadowPiece_1.default(this.activePiece, this.ctx);\n        this.waitingPiece = new Piece_1.default(this.stack.stackMatrix);\n        this.holdPiece = null;\n        this.activePiece.begin();\n        this.setMovements();\n        this.lastTime = 0;\n        this.dropCounter = 0;\n        this.dropInterval = 1000;\n        this.animate();\n    }\n    dropHandler() {\n        if (this.activePiece.softDrop()) {\n            this.merge();\n            this.activePiece = this.waitingPiece;\n            this.waitingPiece = new Piece_1.default(this.stack.stackMatrix);\n            this.activePiece.begin();\n            this.shadowPiece.activePiece = this.activePiece;\n            this.updateScore(this.stack.removeLines());\n            if (this.activePiece.stackCollision()) {\n                this.gameover();\n            }\n            this.shadowPiece.update(this.activePiece.offsetX);\n            this.isHolding = false;\n        }\n        this.dropCounter = 0;\n    }\n    gameover() {\n        this.score = 0;\n        this.updateScore(0);\n        this.stack.emptyStack();\n        let menu = document.querySelector('#overlay');\n        let heading = menu.querySelector('#overlay-heading');\n        let playButton = document.querySelector('#play');\n        this.toggleGamePause();\n        heading.innerText = 'Game Over :(';\n        menu.style.display = 'block';\n        playButton.innerText = 'play again';\n    }\n    setMovements() {\n        document.addEventListener('keydown', (event) => {\n            if (this.isGamePaused === true && event.key !== 'Escape') {\n                return;\n            }\n            if (event.key === 'ArrowDown') {\n                this.dropHandler();\n            }\n            else if (event.key === 'ArrowLeft') {\n                this.activePiece.GoLeft();\n                this.shadowPiece.update(this.activePiece.offsetX);\n            }\n            else if (event.key === 'ArrowRight') {\n                this.activePiece.GoRight();\n                this.shadowPiece.update(this.activePiece.offsetX);\n            }\n            else if (event.key === 'ArrowUp') {\n                this.activePiece.rotateRight();\n                this.shadowPiece.update(this.activePiece.offsetX);\n            }\n            else if (event.key === ' ') {\n                this.activePiece.hardDrop(this.shadowPiece.offsetY);\n                this.dropHandler();\n            }\n            else if (event.key === 'Shift') {\n                if (this.holdPiece === null) {\n                    this.holdPiece = this.activePiece;\n                    this.holdPiece.offsetY = 0;\n                    this.holdPiece.offsetX = 12 / 2 - 2;\n                    this.activePiece = this.waitingPiece;\n                    this.waitingPiece = new Piece_1.default(this.stack.stackMatrix);\n                    this.activePiece.begin();\n                    this.shadowPiece.activePiece = this.activePiece;\n                    this.shadowPiece.update(this.activePiece.offsetX);\n                    this.isHolding = true;\n                }\n                else if (this.isHolding === false) {\n                    let tempPiece = this.activePiece;\n                    this.activePiece = this.holdPiece;\n                    this.holdPiece = tempPiece;\n                    this.holdPiece.offsetY = 0;\n                    this.holdPiece.offsetX = 12 / 2 - 2;\n                    this.shadowPiece.activePiece = this.activePiece;\n                    this.shadowPiece.update(this.activePiece.offsetX);\n                    this.isHolding = true;\n                }\n            }\n            else if (event.key === 'Escape') {\n                this.toggleGamePause();\n            }\n        });\n        let playButton = document.querySelector('#play');\n        let pauseButton = document.querySelector('#pause');\n        playButton.addEventListener('click', (event) => {\n            this.toggleGamePause();\n        });\n        pauseButton.addEventListener('click', (event) => {\n            this.toggleGamePause();\n        });\n    }\n    toggleGamePause() {\n        let menu = document.querySelector('#overlay');\n        let heading = menu.querySelector('#overlay-heading');\n        let startButton = document.querySelector('#start');\n        let playButton = document.querySelector('#play');\n        if (this.isGamePaused === true) {\n            this.isGamePaused = false;\n            menu.style.display = 'none';\n            this.animate();\n        }\n        else {\n            this.isGamePaused = true;\n            menu.style.display = 'block';\n            heading.innerText = 'Paused';\n            startButton.style.display = 'none';\n            playButton.style.display = 'block';\n        }\n    }\n    merge() {\n        // merge stackMatrix & pieceMatrix\n        for (let y = 0; y < this.activePiece.pieceMatrix.length; y++) {\n            for (let x = 0; x < this.activePiece.pieceMatrix[y].length; x++) {\n                if (this.activePiece.pieceMatrix[y][x] !== 0) {\n                    this.stack.stackMatrix[y + this.activePiece.offsetY][x + this.activePiece.offsetX] = this.activePiece.pieceMatrix[y][x];\n                }\n            }\n        }\n    }\n    drawMatrix(matrix, offsetX = 0, offsetY = 0) {\n        for (let y = 0; y < matrix.length; y++) {\n            for (let x = 0; x < matrix[y].length; x++) {\n                if (matrix[y][x] !== 0) {\n                    this.ctx.fillStyle = this.colors[matrix[y][x] - 1];\n                    this.ctx.fillRect(x + offsetX, y + offsetY, 1, 1);\n                }\n            }\n        }\n    }\n    draw() {\n        // tetris game black bg\n        this.ctx.fillStyle = '#000';\n        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n        // next piece black bg\n        this.waitingPieceCtx.fillStyle = '#000';\n        this.waitingPieceCtx.fillRect(0, 0, this.waitingPieceCanvas.width, this.waitingPieceCanvas.height);\n        this.drawSide(this.waitingPieceCtx, this.waitingPiece.pieceMatrix);\n        // hold piece black bg\n        this.holdPieceCtx.fillStyle = '#000';\n        this.holdPieceCtx.fillRect(0, 0, this.holdPieceCanvas.width, this.holdPieceCanvas.height);\n        if (this.holdPiece && this.holdPiece.pieceMatrix) {\n            this.drawSide(this.holdPieceCtx, this.holdPiece.pieceMatrix);\n        }\n        this.shadowPiece.draw();\n        this.drawMatrix(this.stack.stackMatrix);\n        this.drawMatrix(this.activePiece.pieceMatrix, this.activePiece.offsetX, this.activePiece.offsetY);\n    }\n    animate(time = 0) {\n        if (this.isGamePaused === true)\n            return;\n        const deltaTime = time - this.lastTime;\n        this.lastTime = time;\n        this.dropCounter += deltaTime;\n        if (this.dropCounter > this.dropInterval) {\n            this.dropHandler();\n        }\n        this.draw();\n        requestAnimationFrame(this.animate.bind(this));\n    }\n    updateScore(newScore) {\n        this.score += newScore;\n        let score = document.getElementById('score');\n        score.innerText = this.score.toString();\n    }\n    drawSide(ctx, matrix) {\n        for (let y = 0; y < matrix.length; y++) {\n            for (let x = 0; x < matrix[y].length; x++) {\n                if (matrix[y][x] !== 0) {\n                    ctx.fillStyle = this.colors[matrix[y][x] - 1];\n                    ctx.fillRect(x + 2.5, y + 2, 1, 1);\n                }\n            }\n        }\n    }\n}\nexports[\"default\"] = Game;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIxLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsZ0NBQWdDLG1CQUFPLENBQUMsR0FBUztBQUNqRCxnQ0FBZ0MsbUJBQU8sQ0FBQyxHQUFTO0FBQ2pELHNDQUFzQyxtQkFBTyxDQUFDLEdBQWU7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlDQUF5QztBQUNqRSw0QkFBNEIsNENBQTRDO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG1CQUFtQjtBQUMzQyw0QkFBNEIsc0JBQXNCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG1CQUFtQjtBQUMzQyw0QkFBNEIsc0JBQXNCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBZSIsInNvdXJjZXMiOlsid2VicGFjazovL3RldHJpcy8uL3NyYy9HYW1lLnRzP2YwZWYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCBQaWVjZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1BpZWNlXCIpKTtcbmNvbnN0IFN0YWNrXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vU3RhY2tcIikpO1xuY29uc3QgU2hhZG93UGllY2VfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9TaGFkb3dQaWVjZVwiKSk7XG5jbGFzcyBHYW1lIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGV0cmlzJyk7XG4gICAgICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgdGhpcy53YWl0aW5nUGllY2VDYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV4dCcpO1xuICAgICAgICB0aGlzLndhaXRpbmdQaWVjZUN0eCA9IHRoaXMud2FpdGluZ1BpZWNlQ2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIHRoaXMuaG9sZFBpZWNlQ2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvbGQnKTtcbiAgICAgICAgdGhpcy5ob2xkUGllY2VDdHggPSB0aGlzLmhvbGRQaWVjZUNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICB0aGlzLmlzSG9sZGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzR2FtZVBhdXNlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmN0eC5zY2FsZSgyMCwgMjApO1xuICAgICAgICB0aGlzLndhaXRpbmdQaWVjZUN0eC5zY2FsZSgyMCwgMjApO1xuICAgICAgICB0aGlzLmhvbGRQaWVjZUN0eC5zY2FsZSgyMCwgMjApO1xuICAgICAgICB0aGlzLmNvbG9ycyA9IFtcbiAgICAgICAgICAgICdwdXJwbGUnLFxuICAgICAgICAgICAgJ3llbGxvdycsXG4gICAgICAgICAgICAnb3JhbmdlJyxcbiAgICAgICAgICAgICdibHVlJyxcbiAgICAgICAgICAgICdjeWFuJyxcbiAgICAgICAgICAgICdncmVlbicsXG4gICAgICAgICAgICAncmVkJyxcbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy5zY29yZSA9IDA7XG4gICAgICAgIHRoaXMudXBkYXRlU2NvcmUoMCk7XG4gICAgICAgIHRoaXMuc3RhY2sgPSBuZXcgU3RhY2tfMS5kZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuYWN0aXZlUGllY2UgPSBuZXcgUGllY2VfMS5kZWZhdWx0KHRoaXMuc3RhY2suc3RhY2tNYXRyaXgpO1xuICAgICAgICB0aGlzLnNoYWRvd1BpZWNlID0gbmV3IFNoYWRvd1BpZWNlXzEuZGVmYXVsdCh0aGlzLmFjdGl2ZVBpZWNlLCB0aGlzLmN0eCk7XG4gICAgICAgIHRoaXMud2FpdGluZ1BpZWNlID0gbmV3IFBpZWNlXzEuZGVmYXVsdCh0aGlzLnN0YWNrLnN0YWNrTWF0cml4KTtcbiAgICAgICAgdGhpcy5ob2xkUGllY2UgPSBudWxsO1xuICAgICAgICB0aGlzLmFjdGl2ZVBpZWNlLmJlZ2luKCk7XG4gICAgICAgIHRoaXMuc2V0TW92ZW1lbnRzKCk7XG4gICAgICAgIHRoaXMubGFzdFRpbWUgPSAwO1xuICAgICAgICB0aGlzLmRyb3BDb3VudGVyID0gMDtcbiAgICAgICAgdGhpcy5kcm9wSW50ZXJ2YWwgPSAxMDAwO1xuICAgICAgICB0aGlzLmFuaW1hdGUoKTtcbiAgICB9XG4gICAgZHJvcEhhbmRsZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZVBpZWNlLnNvZnREcm9wKCkpIHtcbiAgICAgICAgICAgIHRoaXMubWVyZ2UoKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlUGllY2UgPSB0aGlzLndhaXRpbmdQaWVjZTtcbiAgICAgICAgICAgIHRoaXMud2FpdGluZ1BpZWNlID0gbmV3IFBpZWNlXzEuZGVmYXVsdCh0aGlzLnN0YWNrLnN0YWNrTWF0cml4KTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlUGllY2UuYmVnaW4oKTtcbiAgICAgICAgICAgIHRoaXMuc2hhZG93UGllY2UuYWN0aXZlUGllY2UgPSB0aGlzLmFjdGl2ZVBpZWNlO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTY29yZSh0aGlzLnN0YWNrLnJlbW92ZUxpbmVzKCkpO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlUGllY2Uuc3RhY2tDb2xsaXNpb24oKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZW92ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2hhZG93UGllY2UudXBkYXRlKHRoaXMuYWN0aXZlUGllY2Uub2Zmc2V0WCk7XG4gICAgICAgICAgICB0aGlzLmlzSG9sZGluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZHJvcENvdW50ZXIgPSAwO1xuICAgIH1cbiAgICBnYW1lb3ZlcigpIHtcbiAgICAgICAgdGhpcy5zY29yZSA9IDA7XG4gICAgICAgIHRoaXMudXBkYXRlU2NvcmUoMCk7XG4gICAgICAgIHRoaXMuc3RhY2suZW1wdHlTdGFjaygpO1xuICAgICAgICBsZXQgbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNvdmVybGF5Jyk7XG4gICAgICAgIGxldCBoZWFkaW5nID0gbWVudS5xdWVyeVNlbGVjdG9yKCcjb3ZlcmxheS1oZWFkaW5nJyk7XG4gICAgICAgIGxldCBwbGF5QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BsYXknKTtcbiAgICAgICAgdGhpcy50b2dnbGVHYW1lUGF1c2UoKTtcbiAgICAgICAgaGVhZGluZy5pbm5lclRleHQgPSAnR2FtZSBPdmVyIDooJztcbiAgICAgICAgbWVudS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgcGxheUJ1dHRvbi5pbm5lclRleHQgPSAncGxheSBhZ2Fpbic7XG4gICAgfVxuICAgIHNldE1vdmVtZW50cygpIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNHYW1lUGF1c2VkID09PSB0cnVlICYmIGV2ZW50LmtleSAhPT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5ID09PSAnQXJyb3dEb3duJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJvcEhhbmRsZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gJ0Fycm93TGVmdCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVBpZWNlLkdvTGVmdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hhZG93UGllY2UudXBkYXRlKHRoaXMuYWN0aXZlUGllY2Uub2Zmc2V0WCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC5rZXkgPT09ICdBcnJvd1JpZ2h0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlUGllY2UuR29SaWdodCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hhZG93UGllY2UudXBkYXRlKHRoaXMuYWN0aXZlUGllY2Uub2Zmc2V0WCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC5rZXkgPT09ICdBcnJvd1VwJykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlUGllY2Uucm90YXRlUmlnaHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNoYWRvd1BpZWNlLnVwZGF0ZSh0aGlzLmFjdGl2ZVBpZWNlLm9mZnNldFgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQua2V5ID09PSAnICcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVBpZWNlLmhhcmREcm9wKHRoaXMuc2hhZG93UGllY2Uub2Zmc2V0WSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kcm9wSGFuZGxlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQua2V5ID09PSAnU2hpZnQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaG9sZFBpZWNlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaG9sZFBpZWNlID0gdGhpcy5hY3RpdmVQaWVjZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ob2xkUGllY2Uub2Zmc2V0WSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaG9sZFBpZWNlLm9mZnNldFggPSAxMiAvIDIgLSAyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVBpZWNlID0gdGhpcy53YWl0aW5nUGllY2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2FpdGluZ1BpZWNlID0gbmV3IFBpZWNlXzEuZGVmYXVsdCh0aGlzLnN0YWNrLnN0YWNrTWF0cml4KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVQaWVjZS5iZWdpbigpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYWRvd1BpZWNlLmFjdGl2ZVBpZWNlID0gdGhpcy5hY3RpdmVQaWVjZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFkb3dQaWVjZS51cGRhdGUodGhpcy5hY3RpdmVQaWVjZS5vZmZzZXRYKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0hvbGRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmlzSG9sZGluZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRlbXBQaWVjZSA9IHRoaXMuYWN0aXZlUGllY2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlUGllY2UgPSB0aGlzLmhvbGRQaWVjZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ob2xkUGllY2UgPSB0ZW1wUGllY2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaG9sZFBpZWNlLm9mZnNldFkgPSAwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhvbGRQaWVjZS5vZmZzZXRYID0gMTIgLyAyIC0gMjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFkb3dQaWVjZS5hY3RpdmVQaWVjZSA9IHRoaXMuYWN0aXZlUGllY2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhZG93UGllY2UudXBkYXRlKHRoaXMuYWN0aXZlUGllY2Uub2Zmc2V0WCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNIb2xkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVHYW1lUGF1c2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBwbGF5QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BsYXknKTtcbiAgICAgICAgbGV0IHBhdXNlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BhdXNlJyk7XG4gICAgICAgIHBsYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlR2FtZVBhdXNlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBwYXVzZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVHYW1lUGF1c2UoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRvZ2dsZUdhbWVQYXVzZSgpIHtcbiAgICAgICAgbGV0IG1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjb3ZlcmxheScpO1xuICAgICAgICBsZXQgaGVhZGluZyA9IG1lbnUucXVlcnlTZWxlY3RvcignI292ZXJsYXktaGVhZGluZycpO1xuICAgICAgICBsZXQgc3RhcnRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3RhcnQnKTtcbiAgICAgICAgbGV0IHBsYXlCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGxheScpO1xuICAgICAgICBpZiAodGhpcy5pc0dhbWVQYXVzZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHRoaXMuaXNHYW1lUGF1c2VkID0gZmFsc2U7XG4gICAgICAgICAgICBtZW51LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaXNHYW1lUGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIG1lbnUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICBoZWFkaW5nLmlubmVyVGV4dCA9ICdQYXVzZWQnO1xuICAgICAgICAgICAgc3RhcnRCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIHBsYXlCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWVyZ2UoKSB7XG4gICAgICAgIC8vIG1lcmdlIHN0YWNrTWF0cml4ICYgcGllY2VNYXRyaXhcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLmFjdGl2ZVBpZWNlLnBpZWNlTWF0cml4Lmxlbmd0aDsgeSsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMuYWN0aXZlUGllY2UucGllY2VNYXRyaXhbeV0ubGVuZ3RoOyB4KyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVQaWVjZS5waWVjZU1hdHJpeFt5XVt4XSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YWNrLnN0YWNrTWF0cml4W3kgKyB0aGlzLmFjdGl2ZVBpZWNlLm9mZnNldFldW3ggKyB0aGlzLmFjdGl2ZVBpZWNlLm9mZnNldFhdID0gdGhpcy5hY3RpdmVQaWVjZS5waWVjZU1hdHJpeFt5XVt4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZHJhd01hdHJpeChtYXRyaXgsIG9mZnNldFggPSAwLCBvZmZzZXRZID0gMCkge1xuICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IG1hdHJpeC5sZW5ndGg7IHkrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBtYXRyaXhbeV0ubGVuZ3RoOyB4KyspIHtcbiAgICAgICAgICAgICAgICBpZiAobWF0cml4W3ldW3hdICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHRoaXMuY29sb3JzW21hdHJpeFt5XVt4XSAtIDFdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCh4ICsgb2Zmc2V0WCwgeSArIG9mZnNldFksIDEsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBkcmF3KCkge1xuICAgICAgICAvLyB0ZXRyaXMgZ2FtZSBibGFjayBiZ1xuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSAnIzAwMCc7XG4gICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAvLyBuZXh0IHBpZWNlIGJsYWNrIGJnXG4gICAgICAgIHRoaXMud2FpdGluZ1BpZWNlQ3R4LmZpbGxTdHlsZSA9ICcjMDAwJztcbiAgICAgICAgdGhpcy53YWl0aW5nUGllY2VDdHguZmlsbFJlY3QoMCwgMCwgdGhpcy53YWl0aW5nUGllY2VDYW52YXMud2lkdGgsIHRoaXMud2FpdGluZ1BpZWNlQ2FudmFzLmhlaWdodCk7XG4gICAgICAgIHRoaXMuZHJhd1NpZGUodGhpcy53YWl0aW5nUGllY2VDdHgsIHRoaXMud2FpdGluZ1BpZWNlLnBpZWNlTWF0cml4KTtcbiAgICAgICAgLy8gaG9sZCBwaWVjZSBibGFjayBiZ1xuICAgICAgICB0aGlzLmhvbGRQaWVjZUN0eC5maWxsU3R5bGUgPSAnIzAwMCc7XG4gICAgICAgIHRoaXMuaG9sZFBpZWNlQ3R4LmZpbGxSZWN0KDAsIDAsIHRoaXMuaG9sZFBpZWNlQ2FudmFzLndpZHRoLCB0aGlzLmhvbGRQaWVjZUNhbnZhcy5oZWlnaHQpO1xuICAgICAgICBpZiAodGhpcy5ob2xkUGllY2UgJiYgdGhpcy5ob2xkUGllY2UucGllY2VNYXRyaXgpIHtcbiAgICAgICAgICAgIHRoaXMuZHJhd1NpZGUodGhpcy5ob2xkUGllY2VDdHgsIHRoaXMuaG9sZFBpZWNlLnBpZWNlTWF0cml4KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNoYWRvd1BpZWNlLmRyYXcoKTtcbiAgICAgICAgdGhpcy5kcmF3TWF0cml4KHRoaXMuc3RhY2suc3RhY2tNYXRyaXgpO1xuICAgICAgICB0aGlzLmRyYXdNYXRyaXgodGhpcy5hY3RpdmVQaWVjZS5waWVjZU1hdHJpeCwgdGhpcy5hY3RpdmVQaWVjZS5vZmZzZXRYLCB0aGlzLmFjdGl2ZVBpZWNlLm9mZnNldFkpO1xuICAgIH1cbiAgICBhbmltYXRlKHRpbWUgPSAwKSB7XG4gICAgICAgIGlmICh0aGlzLmlzR2FtZVBhdXNlZCA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgZGVsdGFUaW1lID0gdGltZSAtIHRoaXMubGFzdFRpbWU7XG4gICAgICAgIHRoaXMubGFzdFRpbWUgPSB0aW1lO1xuICAgICAgICB0aGlzLmRyb3BDb3VudGVyICs9IGRlbHRhVGltZTtcbiAgICAgICAgaWYgKHRoaXMuZHJvcENvdW50ZXIgPiB0aGlzLmRyb3BJbnRlcnZhbCkge1xuICAgICAgICAgICAgdGhpcy5kcm9wSGFuZGxlcigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZHJhdygpO1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRlLmJpbmQodGhpcykpO1xuICAgIH1cbiAgICB1cGRhdGVTY29yZShuZXdTY29yZSkge1xuICAgICAgICB0aGlzLnNjb3JlICs9IG5ld1Njb3JlO1xuICAgICAgICBsZXQgc2NvcmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NvcmUnKTtcbiAgICAgICAgc2NvcmUuaW5uZXJUZXh0ID0gdGhpcy5zY29yZS50b1N0cmluZygpO1xuICAgIH1cbiAgICBkcmF3U2lkZShjdHgsIG1hdHJpeCkge1xuICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IG1hdHJpeC5sZW5ndGg7IHkrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBtYXRyaXhbeV0ubGVuZ3RoOyB4KyspIHtcbiAgICAgICAgICAgICAgICBpZiAobWF0cml4W3ldW3hdICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLmNvbG9yc1ttYXRyaXhbeV1beF0gLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHggKyAyLjUsIHkgKyAyLCAxLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLmRlZmF1bHQgPSBHYW1lO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///221\n")},674:(__unused_webpack_module,exports)=>{eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nclass Piece {\n    constructor(stackMatrix) {\n        this.stackMatrix = stackMatrix;\n        this.waiting = true;\n        this.offsetX = 12 / 2 - 2;\n        this.offsetY = 0;\n        this.pieceMatrix = [];\n        this.getRandomPiece();\n    }\n    begin() {\n        this.waiting = false;\n    }\n    getRandomPiece() {\n        const randomPieceIndex = Math.round(Math.random() * 6);\n        const pieces = ['O', 'I', 'S', 'Z', 'L', 'J', 'T'];\n        this.pieceMatrix = this.createPiece(pieces[randomPieceIndex]);\n    }\n    hardDrop(offsetY) {\n        this.offsetY = offsetY;\n        return true;\n    }\n    softDrop() {\n        this.offsetY++;\n        if (this.stackCollision()) {\n            this.offsetY--;\n            return true;\n        }\n        return false;\n    }\n    GoRight() {\n        this.offsetX++;\n        if (this.rightWallCollision()) {\n            this.offsetX--;\n            return;\n        }\n        if (this.stackCollision()) {\n            this.offsetX--;\n        }\n    }\n    GoLeft() {\n        this.offsetX--;\n        if (this.leftWallCollision()) {\n            this.offsetX++;\n            return;\n        }\n        if (this.stackCollision()) {\n            this.offsetX++;\n        }\n    }\n    rotateRight() {\n        let tempMatrix = [];\n        // copy matrix\n        for (let y = 0; y < this.pieceMatrix.length; y++) {\n            tempMatrix[y] = [...this.pieceMatrix[y]];\n        }\n        // rotation\n        let size_y = this.pieceMatrix.length - 1;\n        let size_x = this.pieceMatrix[0].length - 1;\n        for (let y = 0; y <= size_y; y++) {\n            for (let x = 0; x <= size_x; x++) {\n                this.pieceMatrix[x][size_y - y] = tempMatrix[y][x];\n            }\n        }\n        // check collisions\n        while (this.leftWallCollision()) {\n            this.offsetX++;\n        }\n        while (this.rightWallCollision()) {\n            this.offsetX--;\n        }\n        if (this.stackCollision()) {\n            // revert\n            for (let y = 0; y < this.pieceMatrix.length; y++) {\n                this.pieceMatrix[y] = [...tempMatrix[y]];\n            }\n        }\n    }\n    leftWallCollision() {\n        for (let y = 0; y < this.pieceMatrix.length; y++) {\n            for (let x = 0; x < this.pieceMatrix[y].length; x++) {\n                if (this.pieceMatrix[y][x] !== 0) {\n                    let realX = this.offsetX + x;\n                    if (realX < 0) {\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    }\n    rightWallCollision() {\n        for (let y = 0; y < this.pieceMatrix.length; y++) {\n            for (let x = 0; x < this.pieceMatrix[y].length; x++) {\n                if (this.pieceMatrix[y][x] !== 0) {\n                    let realX = this.offsetX + x;\n                    let stackWidth = this.stackMatrix[0].length;\n                    if (realX >= stackWidth) {\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    }\n    stackCollision() {\n        // returns true if we're in a collision with the bottom wall or the current stack\n        for (let y = 0; y < this.pieceMatrix.length; y++) {\n            for (let x = 0; x < this.pieceMatrix[y].length; x++) {\n                if (this.pieceMatrix[y][x] !== 0) {\n                    let realx = this.offsetX + x;\n                    let realy = this.offsetY + y;\n                    // check if we are colliding with the bottom wall\n                    if (realy >= this.stackMatrix.length) {\n                        console.log('wall collision');\n                        return true;\n                    }\n                    // check if we are colliding with the existing stack\n                    if (this.stackMatrix[realy][realx] !== 0) {\n                        console.log('stack collision');\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    }\n    createPiece(type) {\n        switch (type) {\n            case 'T':\n                return [\n                    [0, 0, 0],\n                    [1, 1, 1],\n                    [0, 1, 0],\n                ];\n            case 'O':\n                return [\n                    [2, 2],\n                    [2, 2],\n                ];\n            case 'L':\n                return [\n                    [0, 3, 0],\n                    [0, 3, 0],\n                    [0, 3, 3],\n                ];\n            case 'J':\n                return [\n                    [0, 4, 0],\n                    [0, 4, 0],\n                    [4, 4, 0],\n                ];\n            case 'I':\n                return [\n                    [0, 5, 0, 0],\n                    [0, 5, 0, 0],\n                    [0, 5, 0, 0],\n                    [0, 5, 0, 0],\n                ];\n            case 'S':\n                return [\n                    [0, 6, 6],\n                    [6, 6, 0],\n                    [0, 0, 0],\n                ];\n            case 'Z':\n                return [\n                    [7, 7, 0],\n                    [0, 7, 7],\n                    [0, 0, 0],\n                ];\n        }\n    }\n}\nexports[\"default\"] = Piece;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjc0LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDZCQUE2QjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGFBQWE7QUFDckMsNEJBQTRCLGFBQWE7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDZCQUE2QjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDZCQUE2QjtBQUNyRCw0QkFBNEIsZ0NBQWdDO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsNkJBQTZCO0FBQ3JELDRCQUE0QixnQ0FBZ0M7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsNkJBQTZCO0FBQ3JELDRCQUE0QixnQ0FBZ0M7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFlIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGV0cmlzLy4vc3JjL1BpZWNlLnRzP2FlMDUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jbGFzcyBQaWVjZSB7XG4gICAgY29uc3RydWN0b3Ioc3RhY2tNYXRyaXgpIHtcbiAgICAgICAgdGhpcy5zdGFja01hdHJpeCA9IHN0YWNrTWF0cml4O1xuICAgICAgICB0aGlzLndhaXRpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLm9mZnNldFggPSAxMiAvIDIgLSAyO1xuICAgICAgICB0aGlzLm9mZnNldFkgPSAwO1xuICAgICAgICB0aGlzLnBpZWNlTWF0cml4ID0gW107XG4gICAgICAgIHRoaXMuZ2V0UmFuZG9tUGllY2UoKTtcbiAgICB9XG4gICAgYmVnaW4oKSB7XG4gICAgICAgIHRoaXMud2FpdGluZyA9IGZhbHNlO1xuICAgIH1cbiAgICBnZXRSYW5kb21QaWVjZSgpIHtcbiAgICAgICAgY29uc3QgcmFuZG9tUGllY2VJbmRleCA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDYpO1xuICAgICAgICBjb25zdCBwaWVjZXMgPSBbJ08nLCAnSScsICdTJywgJ1onLCAnTCcsICdKJywgJ1QnXTtcbiAgICAgICAgdGhpcy5waWVjZU1hdHJpeCA9IHRoaXMuY3JlYXRlUGllY2UocGllY2VzW3JhbmRvbVBpZWNlSW5kZXhdKTtcbiAgICB9XG4gICAgaGFyZERyb3Aob2Zmc2V0WSkge1xuICAgICAgICB0aGlzLm9mZnNldFkgPSBvZmZzZXRZO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgc29mdERyb3AoKSB7XG4gICAgICAgIHRoaXMub2Zmc2V0WSsrO1xuICAgICAgICBpZiAodGhpcy5zdGFja0NvbGxpc2lvbigpKSB7XG4gICAgICAgICAgICB0aGlzLm9mZnNldFktLTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgR29SaWdodCgpIHtcbiAgICAgICAgdGhpcy5vZmZzZXRYKys7XG4gICAgICAgIGlmICh0aGlzLnJpZ2h0V2FsbENvbGxpc2lvbigpKSB7XG4gICAgICAgICAgICB0aGlzLm9mZnNldFgtLTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdGFja0NvbGxpc2lvbigpKSB7XG4gICAgICAgICAgICB0aGlzLm9mZnNldFgtLTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBHb0xlZnQoKSB7XG4gICAgICAgIHRoaXMub2Zmc2V0WC0tO1xuICAgICAgICBpZiAodGhpcy5sZWZ0V2FsbENvbGxpc2lvbigpKSB7XG4gICAgICAgICAgICB0aGlzLm9mZnNldFgrKztcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdGFja0NvbGxpc2lvbigpKSB7XG4gICAgICAgICAgICB0aGlzLm9mZnNldFgrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICByb3RhdGVSaWdodCgpIHtcbiAgICAgICAgbGV0IHRlbXBNYXRyaXggPSBbXTtcbiAgICAgICAgLy8gY29weSBtYXRyaXhcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLnBpZWNlTWF0cml4Lmxlbmd0aDsgeSsrKSB7XG4gICAgICAgICAgICB0ZW1wTWF0cml4W3ldID0gWy4uLnRoaXMucGllY2VNYXRyaXhbeV1dO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJvdGF0aW9uXG4gICAgICAgIGxldCBzaXplX3kgPSB0aGlzLnBpZWNlTWF0cml4Lmxlbmd0aCAtIDE7XG4gICAgICAgIGxldCBzaXplX3ggPSB0aGlzLnBpZWNlTWF0cml4WzBdLmxlbmd0aCAtIDE7XG4gICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDw9IHNpemVfeTsgeSsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8PSBzaXplX3g7IHgrKykge1xuICAgICAgICAgICAgICAgIHRoaXMucGllY2VNYXRyaXhbeF1bc2l6ZV95IC0geV0gPSB0ZW1wTWF0cml4W3ldW3hdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGNoZWNrIGNvbGxpc2lvbnNcbiAgICAgICAgd2hpbGUgKHRoaXMubGVmdFdhbGxDb2xsaXNpb24oKSkge1xuICAgICAgICAgICAgdGhpcy5vZmZzZXRYKys7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHRoaXMucmlnaHRXYWxsQ29sbGlzaW9uKCkpIHtcbiAgICAgICAgICAgIHRoaXMub2Zmc2V0WC0tO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN0YWNrQ29sbGlzaW9uKCkpIHtcbiAgICAgICAgICAgIC8vIHJldmVydFxuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLnBpZWNlTWF0cml4Lmxlbmd0aDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5waWVjZU1hdHJpeFt5XSA9IFsuLi50ZW1wTWF0cml4W3ldXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsZWZ0V2FsbENvbGxpc2lvbigpIHtcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLnBpZWNlTWF0cml4Lmxlbmd0aDsgeSsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMucGllY2VNYXRyaXhbeV0ubGVuZ3RoOyB4KyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5waWVjZU1hdHJpeFt5XVt4XSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmVhbFggPSB0aGlzLm9mZnNldFggKyB4O1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVhbFggPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJpZ2h0V2FsbENvbGxpc2lvbigpIHtcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLnBpZWNlTWF0cml4Lmxlbmd0aDsgeSsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMucGllY2VNYXRyaXhbeV0ubGVuZ3RoOyB4KyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5waWVjZU1hdHJpeFt5XVt4XSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmVhbFggPSB0aGlzLm9mZnNldFggKyB4O1xuICAgICAgICAgICAgICAgICAgICBsZXQgc3RhY2tXaWR0aCA9IHRoaXMuc3RhY2tNYXRyaXhbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVhbFggPj0gc3RhY2tXaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBzdGFja0NvbGxpc2lvbigpIHtcbiAgICAgICAgLy8gcmV0dXJucyB0cnVlIGlmIHdlJ3JlIGluIGEgY29sbGlzaW9uIHdpdGggdGhlIGJvdHRvbSB3YWxsIG9yIHRoZSBjdXJyZW50IHN0YWNrXG4gICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgdGhpcy5waWVjZU1hdHJpeC5sZW5ndGg7IHkrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLnBpZWNlTWF0cml4W3ldLmxlbmd0aDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGllY2VNYXRyaXhbeV1beF0gIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlYWx4ID0gdGhpcy5vZmZzZXRYICsgeDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlYWx5ID0gdGhpcy5vZmZzZXRZICsgeTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgd2UgYXJlIGNvbGxpZGluZyB3aXRoIHRoZSBib3R0b20gd2FsbFxuICAgICAgICAgICAgICAgICAgICBpZiAocmVhbHkgPj0gdGhpcy5zdGFja01hdHJpeC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd3YWxsIGNvbGxpc2lvbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgd2UgYXJlIGNvbGxpZGluZyB3aXRoIHRoZSBleGlzdGluZyBzdGFja1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGFja01hdHJpeFtyZWFseV1bcmVhbHhdICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3RhY2sgY29sbGlzaW9uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNyZWF0ZVBpZWNlKHR5cGUpIHtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdUJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICBbMCwgMCwgMF0sXG4gICAgICAgICAgICAgICAgICAgIFsxLCAxLCAxXSxcbiAgICAgICAgICAgICAgICAgICAgWzAsIDEsIDBdLFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICBjYXNlICdPJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICBbMiwgMl0sXG4gICAgICAgICAgICAgICAgICAgIFsyLCAyXSxcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgY2FzZSAnTCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgWzAsIDMsIDBdLFxuICAgICAgICAgICAgICAgICAgICBbMCwgMywgMF0sXG4gICAgICAgICAgICAgICAgICAgIFswLCAzLCAzXSxcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgY2FzZSAnSic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgWzAsIDQsIDBdLFxuICAgICAgICAgICAgICAgICAgICBbMCwgNCwgMF0sXG4gICAgICAgICAgICAgICAgICAgIFs0LCA0LCAwXSxcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgY2FzZSAnSSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgWzAsIDUsIDAsIDBdLFxuICAgICAgICAgICAgICAgICAgICBbMCwgNSwgMCwgMF0sXG4gICAgICAgICAgICAgICAgICAgIFswLCA1LCAwLCAwXSxcbiAgICAgICAgICAgICAgICAgICAgWzAsIDUsIDAsIDBdLFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICBjYXNlICdTJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICBbMCwgNiwgNl0sXG4gICAgICAgICAgICAgICAgICAgIFs2LCA2LCAwXSxcbiAgICAgICAgICAgICAgICAgICAgWzAsIDAsIDBdLFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICBjYXNlICdaJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICBbNywgNywgMF0sXG4gICAgICAgICAgICAgICAgICAgIFswLCA3LCA3XSxcbiAgICAgICAgICAgICAgICAgICAgWzAsIDAsIDBdLFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLmRlZmF1bHQgPSBQaWVjZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///674\n")},592:(__unused_webpack_module,exports)=>{eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nclass ShadowPiece {\n    constructor(activePiece, ctx) {\n        this.activePiece = activePiece;\n        this.ctx = ctx;\n        this.offsetX = 12 / 2 - 2;\n        this.offsetY = 0;\n        this.expectedDrop();\n    }\n    update(offsetX) {\n        this.offsetX = offsetX;\n        this.expectedDrop();\n    }\n    expectedDrop() {\n        this.offsetY = this.activePiece.offsetY;\n        while (this.stackCollision() === false) {\n            this.offsetY++;\n        }\n        this.offsetY--;\n    }\n    stackCollision() {\n        let pieceMatrix = this.activePiece.pieceMatrix;\n        let stackMatrix = this.activePiece.stackMatrix;\n        // returns true if we\'re in a collision with the bottom wall or the current stack\n        for (let y = 0; y < pieceMatrix.length; y++) {\n            for (let x = 0; x < pieceMatrix[y].length; x++) {\n                if (pieceMatrix[y][x] !== 0) {\n                    let realx = this.offsetX + x;\n                    let realy = this.offsetY + y;\n                    // check if we are colliding with the bottom wall\n                    if (realy >= stackMatrix.length) {\n                        return true;\n                    }\n                    // check if we are colliding with the existing stack\n                    if (stackMatrix[realy][realx] !== 0) {\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    }\n    draw() {\n        let pieceMatrix = this.activePiece.pieceMatrix;\n        this.ctx.lineWidth = 0.1;\n        for (let y = 0; y < pieceMatrix.length; y++) {\n            for (let x = 0; x < pieceMatrix[y].length; x++) {\n                if (pieceMatrix[y][x] !== 0) {\n                    this.ctx.clearRect(x + this.offsetX, y + this.offsetY, 1, 1);\n                    this.ctx.rect(x + this.offsetX, y + this.offsetY, 1, 1);\n                }\n            }\n        }\n    }\n}\nexports["default"] = ShadowPiece;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTkyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isd0JBQXdCO0FBQ2hELDRCQUE0QiwyQkFBMkI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isd0JBQXdCO0FBQ2hELDRCQUE0QiwyQkFBMkI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFlIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGV0cmlzLy4vc3JjL1NoYWRvd1BpZWNlLnRzP2Y1ZWQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jbGFzcyBTaGFkb3dQaWVjZSB7XG4gICAgY29uc3RydWN0b3IoYWN0aXZlUGllY2UsIGN0eCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVBpZWNlID0gYWN0aXZlUGllY2U7XG4gICAgICAgIHRoaXMuY3R4ID0gY3R4O1xuICAgICAgICB0aGlzLm9mZnNldFggPSAxMiAvIDIgLSAyO1xuICAgICAgICB0aGlzLm9mZnNldFkgPSAwO1xuICAgICAgICB0aGlzLmV4cGVjdGVkRHJvcCgpO1xuICAgIH1cbiAgICB1cGRhdGUob2Zmc2V0WCkge1xuICAgICAgICB0aGlzLm9mZnNldFggPSBvZmZzZXRYO1xuICAgICAgICB0aGlzLmV4cGVjdGVkRHJvcCgpO1xuICAgIH1cbiAgICBleHBlY3RlZERyb3AoKSB7XG4gICAgICAgIHRoaXMub2Zmc2V0WSA9IHRoaXMuYWN0aXZlUGllY2Uub2Zmc2V0WTtcbiAgICAgICAgd2hpbGUgKHRoaXMuc3RhY2tDb2xsaXNpb24oKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRoaXMub2Zmc2V0WSsrO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2Zmc2V0WS0tO1xuICAgIH1cbiAgICBzdGFja0NvbGxpc2lvbigpIHtcbiAgICAgICAgbGV0IHBpZWNlTWF0cml4ID0gdGhpcy5hY3RpdmVQaWVjZS5waWVjZU1hdHJpeDtcbiAgICAgICAgbGV0IHN0YWNrTWF0cml4ID0gdGhpcy5hY3RpdmVQaWVjZS5zdGFja01hdHJpeDtcbiAgICAgICAgLy8gcmV0dXJucyB0cnVlIGlmIHdlJ3JlIGluIGEgY29sbGlzaW9uIHdpdGggdGhlIGJvdHRvbSB3YWxsIG9yIHRoZSBjdXJyZW50IHN0YWNrXG4gICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgcGllY2VNYXRyaXgubGVuZ3RoOyB5KyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgcGllY2VNYXRyaXhbeV0ubGVuZ3RoOyB4KyspIHtcbiAgICAgICAgICAgICAgICBpZiAocGllY2VNYXRyaXhbeV1beF0gIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlYWx4ID0gdGhpcy5vZmZzZXRYICsgeDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlYWx5ID0gdGhpcy5vZmZzZXRZICsgeTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgd2UgYXJlIGNvbGxpZGluZyB3aXRoIHRoZSBib3R0b20gd2FsbFxuICAgICAgICAgICAgICAgICAgICBpZiAocmVhbHkgPj0gc3RhY2tNYXRyaXgubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB3ZSBhcmUgY29sbGlkaW5nIHdpdGggdGhlIGV4aXN0aW5nIHN0YWNrXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGFja01hdHJpeFtyZWFseV1bcmVhbHhdICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGRyYXcoKSB7XG4gICAgICAgIGxldCBwaWVjZU1hdHJpeCA9IHRoaXMuYWN0aXZlUGllY2UucGllY2VNYXRyaXg7XG4gICAgICAgIHRoaXMuY3R4LmxpbmVXaWR0aCA9IDAuMTtcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBwaWVjZU1hdHJpeC5sZW5ndGg7IHkrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBwaWVjZU1hdHJpeFt5XS5sZW5ndGg7IHgrKykge1xuICAgICAgICAgICAgICAgIGlmIChwaWVjZU1hdHJpeFt5XVt4XSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5jbGVhclJlY3QoeCArIHRoaXMub2Zmc2V0WCwgeSArIHRoaXMub2Zmc2V0WSwgMSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LnJlY3QoeCArIHRoaXMub2Zmc2V0WCwgeSArIHRoaXMub2Zmc2V0WSwgMSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5kZWZhdWx0ID0gU2hhZG93UGllY2U7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///592\n')},457:(__unused_webpack_module,exports)=>{eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nclass Stack {\n    constructor() {\n        this.stackMatrix = this.createMatrix(10, 20);\n    }\n    emptyStack() {\n        this.stackMatrix.forEach((row) => row.fill(0));\n    }\n    removeLines() {\n        let removedCount = 0;\n        let lineComplete = true;\n        let y = this.stackMatrix.length - 1;\n        while (y >= 0) {\n            for (let x = 0; x < this.stackMatrix[y].length; x++) {\n                // find a completed line\n                if (this.stackMatrix[y][x] === 0) {\n                    lineComplete = false;\n                }\n            }\n            if (lineComplete === true) {\n                // shift everything down starting from index y to cover a single completed line\n                removedCount++;\n                for (let i = y; i > 0; i--) {\n                    this.stackMatrix[i] = [...this.stackMatrix[i - 1]];\n                }\n            }\n            else {\n                y--;\n                lineComplete = true;\n            }\n        }\n        return removedCount;\n    }\n    createMatrix(sizeX, sizeY) {\n        const matrix = [];\n        for (let i = 0; i < sizeY; i++) {\n            matrix.push(new Array(sizeX).fill(0));\n        }\n        return matrix;\n    }\n}\nexports["default"] = Stack;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDU3LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixnQ0FBZ0M7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxPQUFPO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixXQUFXO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBZSIsInNvdXJjZXMiOlsid2VicGFjazovL3RldHJpcy8uL3NyYy9TdGFjay50cz8zOTU0Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY2xhc3MgU3RhY2sge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnN0YWNrTWF0cml4ID0gdGhpcy5jcmVhdGVNYXRyaXgoMTAsIDIwKTtcbiAgICB9XG4gICAgZW1wdHlTdGFjaygpIHtcbiAgICAgICAgdGhpcy5zdGFja01hdHJpeC5mb3JFYWNoKChyb3cpID0+IHJvdy5maWxsKDApKTtcbiAgICB9XG4gICAgcmVtb3ZlTGluZXMoKSB7XG4gICAgICAgIGxldCByZW1vdmVkQ291bnQgPSAwO1xuICAgICAgICBsZXQgbGluZUNvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgbGV0IHkgPSB0aGlzLnN0YWNrTWF0cml4Lmxlbmd0aCAtIDE7XG4gICAgICAgIHdoaWxlICh5ID49IDApIHtcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy5zdGFja01hdHJpeFt5XS5sZW5ndGg7IHgrKykge1xuICAgICAgICAgICAgICAgIC8vIGZpbmQgYSBjb21wbGV0ZWQgbGluZVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YWNrTWF0cml4W3ldW3hdID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmVDb21wbGV0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsaW5lQ29tcGxldGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAvLyBzaGlmdCBldmVyeXRoaW5nIGRvd24gc3RhcnRpbmcgZnJvbSBpbmRleCB5IHRvIGNvdmVyIGEgc2luZ2xlIGNvbXBsZXRlZCBsaW5lXG4gICAgICAgICAgICAgICAgcmVtb3ZlZENvdW50Kys7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IHk7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFja01hdHJpeFtpXSA9IFsuLi50aGlzLnN0YWNrTWF0cml4W2kgLSAxXV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgeS0tO1xuICAgICAgICAgICAgICAgIGxpbmVDb21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlbW92ZWRDb3VudDtcbiAgICB9XG4gICAgY3JlYXRlTWF0cml4KHNpemVYLCBzaXplWSkge1xuICAgICAgICBjb25zdCBtYXRyaXggPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplWTsgaSsrKSB7XG4gICAgICAgICAgICBtYXRyaXgucHVzaChuZXcgQXJyYXkoc2l6ZVgpLmZpbGwoMCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXRyaXg7XG4gICAgfVxufVxuZXhwb3J0cy5kZWZhdWx0ID0gU3RhY2s7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///457\n')},607:function(__unused_webpack_module,exports,__webpack_require__){eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst Game_1 = __importDefault(__webpack_require__(221));\nlet menu = document.querySelector('#overlay');\nlet heading = menu.querySelector('#overlay-heading');\nlet startButton = document.querySelector('#start');\nheading.innerText = 'Tetris';\nstartButton.style.display = 'block';\nstartButton.addEventListener('click', function (event) {\n    menu.style.display = 'none';\n    new Game_1.default();\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjA3LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsK0JBQStCLG1CQUFPLENBQUMsR0FBUTtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3RldHJpcy8uL3NyYy9pbmRleC50cz9lOTRlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgR2FtZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL0dhbWVcIikpO1xubGV0IG1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjb3ZlcmxheScpO1xubGV0IGhlYWRpbmcgPSBtZW51LnF1ZXJ5U2VsZWN0b3IoJyNvdmVybGF5LWhlYWRpbmcnKTtcbmxldCBzdGFydEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzdGFydCcpO1xuaGVhZGluZy5pbm5lclRleHQgPSAnVGV0cmlzJztcbnN0YXJ0QnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuc3RhcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBtZW51LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgbmV3IEdhbWVfMS5kZWZhdWx0KCk7XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///607\n")}},__webpack_module_cache__={};function __webpack_require__(g){var I=__webpack_module_cache__[g];if(void 0!==I)return I.exports;var C=__webpack_module_cache__[g]={exports:{}};return __webpack_modules__[g].call(C.exports,C,C.exports,__webpack_require__),C.exports}var __webpack_exports__=__webpack_require__(607)})();