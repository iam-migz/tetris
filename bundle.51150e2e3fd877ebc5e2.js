/*! For license information please see bundle.51150e2e3fd877ebc5e2.js.LICENSE.txt */
(()=>{var t={122:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var r=n(354),i=n.n(r),s=n(314),o=n.n(s)()(i());o.push([t.id,".WaucoZMS2pVTYzoaA38b {\n\tdisplay: flex;\n\tjustify-content: center;\n\tgap: 1em;\n\tmargin-top: 3em;\n}\n\n.seemCqScCL8LQGBtsB0N {\n\ttext-align: center;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n}\n\n.QC2moBAm0COP28vslgDO {\n\tborder: solid 0.2em #fff;\n\theight: 80vh;\n}","",{version:3,sources:["webpack://./src/styles/canvas.module.css"],names:[],mappings:"AAAA;CACC,aAAa;CACb,uBAAuB;CACvB,QAAQ;CACR,eAAe;AAChB;;AAEA;CACC,kBAAkB;CAClB,aAAa;CACb,sBAAsB;CACtB,8BAA8B;AAC/B;;AAEA;CACC,wBAAwB;CACxB,YAAY;AACb",sourcesContent:[".container {\n\tdisplay: flex;\n\tjustify-content: center;\n\tgap: 1em;\n\tmargin-top: 3em;\n}\n\n.side {\n\ttext-align: center;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n}\n\n.tetris {\n\tborder: solid 0.2em #fff;\n\theight: 80vh;\n}"],sourceRoot:""}]),o.locals={container:"WaucoZMS2pVTYzoaA38b",side:"seemCqScCL8LQGBtsB0N",tetris:"QC2moBAm0COP28vslgDO"};const a=o},437:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var r=n(354),i=n.n(r),s=n(314),o=n.n(s)()(i());o.push([t.id,".IxhHruHt0rHKiDhXNqM0 {\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\tmin-width: 240px;\n\tbackground: #80808030;\n\tpadding: 1em;\n\tborder-radius: 5px;\n\tcolor: white;\n}\n\n.IxhHruHt0rHKiDhXNqM0 h3 {\n\ttext-align: center;\n\tpadding-bottom: 1em;\n}\n\n.JemVxfHM46hmO_Jup7AY {\n\tfont-size: 0.8em;\n\tcolor: gray;\n}","",{version:3,sources:["webpack://./src/styles/highscores.module.css"],names:[],mappings:"AAAA;CACC,kBAAkB;CAClB,MAAM;CACN,QAAQ;CACR,gBAAgB;CAChB,qBAAqB;CACrB,YAAY;CACZ,kBAAkB;CAClB,YAAY;AACb;;AAEA;CACC,kBAAkB;CAClB,mBAAmB;AACpB;;AAEA;CACC,gBAAgB;CAChB,WAAW;AACZ",sourcesContent:[".highscores {\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\tmin-width: 240px;\n\tbackground: #80808030;\n\tpadding: 1em;\n\tborder-radius: 5px;\n\tcolor: white;\n}\n\n.highscores h3 {\n\ttext-align: center;\n\tpadding-bottom: 1em;\n}\n\n.date {\n\tfont-size: 0.8em;\n\tcolor: gray;\n}"],sourceRoot:""}]),o.locals={highscores:"IxhHruHt0rHKiDhXNqM0",date:"JemVxfHM46hmO_Jup7AY"};const a=o},420:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var r=n(354),i=n.n(r),s=n(314),o=n.n(s)()(i());o.push([t.id,"* {\n\tmargin: 0;\n\tpadding: 0;\n}\n\ncanvas {\n\tborder-radius: 5px;\n\t-webkit-border-radius: 5px;\n\t-moz-border-radius: 5px;\n\t-ms-border-radius: 5px;\n\t-o-border-radius: 5px;\n}\n\nbody {\n\tbackground: #202028;\n\tcolor: #fff;\n\tfont-family: sans-serif;\n}\n\nli {\n\tlist-style-type: none;\n}\n\nsvg {\n\twidth: 40px;\n\tfill: gray;\n\tcursor: pointer;\n}","",{version:3,sources:["webpack://./src/styles/index.module.css"],names:[],mappings:"AAAA;CACC,SAAS;CACT,UAAU;AACX;;AAEA;CACC,kBAAkB;CAClB,0BAA0B;CAC1B,uBAAuB;CACvB,sBAAsB;CACtB,qBAAqB;AACtB;;AAEA;CACC,mBAAmB;CACnB,WAAW;CACX,uBAAuB;AACxB;;AAEA;CACC,qBAAqB;AACtB;;AAEA;CACC,WAAW;CACX,UAAU;CACV,eAAe;AAChB",sourcesContent:["* {\n\tmargin: 0;\n\tpadding: 0;\n}\n\ncanvas {\n\tborder-radius: 5px;\n\t-webkit-border-radius: 5px;\n\t-moz-border-radius: 5px;\n\t-ms-border-radius: 5px;\n\t-o-border-radius: 5px;\n}\n\nbody {\n\tbackground: #202028;\n\tcolor: #fff;\n\tfont-family: sans-serif;\n}\n\nli {\n\tlist-style-type: none;\n}\n\nsvg {\n\twidth: 40px;\n\tfill: gray;\n\tcursor: pointer;\n}"],sourceRoot:""}]),o.locals={};const a=o},753:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var r=n(354),i=n.n(r),s=n(314),o=n.n(s)()(i());o.push([t.id,".gwJyb_U1uZFeYSzMjbcA {\n\ttop: 0;\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100vh;\n\ttext-align: center;\n\tbackground-color: rgba(1, 1, 1, 0.5);\n}\n\n.nb1S7GCzl1oDcypQgsb2 {\n\tmargin: 0 auto;\n\twidth: 300px;\n\tbackground-color: black;\n\tmargin-top: 15em;\n\tpadding: 1em;\n\tborder-radius: 5px;\n\t-webkit-border-radius: 5px;\n\t-moz-border-radius: 5px;\n\t-ms-border-radius: 5px;\n\t-o-border-radius: 5px;\n\tbox-shadow: 0 0 15px 7px #fff,\n\t\t/* inner white */\n\t\t0 0 25px 15px #f0f,\n\t\t/* middle magenta */\n\t\t0 0 35px 20px #0ff;\n\t/* outer cyan */\n}\n\n.nb1S7GCzl1oDcypQgsb2 h2 {\n\tmargin: 1em;\n}\n\n.nb1S7GCzl1oDcypQgsb2 button {\n\tfont-weight: bold;\n\tdisplay: none;\n\tmargin: 0 auto;\n\tpadding: 1em;\n\twidth: 80%;\n\tmargin-top: 1em;\n\tcursor: pointer;\n\tborder: 0;\n\tbox-shadow: 2px 2px 2px gray;\n\tborder-radius: 5px;\n\t-webkit-border-radius: 5px;\n\t-moz-border-radius: 5px;\n\t-ms-border-radius: 5px;\n\t-o-border-radius: 5px;\n\tletter-spacing: 1.5px;\n\ttext-transform: uppercase;\n}\n\n.zJD0k4isJWvOtuIXYNac {\n\tpadding: 1em;\n\twidth: 80%;\n\tmargin-top: 2em;\n\tdisplay: none;\n\tmargin: 0 auto;\n}\n\n.uOR4jTK8IUhUSkir7pzq {\n\tdisplay: none;\n\tmargin: 0.5em 0;\n}","",{version:3,sources:["webpack://./src/styles/menu.module.css"],names:[],mappings:"AAAA;CACC,MAAM;CACN,kBAAkB;CAClB,WAAW;CACX,aAAa;CACb,kBAAkB;CAClB,oCAAoC;AACrC;;AAEA;CACC,cAAc;CACd,YAAY;CACZ,uBAAuB;CACvB,gBAAgB;CAChB,YAAY;CACZ,kBAAkB;CAClB,0BAA0B;CAC1B,uBAAuB;CACvB,sBAAsB;CACtB,qBAAqB;CACrB;;;;oBAImB;CACnB,eAAe;AAChB;;AAEA;CACC,WAAW;AACZ;;AAEA;CACC,iBAAiB;CACjB,aAAa;CACb,cAAc;CACd,YAAY;CACZ,UAAU;CACV,eAAe;CACf,eAAe;CACf,SAAS;CACT,4BAA4B;CAC5B,kBAAkB;CAClB,0BAA0B;CAC1B,uBAAuB;CACvB,sBAAsB;CACtB,qBAAqB;CACrB,qBAAqB;CACrB,yBAAyB;AAC1B;;AAEA;CACC,YAAY;CACZ,UAAU;CACV,eAAe;CACf,aAAa;CACb,cAAc;AACf;;AAEA;CACC,aAAa;CACb,eAAe;AAChB",sourcesContent:[".menu {\n\ttop: 0;\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100vh;\n\ttext-align: center;\n\tbackground-color: rgba(1, 1, 1, 0.5);\n}\n\n.content {\n\tmargin: 0 auto;\n\twidth: 300px;\n\tbackground-color: black;\n\tmargin-top: 15em;\n\tpadding: 1em;\n\tborder-radius: 5px;\n\t-webkit-border-radius: 5px;\n\t-moz-border-radius: 5px;\n\t-ms-border-radius: 5px;\n\t-o-border-radius: 5px;\n\tbox-shadow: 0 0 15px 7px #fff,\n\t\t/* inner white */\n\t\t0 0 25px 15px #f0f,\n\t\t/* middle magenta */\n\t\t0 0 35px 20px #0ff;\n\t/* outer cyan */\n}\n\n.content h2 {\n\tmargin: 1em;\n}\n\n.content button {\n\tfont-weight: bold;\n\tdisplay: none;\n\tmargin: 0 auto;\n\tpadding: 1em;\n\twidth: 80%;\n\tmargin-top: 1em;\n\tcursor: pointer;\n\tborder: 0;\n\tbox-shadow: 2px 2px 2px gray;\n\tborder-radius: 5px;\n\t-webkit-border-radius: 5px;\n\t-moz-border-radius: 5px;\n\t-ms-border-radius: 5px;\n\t-o-border-radius: 5px;\n\tletter-spacing: 1.5px;\n\ttext-transform: uppercase;\n}\n\n.name {\n\tpadding: 1em;\n\twidth: 80%;\n\tmargin-top: 2em;\n\tdisplay: none;\n\tmargin: 0 auto;\n}\n\n.message {\n\tdisplay: none;\n\tmargin: 0.5em 0;\n}"],sourceRoot:""}]),o.locals={menu:"gwJyb_U1uZFeYSzMjbcA",content:"nb1S7GCzl1oDcypQgsb2",name:"zJD0k4isJWvOtuIXYNac",message:"uOR4jTK8IUhUSkir7pzq"};const a=o},314:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,s){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var u=this[a][0];null!=u&&(o[u]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);r&&o[l[0]]||(void 0!==s&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=s),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),i&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=i):l[4]="".concat(i)),e.push(l))}},e}},354:t=>{"use strict";t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),s="/*# ".concat(i," */");return[e].concat([s]).join("\n")}return[e].join("\n")}},543:function(t,e,n){var r;t=n.nmd(t),function(){var i,s="Expected a function",o="__lodash_hash_undefined__",a="__lodash_placeholder__",u=32,c=128,l=1/0,h=9007199254740991,f=NaN,d=4294967295,p=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],g="[object Arguments]",m="[object Array]",y="[object Boolean]",v="[object Date]",w="[object Error]",b="[object Function]",_="[object GeneratorFunction]",A="[object Map]",E="[object Number]",C="[object Object]",T="[object Promise]",S="[object RegExp]",I="[object Set]",x="[object String]",D="[object Symbol]",k="[object WeakMap]",N="[object ArrayBuffer]",R="[object DataView]",M="[object Float32Array]",O="[object Float64Array]",L="[object Int8Array]",P="[object Int16Array]",B="[object Int32Array]",V="[object Uint8Array]",F="[object Uint8ClampedArray]",U="[object Uint16Array]",j="[object Uint32Array]",q=/\b__p \+= '';/g,$=/\b(__p \+=) '' \+/g,z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,W=/&(?:amp|lt|gt|quot|#39);/g,G=/[&<>"']/g,H=RegExp(W.source),K=RegExp(G.source),X=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,Y=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Z=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+/,it=/\s/,st=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ot=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ct=/[()=,{}\[\]\/\s]/,lt=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,dt=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,mt=/^0o[0-7]+$/i,yt=/^(?:0|[1-9]\d*)$/,vt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wt=/($^)/,bt=/['\n\r\u2028\u2029\\]/g,_t="\\ud800-\\udfff",At="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Et="\\u2700-\\u27bf",Ct="a-z\\xdf-\\xf6\\xf8-\\xff",Tt="A-Z\\xc0-\\xd6\\xd8-\\xde",St="\\ufe0e\\ufe0f",It="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",xt="["+_t+"]",Dt="["+It+"]",kt="["+At+"]",Nt="\\d+",Rt="["+Et+"]",Mt="["+Ct+"]",Ot="[^"+_t+It+Nt+Et+Ct+Tt+"]",Lt="\\ud83c[\\udffb-\\udfff]",Pt="[^"+_t+"]",Bt="(?:\\ud83c[\\udde6-\\uddff]){2}",Vt="[\\ud800-\\udbff][\\udc00-\\udfff]",Ft="["+Tt+"]",Ut="\\u200d",jt="(?:"+Mt+"|"+Ot+")",qt="(?:"+Ft+"|"+Ot+")",$t="(?:['’](?:d|ll|m|re|s|t|ve))?",zt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Wt="(?:"+kt+"|"+Lt+")?",Gt="["+St+"]?",Ht=Gt+Wt+"(?:"+Ut+"(?:"+[Pt,Bt,Vt].join("|")+")"+Gt+Wt+")*",Kt="(?:"+[Rt,Bt,Vt].join("|")+")"+Ht,Xt="(?:"+[Pt+kt+"?",kt,Bt,Vt,xt].join("|")+")",Qt=RegExp("['’]","g"),Yt=RegExp(kt,"g"),Jt=RegExp(Lt+"(?="+Lt+")|"+Xt+Ht,"g"),Zt=RegExp([Ft+"?"+Mt+"+"+$t+"(?="+[Dt,Ft,"$"].join("|")+")",qt+"+"+zt+"(?="+[Dt,Ft+jt,"$"].join("|")+")",Ft+"?"+jt+"+"+$t,Ft+"+"+zt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Nt,Kt].join("|"),"g"),te=RegExp("["+Ut+_t+At+St+"]"),ee=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ne=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],re=-1,ie={};ie[M]=ie[O]=ie[L]=ie[P]=ie[B]=ie[V]=ie[F]=ie[U]=ie[j]=!0,ie[g]=ie[m]=ie[N]=ie[y]=ie[R]=ie[v]=ie[w]=ie[b]=ie[A]=ie[E]=ie[C]=ie[S]=ie[I]=ie[x]=ie[k]=!1;var se={};se[g]=se[m]=se[N]=se[R]=se[y]=se[v]=se[M]=se[O]=se[L]=se[P]=se[B]=se[A]=se[E]=se[C]=se[S]=se[I]=se[x]=se[D]=se[V]=se[F]=se[U]=se[j]=!0,se[w]=se[b]=se[k]=!1;var oe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ae=parseFloat,ue=parseInt,ce="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,le="object"==typeof self&&self&&self.Object===Object&&self,he=ce||le||Function("return this")(),fe=e&&!e.nodeType&&e,de=fe&&t&&!t.nodeType&&t,pe=de&&de.exports===fe,ge=pe&&ce.process,me=function(){try{return de&&de.require&&de.require("util").types||ge&&ge.binding&&ge.binding("util")}catch(t){}}(),ye=me&&me.isArrayBuffer,ve=me&&me.isDate,we=me&&me.isMap,be=me&&me.isRegExp,_e=me&&me.isSet,Ae=me&&me.isTypedArray;function Ee(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ce(t,e,n,r){for(var i=-1,s=null==t?0:t.length;++i<s;){var o=t[i];e(r,o,n(o),t)}return r}function Te(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Se(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Ie(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function xe(t,e){for(var n=-1,r=null==t?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}function De(t,e){return!(null==t||!t.length)&&Fe(t,e,0)>-1}function ke(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Ne(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Re(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Me(t,e,n,r){var i=-1,s=null==t?0:t.length;for(r&&s&&(n=t[++i]);++i<s;)n=e(n,t[i],i,t);return n}function Oe(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Le(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Pe=$e("length");function Be(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Ve(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}function Fe(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Ve(t,je,n)}function Ue(t,e,n,r){for(var i=n-1,s=t.length;++i<s;)if(r(t[i],e))return i;return-1}function je(t){return t!=t}function qe(t,e){var n=null==t?0:t.length;return n?Ge(t,e)/n:f}function $e(t){return function(e){return null==e?i:e[t]}}function ze(t){return function(e){return null==t?i:t[e]}}function We(t,e,n,r,i){return i(t,(function(t,i,s){n=r?(r=!1,t):e(n,t,i,s)})),n}function Ge(t,e){for(var n,r=-1,s=t.length;++r<s;){var o=e(t[r]);o!==i&&(n=n===i?o:n+o)}return n}function He(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Ke(t){return t?t.slice(0,fn(t)+1).replace(rt,""):t}function Xe(t){return function(e){return t(e)}}function Qe(t,e){return Ne(e,(function(e){return t[e]}))}function Ye(t,e){return t.has(e)}function Je(t,e){for(var n=-1,r=t.length;++n<r&&Fe(e,t[n],0)>-1;);return n}function Ze(t,e){for(var n=t.length;n--&&Fe(e,t[n],0)>-1;);return n}var tn=ze({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),en=ze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nn(t){return"\\"+oe[t]}function rn(t){return te.test(t)}function sn(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function on(t,e){return function(n){return t(e(n))}}function an(t,e){for(var n=-1,r=t.length,i=0,s=[];++n<r;){var o=t[n];o!==e&&o!==a||(t[n]=a,s[i++]=n)}return s}function un(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function cn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function ln(t){return rn(t)?function(t){for(var e=Jt.lastIndex=0;Jt.test(t);)++e;return e}(t):Pe(t)}function hn(t){return rn(t)?function(t){return t.match(Jt)||[]}(t):function(t){return t.split("")}(t)}function fn(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e}var dn=ze({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),pn=function t(e){var n,r=(e=null==e?he:pn.defaults(he.Object(),e,pn.pick(he,ne))).Array,it=e.Date,_t=e.Error,At=e.Function,Et=e.Math,Ct=e.Object,Tt=e.RegExp,St=e.String,It=e.TypeError,xt=r.prototype,Dt=At.prototype,kt=Ct.prototype,Nt=e["__core-js_shared__"],Rt=Dt.toString,Mt=kt.hasOwnProperty,Ot=0,Lt=(n=/[^.]+$/.exec(Nt&&Nt.keys&&Nt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Pt=kt.toString,Bt=Rt.call(Ct),Vt=he._,Ft=Tt("^"+Rt.call(Mt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ut=pe?e.Buffer:i,jt=e.Symbol,qt=e.Uint8Array,$t=Ut?Ut.allocUnsafe:i,zt=on(Ct.getPrototypeOf,Ct),Wt=Ct.create,Gt=kt.propertyIsEnumerable,Ht=xt.splice,Kt=jt?jt.isConcatSpreadable:i,Xt=jt?jt.iterator:i,Jt=jt?jt.toStringTag:i,te=function(){try{var t=us(Ct,"defineProperty");return t({},"",{}),t}catch(t){}}(),oe=e.clearTimeout!==he.clearTimeout&&e.clearTimeout,ce=it&&it.now!==he.Date.now&&it.now,le=e.setTimeout!==he.setTimeout&&e.setTimeout,fe=Et.ceil,de=Et.floor,ge=Ct.getOwnPropertySymbols,me=Ut?Ut.isBuffer:i,Pe=e.isFinite,ze=xt.join,gn=on(Ct.keys,Ct),mn=Et.max,yn=Et.min,vn=it.now,wn=e.parseInt,bn=Et.random,_n=xt.reverse,An=us(e,"DataView"),En=us(e,"Map"),Cn=us(e,"Promise"),Tn=us(e,"Set"),Sn=us(e,"WeakMap"),In=us(Ct,"create"),xn=Sn&&new Sn,Dn={},kn=Ps(An),Nn=Ps(En),Rn=Ps(Cn),Mn=Ps(Tn),On=Ps(Sn),Ln=jt?jt.prototype:i,Pn=Ln?Ln.valueOf:i,Bn=Ln?Ln.toString:i;function Vn(t){if(ta(t)&&!$o(t)&&!(t instanceof qn)){if(t instanceof jn)return t;if(Mt.call(t,"__wrapped__"))return Bs(t)}return new jn(t)}var Fn=function(){function t(){}return function(e){if(!Zo(e))return{};if(Wt)return Wt(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Un(){}function jn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function qn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function $n(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function zn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Wn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Wn;++e<n;)this.add(t[e])}function Hn(t){var e=this.__data__=new zn(t);this.size=e.size}function Kn(t,e){var n=$o(t),r=!n&&qo(t),i=!n&&!r&&Ho(t),s=!n&&!r&&!i&&ua(t),o=n||r||i||s,a=o?He(t.length,St):[],u=a.length;for(var c in t)!e&&!Mt.call(t,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||gs(c,u))||a.push(c);return a}function Xn(t){var e=t.length;return e?t[Wr(0,e-1)]:i}function Qn(t,e){return Ns(Si(t),sr(e,0,t.length))}function Yn(t){return Ns(Si(t))}function Jn(t,e,n){(n!==i&&!Fo(t[e],n)||n===i&&!(e in t))&&rr(t,e,n)}function Zn(t,e,n){var r=t[e];Mt.call(t,e)&&Fo(r,n)&&(n!==i||e in t)||rr(t,e,n)}function tr(t,e){for(var n=t.length;n--;)if(Fo(t[n][0],e))return n;return-1}function er(t,e,n,r){return lr(t,(function(t,i,s){e(r,t,n(t),s)})),r}function nr(t,e){return t&&Ii(e,ka(e),t)}function rr(t,e,n){"__proto__"==e&&te?te(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ir(t,e){for(var n=-1,s=e.length,o=r(s),a=null==t;++n<s;)o[n]=a?i:Ta(t,e[n]);return o}function sr(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function or(t,e,n,r,s,o){var a,u=1&e,c=2&e,l=4&e;if(n&&(a=s?n(t,r,s,o):n(t)),a!==i)return a;if(!Zo(t))return t;var h=$o(t);if(h){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Mt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return Si(t,a)}else{var f=hs(t),d=f==b||f==_;if(Ho(t))return bi(t,u);if(f==C||f==g||d&&!s){if(a=c||d?{}:ds(t),!u)return c?function(t,e){return Ii(t,ls(t),e)}(t,function(t,e){return t&&Ii(e,Na(e),t)}(a,t)):function(t,e){return Ii(t,cs(t),e)}(t,nr(a,t))}else{if(!se[f])return s?t:{};a=function(t,e,n){var r,i=t.constructor;switch(e){case N:return _i(t);case y:case v:return new i(+t);case R:return function(t,e){var n=e?_i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case M:case O:case L:case P:case B:case V:case F:case U:case j:return Ai(t,n);case A:return new i;case E:case x:return new i(t);case S:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case I:return new i;case D:return r=t,Pn?Ct(Pn.call(r)):{}}}(t,f,u)}}o||(o=new Hn);var p=o.get(t);if(p)return p;o.set(t,a),sa(t)?t.forEach((function(r){a.add(or(r,e,n,r,t,o))})):ea(t)&&t.forEach((function(r,i){a.set(i,or(r,e,n,i,t,o))}));var m=h?i:(l?c?es:ts:c?Na:ka)(t);return Te(m||t,(function(r,i){m&&(r=t[i=r]),Zn(a,i,or(r,e,n,i,t,o))})),a}function ar(t,e,n){var r=n.length;if(null==t)return!r;for(t=Ct(t);r--;){var s=n[r],o=e[s],a=t[s];if(a===i&&!(s in t)||!o(a))return!1}return!0}function ur(t,e,n){if("function"!=typeof t)throw new It(s);return Is((function(){t.apply(i,n)}),e)}function cr(t,e,n,r){var i=-1,s=De,o=!0,a=t.length,u=[],c=e.length;if(!a)return u;n&&(e=Ne(e,Xe(n))),r?(s=ke,o=!1):e.length>=200&&(s=Ye,o=!1,e=new Gn(e));t:for(;++i<a;){var l=t[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,o&&h==h){for(var f=c;f--;)if(e[f]===h)continue t;u.push(l)}else s(e,h,r)||u.push(l)}return u}Vn.templateSettings={escape:X,evaluate:Q,interpolate:Y,variable:"",imports:{_:Vn}},Vn.prototype=Un.prototype,Vn.prototype.constructor=Vn,jn.prototype=Fn(Un.prototype),jn.prototype.constructor=jn,qn.prototype=Fn(Un.prototype),qn.prototype.constructor=qn,$n.prototype.clear=function(){this.__data__=In?In(null):{},this.size=0},$n.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},$n.prototype.get=function(t){var e=this.__data__;if(In){var n=e[t];return n===o?i:n}return Mt.call(e,t)?e[t]:i},$n.prototype.has=function(t){var e=this.__data__;return In?e[t]!==i:Mt.call(e,t)},$n.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=In&&e===i?o:e,this},zn.prototype.clear=function(){this.__data__=[],this.size=0},zn.prototype.delete=function(t){var e=this.__data__,n=tr(e,t);return!(n<0||(n==e.length-1?e.pop():Ht.call(e,n,1),--this.size,0))},zn.prototype.get=function(t){var e=this.__data__,n=tr(e,t);return n<0?i:e[n][1]},zn.prototype.has=function(t){return tr(this.__data__,t)>-1},zn.prototype.set=function(t,e){var n=this.__data__,r=tr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Wn.prototype.clear=function(){this.size=0,this.__data__={hash:new $n,map:new(En||zn),string:new $n}},Wn.prototype.delete=function(t){var e=os(this,t).delete(t);return this.size-=e?1:0,e},Wn.prototype.get=function(t){return os(this,t).get(t)},Wn.prototype.has=function(t){return os(this,t).has(t)},Wn.prototype.set=function(t,e){var n=os(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Gn.prototype.add=Gn.prototype.push=function(t){return this.__data__.set(t,o),this},Gn.prototype.has=function(t){return this.__data__.has(t)},Hn.prototype.clear=function(){this.__data__=new zn,this.size=0},Hn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Hn.prototype.get=function(t){return this.__data__.get(t)},Hn.prototype.has=function(t){return this.__data__.has(t)},Hn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof zn){var r=n.__data__;if(!En||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Wn(r)}return n.set(t,e),this.size=n.size,this};var lr=ki(vr),hr=ki(wr,!0);function fr(t,e){var n=!0;return lr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function dr(t,e,n){for(var r=-1,s=t.length;++r<s;){var o=t[r],a=e(o);if(null!=a&&(u===i?a==a&&!aa(a):n(a,u)))var u=a,c=o}return c}function pr(t,e){var n=[];return lr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function gr(t,e,n,r,i){var s=-1,o=t.length;for(n||(n=ps),i||(i=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?gr(a,e-1,n,r,i):Re(i,a):r||(i[i.length]=a)}return i}var mr=Ni(),yr=Ni(!0);function vr(t,e){return t&&mr(t,e,ka)}function wr(t,e){return t&&yr(t,e,ka)}function br(t,e){return xe(e,(function(e){return Qo(t[e])}))}function _r(t,e){for(var n=0,r=(e=mi(e,t)).length;null!=t&&n<r;)t=t[Ls(e[n++])];return n&&n==r?t:i}function Ar(t,e,n){var r=e(t);return $o(t)?r:Re(r,n(t))}function Er(t){return null==t?t===i?"[object Undefined]":"[object Null]":Jt&&Jt in Ct(t)?function(t){var e=Mt.call(t,Jt),n=t[Jt];try{t[Jt]=i;var r=!0}catch(t){}var s=Pt.call(t);return r&&(e?t[Jt]=n:delete t[Jt]),s}(t):function(t){return Pt.call(t)}(t)}function Cr(t,e){return t>e}function Tr(t,e){return null!=t&&Mt.call(t,e)}function Sr(t,e){return null!=t&&e in Ct(t)}function Ir(t,e,n){for(var s=n?ke:De,o=t[0].length,a=t.length,u=a,c=r(a),l=1/0,h=[];u--;){var f=t[u];u&&e&&(f=Ne(f,Xe(e))),l=yn(f.length,l),c[u]=!n&&(e||o>=120&&f.length>=120)?new Gn(u&&f):i}f=t[0];var d=-1,p=c[0];t:for(;++d<o&&h.length<l;){var g=f[d],m=e?e(g):g;if(g=n||0!==g?g:0,!(p?Ye(p,m):s(h,m,n))){for(u=a;--u;){var y=c[u];if(!(y?Ye(y,m):s(t[u],m,n)))continue t}p&&p.push(m),h.push(g)}}return h}function xr(t,e,n){var r=null==(t=Cs(t,e=mi(e,t)))?t:t[Ls(Ks(e))];return null==r?i:Ee(r,t,n)}function Dr(t){return ta(t)&&Er(t)==g}function kr(t,e,n,r,s){return t===e||(null==t||null==e||!ta(t)&&!ta(e)?t!=t&&e!=e:function(t,e,n,r,s,o){var a=$o(t),u=$o(e),c=a?m:hs(t),l=u?m:hs(e),h=(c=c==g?C:c)==C,f=(l=l==g?C:l)==C,d=c==l;if(d&&Ho(t)){if(!Ho(e))return!1;a=!0,h=!1}if(d&&!h)return o||(o=new Hn),a||ua(t)?Ji(t,e,n,r,s,o):function(t,e,n,r,i,s,o){switch(n){case R:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case N:return!(t.byteLength!=e.byteLength||!s(new qt(t),new qt(e)));case y:case v:case E:return Fo(+t,+e);case w:return t.name==e.name&&t.message==e.message;case S:case x:return t==e+"";case A:var a=sn;case I:var u=1&r;if(a||(a=un),t.size!=e.size&&!u)return!1;var c=o.get(t);if(c)return c==e;r|=2,o.set(t,e);var l=Ji(a(t),a(e),r,i,s,o);return o.delete(t),l;case D:if(Pn)return Pn.call(t)==Pn.call(e)}return!1}(t,e,c,n,r,s,o);if(!(1&n)){var p=h&&Mt.call(t,"__wrapped__"),b=f&&Mt.call(e,"__wrapped__");if(p||b){var _=p?t.value():t,T=b?e.value():e;return o||(o=new Hn),s(_,T,n,r,o)}}return!!d&&(o||(o=new Hn),function(t,e,n,r,s,o){var a=1&n,u=ts(t),c=u.length;if(c!=ts(e).length&&!a)return!1;for(var l=c;l--;){var h=u[l];if(!(a?h in e:Mt.call(e,h)))return!1}var f=o.get(t),d=o.get(e);if(f&&d)return f==e&&d==t;var p=!0;o.set(t,e),o.set(e,t);for(var g=a;++l<c;){var m=t[h=u[l]],y=e[h];if(r)var v=a?r(y,m,h,e,t,o):r(m,y,h,t,e,o);if(!(v===i?m===y||s(m,y,n,r,o):v)){p=!1;break}g||(g="constructor"==h)}if(p&&!g){var w=t.constructor,b=e.constructor;w==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof b&&b instanceof b||(p=!1)}return o.delete(t),o.delete(e),p}(t,e,n,r,s,o))}(t,e,n,r,kr,s))}function Nr(t,e,n,r){var s=n.length,o=s,a=!r;if(null==t)return!o;for(t=Ct(t);s--;){var u=n[s];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++s<o;){var c=(u=n[s])[0],l=t[c],h=u[1];if(a&&u[2]){if(l===i&&!(c in t))return!1}else{var f=new Hn;if(r)var d=r(l,h,c,t,e,f);if(!(d===i?kr(h,l,3,r,f):d))return!1}}return!0}function Rr(t){return!(!Zo(t)||(e=t,Lt&&Lt in e))&&(Qo(t)?Ft:gt).test(Ps(t));var e}function Mr(t){return"function"==typeof t?t:null==t?nu:"object"==typeof t?$o(t)?Vr(t[0],t[1]):Br(t):hu(t)}function Or(t){if(!bs(t))return gn(t);var e=[];for(var n in Ct(t))Mt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Lr(t,e){return t<e}function Pr(t,e){var n=-1,i=Wo(t)?r(t.length):[];return lr(t,(function(t,r,s){i[++n]=e(t,r,s)})),i}function Br(t){var e=as(t);return 1==e.length&&e[0][2]?As(e[0][0],e[0][1]):function(n){return n===t||Nr(n,t,e)}}function Vr(t,e){return ys(t)&&_s(e)?As(Ls(t),e):function(n){var r=Ta(n,t);return r===i&&r===e?Sa(n,t):kr(e,r,3)}}function Fr(t,e,n,r,s){t!==e&&mr(e,(function(o,a){if(s||(s=new Hn),Zo(o))!function(t,e,n,r,s,o,a){var u=Ts(t,n),c=Ts(e,n),l=a.get(c);if(l)Jn(t,n,l);else{var h=o?o(u,c,n+"",t,e,a):i,f=h===i;if(f){var d=$o(c),p=!d&&Ho(c),g=!d&&!p&&ua(c);h=c,d||p||g?$o(u)?h=u:Go(u)?h=Si(u):p?(f=!1,h=bi(c,!0)):g?(f=!1,h=Ai(c,!0)):h=[]:ra(c)||qo(c)?(h=u,qo(u)?h=ma(u):Zo(u)&&!Qo(u)||(h=ds(c))):f=!1}f&&(a.set(c,h),s(h,c,r,o,a),a.delete(c)),Jn(t,n,h)}}(t,e,a,n,Fr,r,s);else{var u=r?r(Ts(t,a),o,a+"",t,e,s):i;u===i&&(u=o),Jn(t,a,u)}}),Na)}function Ur(t,e){var n=t.length;if(n)return gs(e+=e<0?n:0,n)?t[e]:i}function jr(t,e,n){e=e.length?Ne(e,(function(t){return $o(t)?function(e){return _r(e,1===t.length?t[0]:t)}:t})):[nu];var r=-1;e=Ne(e,Xe(ss()));var i=Pr(t,(function(t,n,i){var s=Ne(e,(function(e){return e(t)}));return{criteria:s,index:++r,value:t}}));return function(t,e){var r=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,s=e.criteria,o=i.length,a=n.length;++r<o;){var u=Ei(i[r],s[r]);if(u)return r>=a?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));r--;)t[r]=t[r].value;return t}(i)}function qr(t,e,n){for(var r=-1,i=e.length,s={};++r<i;){var o=e[r],a=_r(t,o);n(a,o)&&Qr(s,mi(o,t),a)}return s}function $r(t,e,n,r){var i=r?Ue:Fe,s=-1,o=e.length,a=t;for(t===e&&(e=Si(e)),n&&(a=Ne(t,Xe(n)));++s<o;)for(var u=0,c=e[s],l=n?n(c):c;(u=i(a,l,u,r))>-1;)a!==t&&Ht.call(a,u,1),Ht.call(t,u,1);return t}function zr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==s){var s=i;gs(i)?Ht.call(t,i,1):ui(t,i)}}return t}function Wr(t,e){return t+de(bn()*(e-t+1))}function Gr(t,e){var n="";if(!t||e<1||e>h)return n;do{e%2&&(n+=t),(e=de(e/2))&&(t+=t)}while(e);return n}function Hr(t,e){return xs(Es(t,e,nu),t+"")}function Kr(t){return Xn(Fa(t))}function Xr(t,e){var n=Fa(t);return Ns(n,sr(e,0,n.length))}function Qr(t,e,n,r){if(!Zo(t))return t;for(var s=-1,o=(e=mi(e,t)).length,a=o-1,u=t;null!=u&&++s<o;){var c=Ls(e[s]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(s!=a){var h=u[c];(l=r?r(h,c,u):i)===i&&(l=Zo(h)?h:gs(e[s+1])?[]:{})}Zn(u,c,l),u=u[c]}return t}var Yr=xn?function(t,e){return xn.set(t,e),t}:nu,Jr=te?function(t,e){return te(t,"toString",{configurable:!0,enumerable:!1,value:Za(e),writable:!0})}:nu;function Zr(t){return Ns(Fa(t))}function ti(t,e,n){var i=-1,s=t.length;e<0&&(e=-e>s?0:s+e),(n=n>s?s:n)<0&&(n+=s),s=e>n?0:n-e>>>0,e>>>=0;for(var o=r(s);++i<s;)o[i]=t[i+e];return o}function ei(t,e){var n;return lr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ni(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var s=r+i>>>1,o=t[s];null!==o&&!aa(o)&&(n?o<=e:o<e)?r=s+1:i=s}return i}return ri(t,e,nu,n)}function ri(t,e,n,r){var s=0,o=null==t?0:t.length;if(0===o)return 0;for(var a=(e=n(e))!=e,u=null===e,c=aa(e),l=e===i;s<o;){var h=de((s+o)/2),f=n(t[h]),d=f!==i,p=null===f,g=f==f,m=aa(f);if(a)var y=r||g;else y=l?g&&(r||d):u?g&&d&&(r||!p):c?g&&d&&!p&&(r||!m):!p&&!m&&(r?f<=e:f<e);y?s=h+1:o=h}return yn(o,4294967294)}function ii(t,e){for(var n=-1,r=t.length,i=0,s=[];++n<r;){var o=t[n],a=e?e(o):o;if(!n||!Fo(a,u)){var u=a;s[i++]=0===o?0:o}}return s}function si(t){return"number"==typeof t?t:aa(t)?f:+t}function oi(t){if("string"==typeof t)return t;if($o(t))return Ne(t,oi)+"";if(aa(t))return Bn?Bn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ai(t,e,n){var r=-1,i=De,s=t.length,o=!0,a=[],u=a;if(n)o=!1,i=ke;else if(s>=200){var c=e?null:Gi(t);if(c)return un(c);o=!1,i=Ye,u=new Gn}else u=e?[]:a;t:for(;++r<s;){var l=t[r],h=e?e(l):l;if(l=n||0!==l?l:0,o&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),a.push(l)}else i(u,h,n)||(u!==a&&u.push(h),a.push(l))}return a}function ui(t,e){return null==(t=Cs(t,e=mi(e,t)))||delete t[Ls(Ks(e))]}function ci(t,e,n,r){return Qr(t,e,n(_r(t,e)),r)}function li(t,e,n,r){for(var i=t.length,s=r?i:-1;(r?s--:++s<i)&&e(t[s],s,t););return n?ti(t,r?0:s,r?s+1:i):ti(t,r?s+1:0,r?i:s)}function hi(t,e){var n=t;return n instanceof qn&&(n=n.value()),Me(e,(function(t,e){return e.func.apply(e.thisArg,Re([t],e.args))}),n)}function fi(t,e,n){var i=t.length;if(i<2)return i?ai(t[0]):[];for(var s=-1,o=r(i);++s<i;)for(var a=t[s],u=-1;++u<i;)u!=s&&(o[s]=cr(o[s]||a,t[u],e,n));return ai(gr(o,1),e,n)}function di(t,e,n){for(var r=-1,s=t.length,o=e.length,a={};++r<s;){var u=r<o?e[r]:i;n(a,t[r],u)}return a}function pi(t){return Go(t)?t:[]}function gi(t){return"function"==typeof t?t:nu}function mi(t,e){return $o(t)?t:ys(t,e)?[t]:Os(ya(t))}var yi=Hr;function vi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ti(t,e,n)}var wi=oe||function(t){return he.clearTimeout(t)};function bi(t,e){if(e)return t.slice();var n=t.length,r=$t?$t(n):new t.constructor(n);return t.copy(r),r}function _i(t){var e=new t.constructor(t.byteLength);return new qt(e).set(new qt(t)),e}function Ai(t,e){var n=e?_i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ei(t,e){if(t!==e){var n=t!==i,r=null===t,s=t==t,o=aa(t),a=e!==i,u=null===e,c=e==e,l=aa(e);if(!u&&!l&&!o&&t>e||o&&a&&c&&!u&&!l||r&&a&&c||!n&&c||!s)return 1;if(!r&&!o&&!l&&t<e||l&&n&&s&&!r&&!o||u&&n&&s||!a&&s||!c)return-1}return 0}function Ci(t,e,n,i){for(var s=-1,o=t.length,a=n.length,u=-1,c=e.length,l=mn(o-a,0),h=r(c+l),f=!i;++u<c;)h[u]=e[u];for(;++s<a;)(f||s<o)&&(h[n[s]]=t[s]);for(;l--;)h[u++]=t[s++];return h}function Ti(t,e,n,i){for(var s=-1,o=t.length,a=-1,u=n.length,c=-1,l=e.length,h=mn(o-u,0),f=r(h+l),d=!i;++s<h;)f[s]=t[s];for(var p=s;++c<l;)f[p+c]=e[c];for(;++a<u;)(d||s<o)&&(f[p+n[a]]=t[s++]);return f}function Si(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Ii(t,e,n,r){var s=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var u=e[o],c=r?r(n[u],t[u],u,n,t):i;c===i&&(c=t[u]),s?rr(n,u,c):Zn(n,u,c)}return n}function xi(t,e){return function(n,r){var i=$o(n)?Ce:er,s=e?e():{};return i(n,t,ss(r,2),s)}}function Di(t){return Hr((function(e,n){var r=-1,s=n.length,o=s>1?n[s-1]:i,a=s>2?n[2]:i;for(o=t.length>3&&"function"==typeof o?(s--,o):i,a&&ms(n[0],n[1],a)&&(o=s<3?i:o,s=1),e=Ct(e);++r<s;){var u=n[r];u&&t(e,u,r,o)}return e}))}function ki(t,e){return function(n,r){if(null==n)return n;if(!Wo(n))return t(n,r);for(var i=n.length,s=e?i:-1,o=Ct(n);(e?s--:++s<i)&&!1!==r(o[s],s,o););return n}}function Ni(t){return function(e,n,r){for(var i=-1,s=Ct(e),o=r(e),a=o.length;a--;){var u=o[t?a:++i];if(!1===n(s[u],u,s))break}return e}}function Ri(t){return function(e){var n=rn(e=ya(e))?hn(e):i,r=n?n[0]:e.charAt(0),s=n?vi(n,1).join(""):e.slice(1);return r[t]()+s}}function Mi(t){return function(e){return Me(Qa(qa(e).replace(Qt,"")),t,"")}}function Oi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Fn(t.prototype),r=t.apply(n,e);return Zo(r)?r:n}}function Li(t){return function(e,n,r){var s=Ct(e);if(!Wo(e)){var o=ss(n,3);e=ka(e),n=function(t){return o(s[t],t,s)}}var a=t(e,n,r);return a>-1?s[o?e[a]:a]:i}}function Pi(t){return Zi((function(e){var n=e.length,r=n,o=jn.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new It(s);if(o&&!u&&"wrapper"==rs(a))var u=new jn([],!0)}for(r=u?r:n;++r<n;){var c=rs(a=e[r]),l="wrapper"==c?ns(a):i;u=l&&vs(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[rs(l[0])].apply(u,l[3]):1==a.length&&vs(a)?u[c]():u.thru(a)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&$o(r))return u.plant(r).value();for(var i=0,s=n?e[i].apply(this,t):r;++i<n;)s=e[i].call(this,s);return s}}))}function Bi(t,e,n,s,o,a,u,l,h,f){var d=e&c,p=1&e,g=2&e,m=24&e,y=512&e,v=g?i:Oi(t);return function c(){for(var w=arguments.length,b=r(w),_=w;_--;)b[_]=arguments[_];if(m)var A=is(c),E=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(b,A);if(s&&(b=Ci(b,s,o,m)),a&&(b=Ti(b,a,u,m)),w-=E,m&&w<f){var C=an(b,A);return zi(t,e,Bi,c.placeholder,n,b,C,l,h,f-w)}var T=p?n:this,S=g?T[t]:t;return w=b.length,l?b=function(t,e){for(var n=t.length,r=yn(e.length,n),s=Si(t);r--;){var o=e[r];t[r]=gs(o,n)?s[o]:i}return t}(b,l):y&&w>1&&b.reverse(),d&&h<w&&(b.length=h),this&&this!==he&&this instanceof c&&(S=v||Oi(S)),S.apply(T,b)}}function Vi(t,e){return function(n,r){return function(t,e,n,r){return vr(t,(function(t,i,s){e(r,n(t),i,s)})),r}(n,t,e(r),{})}}function Fi(t,e){return function(n,r){var s;if(n===i&&r===i)return e;if(n!==i&&(s=n),r!==i){if(s===i)return r;"string"==typeof n||"string"==typeof r?(n=oi(n),r=oi(r)):(n=si(n),r=si(r)),s=t(n,r)}return s}}function Ui(t){return Zi((function(e){return e=Ne(e,Xe(ss())),Hr((function(n){var r=this;return t(e,(function(t){return Ee(t,r,n)}))}))}))}function ji(t,e){var n=(e=e===i?" ":oi(e)).length;if(n<2)return n?Gr(e,t):e;var r=Gr(e,fe(t/ln(e)));return rn(e)?vi(hn(r),0,t).join(""):r.slice(0,t)}function qi(t){return function(e,n,s){return s&&"number"!=typeof s&&ms(e,n,s)&&(n=s=i),e=fa(e),n===i?(n=e,e=0):n=fa(n),function(t,e,n,i){for(var s=-1,o=mn(fe((e-t)/(n||1)),0),a=r(o);o--;)a[i?o:++s]=t,t+=n;return a}(e,n,s=s===i?e<n?1:-1:fa(s),t)}}function $i(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ga(e),n=ga(n)),t(e,n)}}function zi(t,e,n,r,s,o,a,c,l,h){var f=8&e;e|=f?u:64,4&(e&=~(f?64:u))||(e&=-4);var d=[t,e,s,f?o:i,f?a:i,f?i:o,f?i:a,c,l,h],p=n.apply(i,d);return vs(t)&&Ss(p,d),p.placeholder=r,Ds(p,t,e)}function Wi(t){var e=Et[t];return function(t,n){if(t=ga(t),(n=null==n?0:yn(da(n),292))&&Pe(t)){var r=(ya(t)+"e").split("e");return+((r=(ya(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Gi=Tn&&1/un(new Tn([,-0]))[1]==l?function(t){return new Tn(t)}:au;function Hi(t){return function(e){var n=hs(e);return n==A?sn(e):n==I?cn(e):function(t,e){return Ne(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Ki(t,e,n,o,l,h,f,d){var p=2&e;if(!p&&"function"!=typeof t)throw new It(s);var g=o?o.length:0;if(g||(e&=-97,o=l=i),f=f===i?f:mn(da(f),0),d=d===i?d:da(d),g-=l?l.length:0,64&e){var m=o,y=l;o=l=i}var v=p?i:ns(t),w=[t,e,n,o,l,m,y,h,f,d];if(v&&function(t,e){var n=t[1],r=e[1],i=n|r,s=i<131,o=r==c&&8==n||r==c&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!s&&!o)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var u=e[3];if(u){var l=t[3];t[3]=l?Ci(l,u,e[4]):u,t[4]=l?an(t[3],a):e[4]}(u=e[5])&&(l=t[5],t[5]=l?Ti(l,u,e[6]):u,t[6]=l?an(t[5],a):e[6]),(u=e[7])&&(t[7]=u),r&c&&(t[8]=null==t[8]?e[8]:yn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(w,v),t=w[0],e=w[1],n=w[2],o=w[3],l=w[4],!(d=w[9]=w[9]===i?p?0:t.length:mn(w[9]-g,0))&&24&e&&(e&=-25),e&&1!=e)b=8==e||16==e?function(t,e,n){var s=Oi(t);return function o(){for(var a=arguments.length,u=r(a),c=a,l=is(o);c--;)u[c]=arguments[c];var h=a<3&&u[0]!==l&&u[a-1]!==l?[]:an(u,l);return(a-=h.length)<n?zi(t,e,Bi,o.placeholder,i,u,h,i,i,n-a):Ee(this&&this!==he&&this instanceof o?s:t,this,u)}}(t,e,d):e!=u&&33!=e||l.length?Bi.apply(i,w):function(t,e,n,i){var s=1&e,o=Oi(t);return function e(){for(var a=-1,u=arguments.length,c=-1,l=i.length,h=r(l+u),f=this&&this!==he&&this instanceof e?o:t;++c<l;)h[c]=i[c];for(;u--;)h[c++]=arguments[++a];return Ee(f,s?n:this,h)}}(t,e,n,o);else var b=function(t,e,n){var r=1&e,i=Oi(t);return function e(){return(this&&this!==he&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Ds((v?Yr:Ss)(b,w),t,e)}function Xi(t,e,n,r){return t===i||Fo(t,kt[n])&&!Mt.call(r,n)?e:t}function Qi(t,e,n,r,s,o){return Zo(t)&&Zo(e)&&(o.set(e,t),Fr(t,e,i,Qi,o),o.delete(e)),t}function Yi(t){return ra(t)?i:t}function Ji(t,e,n,r,s,o){var a=1&n,u=t.length,c=e.length;if(u!=c&&!(a&&c>u))return!1;var l=o.get(t),h=o.get(e);if(l&&h)return l==e&&h==t;var f=-1,d=!0,p=2&n?new Gn:i;for(o.set(t,e),o.set(e,t);++f<u;){var g=t[f],m=e[f];if(r)var y=a?r(m,g,f,e,t,o):r(g,m,f,t,e,o);if(y!==i){if(y)continue;d=!1;break}if(p){if(!Le(e,(function(t,e){if(!Ye(p,e)&&(g===t||s(g,t,n,r,o)))return p.push(e)}))){d=!1;break}}else if(g!==m&&!s(g,m,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function Zi(t){return xs(Es(t,i,$s),t+"")}function ts(t){return Ar(t,ka,cs)}function es(t){return Ar(t,Na,ls)}var ns=xn?function(t){return xn.get(t)}:au;function rs(t){for(var e=t.name+"",n=Dn[e],r=Mt.call(Dn,e)?n.length:0;r--;){var i=n[r],s=i.func;if(null==s||s==t)return i.name}return e}function is(t){return(Mt.call(Vn,"placeholder")?Vn:t).placeholder}function ss(){var t=Vn.iteratee||ru;return t=t===ru?Mr:t,arguments.length?t(arguments[0],arguments[1]):t}function os(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function as(t){for(var e=ka(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,_s(i)]}return e}function us(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Rr(n)?n:i}var cs=ge?function(t){return null==t?[]:(t=Ct(t),xe(ge(t),(function(e){return Gt.call(t,e)})))}:pu,ls=ge?function(t){for(var e=[];t;)Re(e,cs(t)),t=zt(t);return e}:pu,hs=Er;function fs(t,e,n){for(var r=-1,i=(e=mi(e,t)).length,s=!1;++r<i;){var o=Ls(e[r]);if(!(s=null!=t&&n(t,o)))break;t=t[o]}return s||++r!=i?s:!!(i=null==t?0:t.length)&&Jo(i)&&gs(o,i)&&($o(t)||qo(t))}function ds(t){return"function"!=typeof t.constructor||bs(t)?{}:Fn(zt(t))}function ps(t){return $o(t)||qo(t)||!!(Kt&&t&&t[Kt])}function gs(t,e){var n=typeof t;return!!(e=null==e?h:e)&&("number"==n||"symbol"!=n&&yt.test(t))&&t>-1&&t%1==0&&t<e}function ms(t,e,n){if(!Zo(n))return!1;var r=typeof e;return!!("number"==r?Wo(n)&&gs(e,n.length):"string"==r&&e in n)&&Fo(n[e],t)}function ys(t,e){if($o(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!aa(t))||Z.test(t)||!J.test(t)||null!=e&&t in Ct(e)}function vs(t){var e=rs(t),n=Vn[e];if("function"!=typeof n||!(e in qn.prototype))return!1;if(t===n)return!0;var r=ns(n);return!!r&&t===r[0]}(An&&hs(new An(new ArrayBuffer(1)))!=R||En&&hs(new En)!=A||Cn&&hs(Cn.resolve())!=T||Tn&&hs(new Tn)!=I||Sn&&hs(new Sn)!=k)&&(hs=function(t){var e=Er(t),n=e==C?t.constructor:i,r=n?Ps(n):"";if(r)switch(r){case kn:return R;case Nn:return A;case Rn:return T;case Mn:return I;case On:return k}return e});var ws=Nt?Qo:gu;function bs(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||kt)}function _s(t){return t==t&&!Zo(t)}function As(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in Ct(n))}}function Es(t,e,n){return e=mn(e===i?t.length-1:e,0),function(){for(var i=arguments,s=-1,o=mn(i.length-e,0),a=r(o);++s<o;)a[s]=i[e+s];s=-1;for(var u=r(e+1);++s<e;)u[s]=i[s];return u[e]=n(a),Ee(t,this,u)}}function Cs(t,e){return e.length<2?t:_r(t,ti(e,0,-1))}function Ts(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Ss=ks(Yr),Is=le||function(t,e){return he.setTimeout(t,e)},xs=ks(Jr);function Ds(t,e,n){var r=e+"";return xs(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(st,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Te(p,(function(n){var r="_."+n[0];e&n[1]&&!De(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(ot);return e?e[1].split(at):[]}(r),n)))}function ks(t){var e=0,n=0;return function(){var r=vn(),s=16-(r-n);if(n=r,s>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Ns(t,e){var n=-1,r=t.length,s=r-1;for(e=e===i?r:e;++n<e;){var o=Wr(n,s),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}var Rs,Ms,Os=(Rs=Mo((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,r,i){e.push(r?i.replace(lt,"$1"):n||t)})),e}),(function(t){return 500===Ms.size&&Ms.clear(),t})),Ms=Rs.cache,Rs);function Ls(t){if("string"==typeof t||aa(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ps(t){if(null!=t){try{return Rt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Bs(t){if(t instanceof qn)return t.clone();var e=new jn(t.__wrapped__,t.__chain__);return e.__actions__=Si(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Vs=Hr((function(t,e){return Go(t)?cr(t,gr(e,1,Go,!0)):[]})),Fs=Hr((function(t,e){var n=Ks(e);return Go(n)&&(n=i),Go(t)?cr(t,gr(e,1,Go,!0),ss(n,2)):[]})),Us=Hr((function(t,e){var n=Ks(e);return Go(n)&&(n=i),Go(t)?cr(t,gr(e,1,Go,!0),i,n):[]}));function js(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:da(n);return i<0&&(i=mn(r+i,0)),Ve(t,ss(e,3),i)}function qs(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var s=r-1;return n!==i&&(s=da(n),s=n<0?mn(r+s,0):yn(s,r-1)),Ve(t,ss(e,3),s,!0)}function $s(t){return null!=t&&t.length?gr(t,1):[]}function zs(t){return t&&t.length?t[0]:i}var Ws=Hr((function(t){var e=Ne(t,pi);return e.length&&e[0]===t[0]?Ir(e):[]})),Gs=Hr((function(t){var e=Ks(t),n=Ne(t,pi);return e===Ks(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Ir(n,ss(e,2)):[]})),Hs=Hr((function(t){var e=Ks(t),n=Ne(t,pi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Ir(n,i,e):[]}));function Ks(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Xs=Hr(Qs);function Qs(t,e){return t&&t.length&&e&&e.length?$r(t,e):t}var Ys=Zi((function(t,e){var n=null==t?0:t.length,r=ir(t,e);return zr(t,Ne(e,(function(t){return gs(t,n)?+t:t})).sort(Ei)),r}));function Js(t){return null==t?t:_n.call(t)}var Zs=Hr((function(t){return ai(gr(t,1,Go,!0))})),to=Hr((function(t){var e=Ks(t);return Go(e)&&(e=i),ai(gr(t,1,Go,!0),ss(e,2))})),eo=Hr((function(t){var e=Ks(t);return e="function"==typeof e?e:i,ai(gr(t,1,Go,!0),i,e)}));function no(t){if(!t||!t.length)return[];var e=0;return t=xe(t,(function(t){if(Go(t))return e=mn(t.length,e),!0})),He(e,(function(e){return Ne(t,$e(e))}))}function ro(t,e){if(!t||!t.length)return[];var n=no(t);return null==e?n:Ne(n,(function(t){return Ee(e,i,t)}))}var io=Hr((function(t,e){return Go(t)?cr(t,e):[]})),so=Hr((function(t){return fi(xe(t,Go))})),oo=Hr((function(t){var e=Ks(t);return Go(e)&&(e=i),fi(xe(t,Go),ss(e,2))})),ao=Hr((function(t){var e=Ks(t);return e="function"==typeof e?e:i,fi(xe(t,Go),i,e)})),uo=Hr(no),co=Hr((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,ro(t,n)}));function lo(t){var e=Vn(t);return e.__chain__=!0,e}function ho(t,e){return e(t)}var fo=Zi((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,s=function(e){return ir(e,t)};return!(e>1||this.__actions__.length)&&r instanceof qn&&gs(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:ho,args:[s],thisArg:i}),new jn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(s)})),po=xi((function(t,e,n){Mt.call(t,n)?++t[n]:rr(t,n,1)})),go=Li(js),mo=Li(qs);function yo(t,e){return($o(t)?Te:lr)(t,ss(e,3))}function vo(t,e){return($o(t)?Se:hr)(t,ss(e,3))}var wo=xi((function(t,e,n){Mt.call(t,n)?t[n].push(e):rr(t,n,[e])})),bo=Hr((function(t,e,n){var i=-1,s="function"==typeof e,o=Wo(t)?r(t.length):[];return lr(t,(function(t){o[++i]=s?Ee(e,t,n):xr(t,e,n)})),o})),_o=xi((function(t,e,n){rr(t,n,e)}));function Ao(t,e){return($o(t)?Ne:Pr)(t,ss(e,3))}var Eo=xi((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Co=Hr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&ms(t,e[0],e[1])?e=[]:n>2&&ms(e[0],e[1],e[2])&&(e=[e[0]]),jr(t,gr(e,1),[])})),To=ce||function(){return he.Date.now()};function So(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Ki(t,c,i,i,i,i,e)}function Io(t,e){var n;if("function"!=typeof e)throw new It(s);return t=da(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var xo=Hr((function(t,e,n){var r=1;if(n.length){var i=an(n,is(xo));r|=u}return Ki(t,r,e,n,i)})),Do=Hr((function(t,e,n){var r=3;if(n.length){var i=an(n,is(Do));r|=u}return Ki(e,r,t,n,i)}));function ko(t,e,n){var r,o,a,u,c,l,h=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new It(s);function g(e){var n=r,s=o;return r=o=i,h=e,u=t.apply(s,n)}function m(t){var n=t-l;return l===i||n>=e||n<0||d&&t-h>=a}function y(){var t=To();if(m(t))return v(t);c=Is(y,function(t){var n=e-(t-l);return d?yn(n,a-(t-h)):n}(t))}function v(t){return c=i,p&&r?g(t):(r=o=i,u)}function w(){var t=To(),n=m(t);if(r=arguments,o=this,l=t,n){if(c===i)return function(t){return h=t,c=Is(y,e),f?g(t):u}(l);if(d)return wi(c),c=Is(y,e),g(l)}return c===i&&(c=Is(y,e)),u}return e=ga(e)||0,Zo(n)&&(f=!!n.leading,a=(d="maxWait"in n)?mn(ga(n.maxWait)||0,e):a,p="trailing"in n?!!n.trailing:p),w.cancel=function(){c!==i&&wi(c),h=0,r=l=o=c=i},w.flush=function(){return c===i?u:v(To())},w}var No=Hr((function(t,e){return ur(t,1,e)})),Ro=Hr((function(t,e,n){return ur(t,ga(e)||0,n)}));function Mo(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new It(s);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(Mo.Cache||Wn),n}function Oo(t){if("function"!=typeof t)throw new It(s);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Mo.Cache=Wn;var Lo=yi((function(t,e){var n=(e=1==e.length&&$o(e[0])?Ne(e[0],Xe(ss())):Ne(gr(e,1),Xe(ss()))).length;return Hr((function(r){for(var i=-1,s=yn(r.length,n);++i<s;)r[i]=e[i].call(this,r[i]);return Ee(t,this,r)}))})),Po=Hr((function(t,e){var n=an(e,is(Po));return Ki(t,u,i,e,n)})),Bo=Hr((function(t,e){var n=an(e,is(Bo));return Ki(t,64,i,e,n)})),Vo=Zi((function(t,e){return Ki(t,256,i,i,i,e)}));function Fo(t,e){return t===e||t!=t&&e!=e}var Uo=$i(Cr),jo=$i((function(t,e){return t>=e})),qo=Dr(function(){return arguments}())?Dr:function(t){return ta(t)&&Mt.call(t,"callee")&&!Gt.call(t,"callee")},$o=r.isArray,zo=ye?Xe(ye):function(t){return ta(t)&&Er(t)==N};function Wo(t){return null!=t&&Jo(t.length)&&!Qo(t)}function Go(t){return ta(t)&&Wo(t)}var Ho=me||gu,Ko=ve?Xe(ve):function(t){return ta(t)&&Er(t)==v};function Xo(t){if(!ta(t))return!1;var e=Er(t);return e==w||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!ra(t)}function Qo(t){if(!Zo(t))return!1;var e=Er(t);return e==b||e==_||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Yo(t){return"number"==typeof t&&t==da(t)}function Jo(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function Zo(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ta(t){return null!=t&&"object"==typeof t}var ea=we?Xe(we):function(t){return ta(t)&&hs(t)==A};function na(t){return"number"==typeof t||ta(t)&&Er(t)==E}function ra(t){if(!ta(t)||Er(t)!=C)return!1;var e=zt(t);if(null===e)return!0;var n=Mt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Rt.call(n)==Bt}var ia=be?Xe(be):function(t){return ta(t)&&Er(t)==S},sa=_e?Xe(_e):function(t){return ta(t)&&hs(t)==I};function oa(t){return"string"==typeof t||!$o(t)&&ta(t)&&Er(t)==x}function aa(t){return"symbol"==typeof t||ta(t)&&Er(t)==D}var ua=Ae?Xe(Ae):function(t){return ta(t)&&Jo(t.length)&&!!ie[Er(t)]},ca=$i(Lr),la=$i((function(t,e){return t<=e}));function ha(t){if(!t)return[];if(Wo(t))return oa(t)?hn(t):Si(t);if(Xt&&t[Xt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Xt]());var e=hs(t);return(e==A?sn:e==I?un:Fa)(t)}function fa(t){return t?(t=ga(t))===l||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function da(t){var e=fa(t),n=e%1;return e==e?n?e-n:e:0}function pa(t){return t?sr(da(t),0,d):0}function ga(t){if("number"==typeof t)return t;if(aa(t))return f;if(Zo(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Zo(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ke(t);var n=pt.test(t);return n||mt.test(t)?ue(t.slice(2),n?2:8):dt.test(t)?f:+t}function ma(t){return Ii(t,Na(t))}function ya(t){return null==t?"":oi(t)}var va=Di((function(t,e){if(bs(e)||Wo(e))Ii(e,ka(e),t);else for(var n in e)Mt.call(e,n)&&Zn(t,n,e[n])})),wa=Di((function(t,e){Ii(e,Na(e),t)})),ba=Di((function(t,e,n,r){Ii(e,Na(e),t,r)})),_a=Di((function(t,e,n,r){Ii(e,ka(e),t,r)})),Aa=Zi(ir),Ea=Hr((function(t,e){t=Ct(t);var n=-1,r=e.length,s=r>2?e[2]:i;for(s&&ms(e[0],e[1],s)&&(r=1);++n<r;)for(var o=e[n],a=Na(o),u=-1,c=a.length;++u<c;){var l=a[u],h=t[l];(h===i||Fo(h,kt[l])&&!Mt.call(t,l))&&(t[l]=o[l])}return t})),Ca=Hr((function(t){return t.push(i,Qi),Ee(Ma,i,t)}));function Ta(t,e,n){var r=null==t?i:_r(t,e);return r===i?n:r}function Sa(t,e){return null!=t&&fs(t,e,Sr)}var Ia=Vi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Pt.call(e)),t[e]=n}),Za(nu)),xa=Vi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Pt.call(e)),Mt.call(t,e)?t[e].push(n):t[e]=[n]}),ss),Da=Hr(xr);function ka(t){return Wo(t)?Kn(t):Or(t)}function Na(t){return Wo(t)?Kn(t,!0):function(t){if(!Zo(t))return function(t){var e=[];if(null!=t)for(var n in Ct(t))e.push(n);return e}(t);var e=bs(t),n=[];for(var r in t)("constructor"!=r||!e&&Mt.call(t,r))&&n.push(r);return n}(t)}var Ra=Di((function(t,e,n){Fr(t,e,n)})),Ma=Di((function(t,e,n,r){Fr(t,e,n,r)})),Oa=Zi((function(t,e){var n={};if(null==t)return n;var r=!1;e=Ne(e,(function(e){return e=mi(e,t),r||(r=e.length>1),e})),Ii(t,es(t),n),r&&(n=or(n,7,Yi));for(var i=e.length;i--;)ui(n,e[i]);return n})),La=Zi((function(t,e){return null==t?{}:function(t,e){return qr(t,e,(function(e,n){return Sa(t,n)}))}(t,e)}));function Pa(t,e){if(null==t)return{};var n=Ne(es(t),(function(t){return[t]}));return e=ss(e),qr(t,n,(function(t,n){return e(t,n[0])}))}var Ba=Hi(ka),Va=Hi(Na);function Fa(t){return null==t?[]:Qe(t,ka(t))}var Ua=Mi((function(t,e,n){return e=e.toLowerCase(),t+(n?ja(e):e)}));function ja(t){return Xa(ya(t).toLowerCase())}function qa(t){return(t=ya(t))&&t.replace(vt,tn).replace(Yt,"")}var $a=Mi((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),za=Mi((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Wa=Ri("toLowerCase"),Ga=Mi((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Ha=Mi((function(t,e,n){return t+(n?" ":"")+Xa(e)})),Ka=Mi((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Xa=Ri("toUpperCase");function Qa(t,e,n){return t=ya(t),(e=n?i:e)===i?function(t){return ee.test(t)}(t)?function(t){return t.match(Zt)||[]}(t):function(t){return t.match(ut)||[]}(t):t.match(e)||[]}var Ya=Hr((function(t,e){try{return Ee(t,i,e)}catch(t){return Xo(t)?t:new _t(t)}})),Ja=Zi((function(t,e){return Te(e,(function(e){e=Ls(e),rr(t,e,xo(t[e],t))})),t}));function Za(t){return function(){return t}}var tu=Pi(),eu=Pi(!0);function nu(t){return t}function ru(t){return Mr("function"==typeof t?t:or(t,1))}var iu=Hr((function(t,e){return function(n){return xr(n,t,e)}})),su=Hr((function(t,e){return function(n){return xr(t,n,e)}}));function ou(t,e,n){var r=ka(e),i=br(e,r);null!=n||Zo(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=br(e,ka(e)));var s=!(Zo(n)&&"chain"in n&&!n.chain),o=Qo(t);return Te(i,(function(n){var r=e[n];t[n]=r,o&&(t.prototype[n]=function(){var e=this.__chain__;if(s||e){var n=t(this.__wrapped__);return(n.__actions__=Si(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Re([this.value()],arguments))})})),t}function au(){}var uu=Ui(Ne),cu=Ui(Ie),lu=Ui(Le);function hu(t){return ys(t)?$e(Ls(t)):function(t){return function(e){return _r(e,t)}}(t)}var fu=qi(),du=qi(!0);function pu(){return[]}function gu(){return!1}var mu,yu=Fi((function(t,e){return t+e}),0),vu=Wi("ceil"),wu=Fi((function(t,e){return t/e}),1),bu=Wi("floor"),_u=Fi((function(t,e){return t*e}),1),Au=Wi("round"),Eu=Fi((function(t,e){return t-e}),0);return Vn.after=function(t,e){if("function"!=typeof e)throw new It(s);return t=da(t),function(){if(--t<1)return e.apply(this,arguments)}},Vn.ary=So,Vn.assign=va,Vn.assignIn=wa,Vn.assignInWith=ba,Vn.assignWith=_a,Vn.at=Aa,Vn.before=Io,Vn.bind=xo,Vn.bindAll=Ja,Vn.bindKey=Do,Vn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return $o(t)?t:[t]},Vn.chain=lo,Vn.chunk=function(t,e,n){e=(n?ms(t,e,n):e===i)?1:mn(da(e),0);var s=null==t?0:t.length;if(!s||e<1)return[];for(var o=0,a=0,u=r(fe(s/e));o<s;)u[a++]=ti(t,o,o+=e);return u},Vn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var s=t[e];s&&(i[r++]=s)}return i},Vn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Re($o(n)?Si(n):[n],gr(e,1))},Vn.cond=function(t){var e=null==t?0:t.length,n=ss();return t=e?Ne(t,(function(t){if("function"!=typeof t[1])throw new It(s);return[n(t[0]),t[1]]})):[],Hr((function(n){for(var r=-1;++r<e;){var i=t[r];if(Ee(i[0],this,n))return Ee(i[1],this,n)}}))},Vn.conforms=function(t){return function(t){var e=ka(t);return function(n){return ar(n,t,e)}}(or(t,1))},Vn.constant=Za,Vn.countBy=po,Vn.create=function(t,e){var n=Fn(t);return null==e?n:nr(n,e)},Vn.curry=function t(e,n,r){var s=Ki(e,8,i,i,i,i,i,n=r?i:n);return s.placeholder=t.placeholder,s},Vn.curryRight=function t(e,n,r){var s=Ki(e,16,i,i,i,i,i,n=r?i:n);return s.placeholder=t.placeholder,s},Vn.debounce=ko,Vn.defaults=Ea,Vn.defaultsDeep=Ca,Vn.defer=No,Vn.delay=Ro,Vn.difference=Vs,Vn.differenceBy=Fs,Vn.differenceWith=Us,Vn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=n||e===i?1:da(e))<0?0:e,r):[]},Vn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,0,(e=r-(e=n||e===i?1:da(e)))<0?0:e):[]},Vn.dropRightWhile=function(t,e){return t&&t.length?li(t,ss(e,3),!0,!0):[]},Vn.dropWhile=function(t,e){return t&&t.length?li(t,ss(e,3),!0):[]},Vn.fill=function(t,e,n,r){var s=null==t?0:t.length;return s?(n&&"number"!=typeof n&&ms(t,e,n)&&(n=0,r=s),function(t,e,n,r){var s=t.length;for((n=da(n))<0&&(n=-n>s?0:s+n),(r=r===i||r>s?s:da(r))<0&&(r+=s),r=n>r?0:pa(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Vn.filter=function(t,e){return($o(t)?xe:pr)(t,ss(e,3))},Vn.flatMap=function(t,e){return gr(Ao(t,e),1)},Vn.flatMapDeep=function(t,e){return gr(Ao(t,e),l)},Vn.flatMapDepth=function(t,e,n){return n=n===i?1:da(n),gr(Ao(t,e),n)},Vn.flatten=$s,Vn.flattenDeep=function(t){return null!=t&&t.length?gr(t,l):[]},Vn.flattenDepth=function(t,e){return null!=t&&t.length?gr(t,e=e===i?1:da(e)):[]},Vn.flip=function(t){return Ki(t,512)},Vn.flow=tu,Vn.flowRight=eu,Vn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Vn.functions=function(t){return null==t?[]:br(t,ka(t))},Vn.functionsIn=function(t){return null==t?[]:br(t,Na(t))},Vn.groupBy=wo,Vn.initial=function(t){return null!=t&&t.length?ti(t,0,-1):[]},Vn.intersection=Ws,Vn.intersectionBy=Gs,Vn.intersectionWith=Hs,Vn.invert=Ia,Vn.invertBy=xa,Vn.invokeMap=bo,Vn.iteratee=ru,Vn.keyBy=_o,Vn.keys=ka,Vn.keysIn=Na,Vn.map=Ao,Vn.mapKeys=function(t,e){var n={};return e=ss(e,3),vr(t,(function(t,r,i){rr(n,e(t,r,i),t)})),n},Vn.mapValues=function(t,e){var n={};return e=ss(e,3),vr(t,(function(t,r,i){rr(n,r,e(t,r,i))})),n},Vn.matches=function(t){return Br(or(t,1))},Vn.matchesProperty=function(t,e){return Vr(t,or(e,1))},Vn.memoize=Mo,Vn.merge=Ra,Vn.mergeWith=Ma,Vn.method=iu,Vn.methodOf=su,Vn.mixin=ou,Vn.negate=Oo,Vn.nthArg=function(t){return t=da(t),Hr((function(e){return Ur(e,t)}))},Vn.omit=Oa,Vn.omitBy=function(t,e){return Pa(t,Oo(ss(e)))},Vn.once=function(t){return Io(2,t)},Vn.orderBy=function(t,e,n,r){return null==t?[]:($o(e)||(e=null==e?[]:[e]),$o(n=r?i:n)||(n=null==n?[]:[n]),jr(t,e,n))},Vn.over=uu,Vn.overArgs=Lo,Vn.overEvery=cu,Vn.overSome=lu,Vn.partial=Po,Vn.partialRight=Bo,Vn.partition=Eo,Vn.pick=La,Vn.pickBy=Pa,Vn.property=hu,Vn.propertyOf=function(t){return function(e){return null==t?i:_r(t,e)}},Vn.pull=Xs,Vn.pullAll=Qs,Vn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?$r(t,e,ss(n,2)):t},Vn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?$r(t,e,i,n):t},Vn.pullAt=Ys,Vn.range=fu,Vn.rangeRight=du,Vn.rearg=Vo,Vn.reject=function(t,e){return($o(t)?xe:pr)(t,Oo(ss(e,3)))},Vn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],s=t.length;for(e=ss(e,3);++r<s;){var o=t[r];e(o,r,t)&&(n.push(o),i.push(r))}return zr(t,i),n},Vn.rest=function(t,e){if("function"!=typeof t)throw new It(s);return Hr(t,e=e===i?e:da(e))},Vn.reverse=Js,Vn.sampleSize=function(t,e,n){return e=(n?ms(t,e,n):e===i)?1:da(e),($o(t)?Qn:Xr)(t,e)},Vn.set=function(t,e,n){return null==t?t:Qr(t,e,n)},Vn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Qr(t,e,n,r)},Vn.shuffle=function(t){return($o(t)?Yn:Zr)(t)},Vn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&ms(t,e,n)?(e=0,n=r):(e=null==e?0:da(e),n=n===i?r:da(n)),ti(t,e,n)):[]},Vn.sortBy=Co,Vn.sortedUniq=function(t){return t&&t.length?ii(t):[]},Vn.sortedUniqBy=function(t,e){return t&&t.length?ii(t,ss(e,2)):[]},Vn.split=function(t,e,n){return n&&"number"!=typeof n&&ms(t,e,n)&&(e=n=i),(n=n===i?d:n>>>0)?(t=ya(t))&&("string"==typeof e||null!=e&&!ia(e))&&!(e=oi(e))&&rn(t)?vi(hn(t),0,n):t.split(e,n):[]},Vn.spread=function(t,e){if("function"!=typeof t)throw new It(s);return e=null==e?0:mn(da(e),0),Hr((function(n){var r=n[e],i=vi(n,0,e);return r&&Re(i,r),Ee(t,this,i)}))},Vn.tail=function(t){var e=null==t?0:t.length;return e?ti(t,1,e):[]},Vn.take=function(t,e,n){return t&&t.length?ti(t,0,(e=n||e===i?1:da(e))<0?0:e):[]},Vn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=r-(e=n||e===i?1:da(e)))<0?0:e,r):[]},Vn.takeRightWhile=function(t,e){return t&&t.length?li(t,ss(e,3),!1,!0):[]},Vn.takeWhile=function(t,e){return t&&t.length?li(t,ss(e,3)):[]},Vn.tap=function(t,e){return e(t),t},Vn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new It(s);return Zo(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ko(t,e,{leading:r,maxWait:e,trailing:i})},Vn.thru=ho,Vn.toArray=ha,Vn.toPairs=Ba,Vn.toPairsIn=Va,Vn.toPath=function(t){return $o(t)?Ne(t,Ls):aa(t)?[t]:Si(Os(ya(t)))},Vn.toPlainObject=ma,Vn.transform=function(t,e,n){var r=$o(t),i=r||Ho(t)||ua(t);if(e=ss(e,4),null==n){var s=t&&t.constructor;n=i?r?new s:[]:Zo(t)&&Qo(s)?Fn(zt(t)):{}}return(i?Te:vr)(t,(function(t,r,i){return e(n,t,r,i)})),n},Vn.unary=function(t){return So(t,1)},Vn.union=Zs,Vn.unionBy=to,Vn.unionWith=eo,Vn.uniq=function(t){return t&&t.length?ai(t):[]},Vn.uniqBy=function(t,e){return t&&t.length?ai(t,ss(e,2)):[]},Vn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?ai(t,i,e):[]},Vn.unset=function(t,e){return null==t||ui(t,e)},Vn.unzip=no,Vn.unzipWith=ro,Vn.update=function(t,e,n){return null==t?t:ci(t,e,gi(n))},Vn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:ci(t,e,gi(n),r)},Vn.values=Fa,Vn.valuesIn=function(t){return null==t?[]:Qe(t,Na(t))},Vn.without=io,Vn.words=Qa,Vn.wrap=function(t,e){return Po(gi(e),t)},Vn.xor=so,Vn.xorBy=oo,Vn.xorWith=ao,Vn.zip=uo,Vn.zipObject=function(t,e){return di(t||[],e||[],Zn)},Vn.zipObjectDeep=function(t,e){return di(t||[],e||[],Qr)},Vn.zipWith=co,Vn.entries=Ba,Vn.entriesIn=Va,Vn.extend=wa,Vn.extendWith=ba,ou(Vn,Vn),Vn.add=yu,Vn.attempt=Ya,Vn.camelCase=Ua,Vn.capitalize=ja,Vn.ceil=vu,Vn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=ga(n))==n?n:0),e!==i&&(e=(e=ga(e))==e?e:0),sr(ga(t),e,n)},Vn.clone=function(t){return or(t,4)},Vn.cloneDeep=function(t){return or(t,5)},Vn.cloneDeepWith=function(t,e){return or(t,5,e="function"==typeof e?e:i)},Vn.cloneWith=function(t,e){return or(t,4,e="function"==typeof e?e:i)},Vn.conformsTo=function(t,e){return null==e||ar(t,e,ka(e))},Vn.deburr=qa,Vn.defaultTo=function(t,e){return null==t||t!=t?e:t},Vn.divide=wu,Vn.endsWith=function(t,e,n){t=ya(t),e=oi(e);var r=t.length,s=n=n===i?r:sr(da(n),0,r);return(n-=e.length)>=0&&t.slice(n,s)==e},Vn.eq=Fo,Vn.escape=function(t){return(t=ya(t))&&K.test(t)?t.replace(G,en):t},Vn.escapeRegExp=function(t){return(t=ya(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Vn.every=function(t,e,n){var r=$o(t)?Ie:fr;return n&&ms(t,e,n)&&(e=i),r(t,ss(e,3))},Vn.find=go,Vn.findIndex=js,Vn.findKey=function(t,e){return Be(t,ss(e,3),vr)},Vn.findLast=mo,Vn.findLastIndex=qs,Vn.findLastKey=function(t,e){return Be(t,ss(e,3),wr)},Vn.floor=bu,Vn.forEach=yo,Vn.forEachRight=vo,Vn.forIn=function(t,e){return null==t?t:mr(t,ss(e,3),Na)},Vn.forInRight=function(t,e){return null==t?t:yr(t,ss(e,3),Na)},Vn.forOwn=function(t,e){return t&&vr(t,ss(e,3))},Vn.forOwnRight=function(t,e){return t&&wr(t,ss(e,3))},Vn.get=Ta,Vn.gt=Uo,Vn.gte=jo,Vn.has=function(t,e){return null!=t&&fs(t,e,Tr)},Vn.hasIn=Sa,Vn.head=zs,Vn.identity=nu,Vn.includes=function(t,e,n,r){t=Wo(t)?t:Fa(t),n=n&&!r?da(n):0;var i=t.length;return n<0&&(n=mn(i+n,0)),oa(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Fe(t,e,n)>-1},Vn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:da(n);return i<0&&(i=mn(r+i,0)),Fe(t,e,i)},Vn.inRange=function(t,e,n){return e=fa(e),n===i?(n=e,e=0):n=fa(n),function(t,e,n){return t>=yn(e,n)&&t<mn(e,n)}(t=ga(t),e,n)},Vn.invoke=Da,Vn.isArguments=qo,Vn.isArray=$o,Vn.isArrayBuffer=zo,Vn.isArrayLike=Wo,Vn.isArrayLikeObject=Go,Vn.isBoolean=function(t){return!0===t||!1===t||ta(t)&&Er(t)==y},Vn.isBuffer=Ho,Vn.isDate=Ko,Vn.isElement=function(t){return ta(t)&&1===t.nodeType&&!ra(t)},Vn.isEmpty=function(t){if(null==t)return!0;if(Wo(t)&&($o(t)||"string"==typeof t||"function"==typeof t.splice||Ho(t)||ua(t)||qo(t)))return!t.length;var e=hs(t);if(e==A||e==I)return!t.size;if(bs(t))return!Or(t).length;for(var n in t)if(Mt.call(t,n))return!1;return!0},Vn.isEqual=function(t,e){return kr(t,e)},Vn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?kr(t,e,i,n):!!r},Vn.isError=Xo,Vn.isFinite=function(t){return"number"==typeof t&&Pe(t)},Vn.isFunction=Qo,Vn.isInteger=Yo,Vn.isLength=Jo,Vn.isMap=ea,Vn.isMatch=function(t,e){return t===e||Nr(t,e,as(e))},Vn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Nr(t,e,as(e),n)},Vn.isNaN=function(t){return na(t)&&t!=+t},Vn.isNative=function(t){if(ws(t))throw new _t("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Rr(t)},Vn.isNil=function(t){return null==t},Vn.isNull=function(t){return null===t},Vn.isNumber=na,Vn.isObject=Zo,Vn.isObjectLike=ta,Vn.isPlainObject=ra,Vn.isRegExp=ia,Vn.isSafeInteger=function(t){return Yo(t)&&t>=-9007199254740991&&t<=h},Vn.isSet=sa,Vn.isString=oa,Vn.isSymbol=aa,Vn.isTypedArray=ua,Vn.isUndefined=function(t){return t===i},Vn.isWeakMap=function(t){return ta(t)&&hs(t)==k},Vn.isWeakSet=function(t){return ta(t)&&"[object WeakSet]"==Er(t)},Vn.join=function(t,e){return null==t?"":ze.call(t,e)},Vn.kebabCase=$a,Vn.last=Ks,Vn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var s=r;return n!==i&&(s=(s=da(n))<0?mn(r+s,0):yn(s,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,s):Ve(t,je,s,!0)},Vn.lowerCase=za,Vn.lowerFirst=Wa,Vn.lt=ca,Vn.lte=la,Vn.max=function(t){return t&&t.length?dr(t,nu,Cr):i},Vn.maxBy=function(t,e){return t&&t.length?dr(t,ss(e,2),Cr):i},Vn.mean=function(t){return qe(t,nu)},Vn.meanBy=function(t,e){return qe(t,ss(e,2))},Vn.min=function(t){return t&&t.length?dr(t,nu,Lr):i},Vn.minBy=function(t,e){return t&&t.length?dr(t,ss(e,2),Lr):i},Vn.stubArray=pu,Vn.stubFalse=gu,Vn.stubObject=function(){return{}},Vn.stubString=function(){return""},Vn.stubTrue=function(){return!0},Vn.multiply=_u,Vn.nth=function(t,e){return t&&t.length?Ur(t,da(e)):i},Vn.noConflict=function(){return he._===this&&(he._=Vt),this},Vn.noop=au,Vn.now=To,Vn.pad=function(t,e,n){t=ya(t);var r=(e=da(e))?ln(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return ji(de(i),n)+t+ji(fe(i),n)},Vn.padEnd=function(t,e,n){t=ya(t);var r=(e=da(e))?ln(t):0;return e&&r<e?t+ji(e-r,n):t},Vn.padStart=function(t,e,n){t=ya(t);var r=(e=da(e))?ln(t):0;return e&&r<e?ji(e-r,n)+t:t},Vn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),wn(ya(t).replace(rt,""),e||0)},Vn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&ms(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=fa(t),e===i?(e=t,t=0):e=fa(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var s=bn();return yn(t+s*(e-t+ae("1e-"+((s+"").length-1))),e)}return Wr(t,e)},Vn.reduce=function(t,e,n){var r=$o(t)?Me:We,i=arguments.length<3;return r(t,ss(e,4),n,i,lr)},Vn.reduceRight=function(t,e,n){var r=$o(t)?Oe:We,i=arguments.length<3;return r(t,ss(e,4),n,i,hr)},Vn.repeat=function(t,e,n){return e=(n?ms(t,e,n):e===i)?1:da(e),Gr(ya(t),e)},Vn.replace=function(){var t=arguments,e=ya(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Vn.result=function(t,e,n){var r=-1,s=(e=mi(e,t)).length;for(s||(s=1,t=i);++r<s;){var o=null==t?i:t[Ls(e[r])];o===i&&(r=s,o=n),t=Qo(o)?o.call(t):o}return t},Vn.round=Au,Vn.runInContext=t,Vn.sample=function(t){return($o(t)?Xn:Kr)(t)},Vn.size=function(t){if(null==t)return 0;if(Wo(t))return oa(t)?ln(t):t.length;var e=hs(t);return e==A||e==I?t.size:Or(t).length},Vn.snakeCase=Ga,Vn.some=function(t,e,n){var r=$o(t)?Le:ei;return n&&ms(t,e,n)&&(e=i),r(t,ss(e,3))},Vn.sortedIndex=function(t,e){return ni(t,e)},Vn.sortedIndexBy=function(t,e,n){return ri(t,e,ss(n,2))},Vn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ni(t,e);if(r<n&&Fo(t[r],e))return r}return-1},Vn.sortedLastIndex=function(t,e){return ni(t,e,!0)},Vn.sortedLastIndexBy=function(t,e,n){return ri(t,e,ss(n,2),!0)},Vn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ni(t,e,!0)-1;if(Fo(t[n],e))return n}return-1},Vn.startCase=Ha,Vn.startsWith=function(t,e,n){return t=ya(t),n=null==n?0:sr(da(n),0,t.length),e=oi(e),t.slice(n,n+e.length)==e},Vn.subtract=Eu,Vn.sum=function(t){return t&&t.length?Ge(t,nu):0},Vn.sumBy=function(t,e){return t&&t.length?Ge(t,ss(e,2)):0},Vn.template=function(t,e,n){var r=Vn.templateSettings;n&&ms(t,e,n)&&(e=i),t=ya(t),e=ba({},e,r,Xi);var s,o,a=ba({},e.imports,r.imports,Xi),u=ka(a),c=Qe(a,u),l=0,h=e.interpolate||wt,f="__p += '",d=Tt((e.escape||wt).source+"|"+h.source+"|"+(h===Y?ht:wt).source+"|"+(e.evaluate||wt).source+"|$","g"),p="//# sourceURL="+(Mt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++re+"]")+"\n";t.replace(d,(function(e,n,r,i,a,u){return r||(r=i),f+=t.slice(l,u).replace(bt,nn),n&&(s=!0,f+="' +\n__e("+n+") +\n'"),a&&(o=!0,f+="';\n"+a+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e})),f+="';\n";var g=Mt.call(e,"variable")&&e.variable;if(g){if(ct.test(g))throw new _t("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(o?f.replace(q,""):f).replace($,"$1").replace(z,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m=Ya((function(){return At(u,p+"return "+f).apply(i,c)}));if(m.source=f,Xo(m))throw m;return m},Vn.times=function(t,e){if((t=da(t))<1||t>h)return[];var n=d,r=yn(t,d);e=ss(e),t-=d;for(var i=He(r,e);++n<t;)e(n);return i},Vn.toFinite=fa,Vn.toInteger=da,Vn.toLength=pa,Vn.toLower=function(t){return ya(t).toLowerCase()},Vn.toNumber=ga,Vn.toSafeInteger=function(t){return t?sr(da(t),-9007199254740991,h):0===t?t:0},Vn.toString=ya,Vn.toUpper=function(t){return ya(t).toUpperCase()},Vn.trim=function(t,e,n){if((t=ya(t))&&(n||e===i))return Ke(t);if(!t||!(e=oi(e)))return t;var r=hn(t),s=hn(e);return vi(r,Je(r,s),Ze(r,s)+1).join("")},Vn.trimEnd=function(t,e,n){if((t=ya(t))&&(n||e===i))return t.slice(0,fn(t)+1);if(!t||!(e=oi(e)))return t;var r=hn(t);return vi(r,0,Ze(r,hn(e))+1).join("")},Vn.trimStart=function(t,e,n){if((t=ya(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=oi(e)))return t;var r=hn(t);return vi(r,Je(r,hn(e))).join("")},Vn.truncate=function(t,e){var n=30,r="...";if(Zo(e)){var s="separator"in e?e.separator:s;n="length"in e?da(e.length):n,r="omission"in e?oi(e.omission):r}var o=(t=ya(t)).length;if(rn(t)){var a=hn(t);o=a.length}if(n>=o)return t;var u=n-ln(r);if(u<1)return r;var c=a?vi(a,0,u).join(""):t.slice(0,u);if(s===i)return c+r;if(a&&(u+=c.length-u),ia(s)){if(t.slice(u).search(s)){var l,h=c;for(s.global||(s=Tt(s.source,ya(ft.exec(s))+"g")),s.lastIndex=0;l=s.exec(h);)var f=l.index;c=c.slice(0,f===i?u:f)}}else if(t.indexOf(oi(s),u)!=u){var d=c.lastIndexOf(s);d>-1&&(c=c.slice(0,d))}return c+r},Vn.unescape=function(t){return(t=ya(t))&&H.test(t)?t.replace(W,dn):t},Vn.uniqueId=function(t){var e=++Ot;return ya(t)+e},Vn.upperCase=Ka,Vn.upperFirst=Xa,Vn.each=yo,Vn.eachRight=vo,Vn.first=zs,ou(Vn,(mu={},vr(Vn,(function(t,e){Mt.call(Vn.prototype,e)||(mu[e]=t)})),mu),{chain:!1}),Vn.VERSION="4.17.21",Te(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Vn[t].placeholder=Vn})),Te(["drop","take"],(function(t,e){qn.prototype[t]=function(n){n=n===i?1:mn(da(n),0);var r=this.__filtered__&&!e?new qn(this):this.clone();return r.__filtered__?r.__takeCount__=yn(n,r.__takeCount__):r.__views__.push({size:yn(n,d),type:t+(r.__dir__<0?"Right":"")}),r},qn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Te(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;qn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ss(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Te(["head","last"],(function(t,e){var n="take"+(e?"Right":"");qn.prototype[t]=function(){return this[n](1).value()[0]}})),Te(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");qn.prototype[t]=function(){return this.__filtered__?new qn(this):this[n](1)}})),qn.prototype.compact=function(){return this.filter(nu)},qn.prototype.find=function(t){return this.filter(t).head()},qn.prototype.findLast=function(t){return this.reverse().find(t)},qn.prototype.invokeMap=Hr((function(t,e){return"function"==typeof t?new qn(this):this.map((function(n){return xr(n,t,e)}))})),qn.prototype.reject=function(t){return this.filter(Oo(ss(t)))},qn.prototype.slice=function(t,e){t=da(t);var n=this;return n.__filtered__&&(t>0||e<0)?new qn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=da(e))<0?n.dropRight(-e):n.take(e-t)),n)},qn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},qn.prototype.toArray=function(){return this.take(d)},vr(qn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),s=Vn[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);s&&(Vn.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,u=e instanceof qn,c=a[0],l=u||$o(e),h=function(t){var e=s.apply(Vn,Re([t],a));return r&&f?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var f=this.__chain__,d=!!this.__actions__.length,p=o&&!f,g=u&&!d;if(!o&&l){e=g?e:new qn(this);var m=t.apply(e,a);return m.__actions__.push({func:ho,args:[h],thisArg:i}),new jn(m,f)}return p&&g?t.apply(this,a):(m=this.thru(h),p?r?m.value()[0]:m.value():m)})})),Te(["pop","push","shift","sort","splice","unshift"],(function(t){var e=xt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Vn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply($o(i)?i:[],t)}return this[n]((function(n){return e.apply($o(n)?n:[],t)}))}})),vr(qn.prototype,(function(t,e){var n=Vn[e];if(n){var r=n.name+"";Mt.call(Dn,r)||(Dn[r]=[]),Dn[r].push({name:e,func:n})}})),Dn[Bi(i,2).name]=[{name:"wrapper",func:i}],qn.prototype.clone=function(){var t=new qn(this.__wrapped__);return t.__actions__=Si(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Si(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Si(this.__views__),t},qn.prototype.reverse=function(){if(this.__filtered__){var t=new qn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},qn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=$o(t),r=e<0,i=n?t.length:0,s=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var s=n[r],o=s.size;switch(s.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=yn(e,t+o);break;case"takeRight":t=mn(t,e-o)}}return{start:t,end:e}}(0,i,this.__views__),o=s.start,a=s.end,u=a-o,c=r?a:o-1,l=this.__iteratees__,h=l.length,f=0,d=yn(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return hi(t,this.__actions__);var p=[];t:for(;u--&&f<d;){for(var g=-1,m=t[c+=e];++g<h;){var y=l[g],v=y.iteratee,w=y.type,b=v(m);if(2==w)m=b;else if(!b){if(1==w)continue t;break t}}p[f++]=m}return p},Vn.prototype.at=fo,Vn.prototype.chain=function(){return lo(this)},Vn.prototype.commit=function(){return new jn(this.value(),this.__chain__)},Vn.prototype.next=function(){this.__values__===i&&(this.__values__=ha(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},Vn.prototype.plant=function(t){for(var e,n=this;n instanceof Un;){var r=Bs(n);r.__index__=0,r.__values__=i,e?s.__wrapped__=r:e=r;var s=r;n=n.__wrapped__}return s.__wrapped__=t,e},Vn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof qn){var e=t;return this.__actions__.length&&(e=new qn(this)),(e=e.reverse()).__actions__.push({func:ho,args:[Js],thisArg:i}),new jn(e,this.__chain__)}return this.thru(Js)},Vn.prototype.toJSON=Vn.prototype.valueOf=Vn.prototype.value=function(){return hi(this.__wrapped__,this.__actions__)},Vn.prototype.first=Vn.prototype.head,Xt&&(Vn.prototype[Xt]=function(){return this}),Vn}();he._=pn,(r=function(){return pn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},72:t=>{"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var s={},o=[],a=0;a<t.length;a++){var u=t[a],c=r.base?u[0]+r.base:u[0],l=s[c]||0,h="".concat(c," ").concat(l);s[c]=l+1;var f=n(h),d={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==f)e[f].references++,e[f].updater(d);else{var p=i(d,r);r.byIndex=a,e.splice(a,0,{identifier:h,updater:p,references:1})}o.push(h)}return o}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var s=r(t=t||[],i=i||{});return function(t){t=t||[];for(var o=0;o<s.length;o++){var a=n(s[o]);e[a].references--}for(var u=r(t,i),c=0;c<s.length;c++){var l=n(s[c]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}s=u}}},659:t=>{"use strict";var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),n.nc=void 0,(()=>{"use strict";var t=n(72),e=n.n(t),r=n(825),i=n.n(r),s=n(659),o=n.n(s),a=n(56),u=n.n(a),c=n(540),l=n.n(c),h=n(113),f=n.n(h),d=n(420),p={};p.styleTagTransform=f(),p.setAttributes=u(),p.insert=o().bind(null,"head"),p.domAPI=i(),p.insertStyleElement=l(),e()(d.A,p),d.A&&d.A.locals&&d.A.locals;const g=(t,e)=>(e||document).querySelector(t),m=(t,e={})=>Object.assign(document.createElement(t),e),y=t=>{switch(t){case"T":return[[0,0,0],[1,1,1],[0,1,0]];case"O":return[[2,2],[2,2]];case"L":return[[0,3,0],[0,3,0],[0,3,3]];case"J":return[[0,4,0],[0,4,0],[4,4,0]];case"I":return[[0,5,0,0],[0,5,0,0],[0,5,0,0],[0,5,0,0]];case"S":return[[0,6,6],[6,6,0],[0,0,0]];case"Z":return[[7,7,0],[0,7,7],[0,0,0]];default:return[]}},v=(t,e)=>{for(let n=0;n<t.length;n+=1)for(let r=0;r<t[n].length;r+=1)0!==t[n][r]&&e(n,r)};var w=n(122),b={};b.styleTagTransform=f(),b.setAttributes=u(),b.insert=o().bind(null,"head"),b.domAPI=i(),b.insertStyleElement=l(),e()(w.A,b);const _=w.A&&w.A.locals?w.A.locals:void 0;var A=n(437),E={};E.styleTagTransform=f(),E.setAttributes=u(),E.insert=o().bind(null,"head"),E.domAPI=i(),E.insertStyleElement=l(),e()(A.A,E);const C=A.A&&A.A.locals?A.A.locals:void 0;var T={};function S(){return T}function I(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function x(t){I(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function D(t,e){I(2,arguments);var n=x(t),r=x(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function k(t,e){I(2,arguments);var n,r=x(t),i=x(e),s=D(r,i),o=Math.abs(function(t,e){I(2,arguments);var n=x(t),r=x(e);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}(r,i));if(o<1)n=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*o);var a=D(r,i)===-s;(function(t){I(1,arguments);var e=x(t);return function(t){I(1,arguments);var e=x(t);return e.setHours(23,59,59,999),e}(e).getTime()===function(t){I(1,arguments);var e=x(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}(e).getTime()})(x(t))&&1===o&&1===D(t,i)&&(a=!1),n=s*(o-Number(a))}return 0===n?0:n}var N={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},R="trunc";var M={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function O(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const L={date:O({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:O({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:O({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var P={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function B(t){return function(e,n){var r;if("formatting"===(null!=n&&n.context?String(n.context):"standalone")&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,s=null!=n&&n.width?String(n.width):i;r=t.formattingValues[s]||t.formattingValues[i]}else{var o=t.defaultWidth,a=null!=n&&n.width?String(n.width):t.defaultWidth;r=t.values[a]||t.values[o]}return r[t.argumentCallback?t.argumentCallback(e):e]}}const V={ordinalNumber:function(t,e){var n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:B({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:B({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:B({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:B({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:B({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function F(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;var o,a=s[0],u=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(u)?function(t,e){for(var n=0;n<t.length;n++)if(t[n].test(a))return n}(u):function(t,e){for(var n in t)if(t.hasOwnProperty(n)&&t[n].test(a))return n}(u);return o=t.valueCallback?t.valueCallback(c):c,{value:o=n.valueCallback?n.valueCallback(o):o,rest:e.slice(a.length)}}}var U,j={ordinalNumber:(U={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.match(U.matchPattern);if(!n)return null;var r=n[0],i=t.match(U.parsePattern);if(!i)return null;var s=U.valueCallback?U.valueCallback(i[0]):i[0];return{value:s=e.valueCallback?e.valueCallback(s):s,rest:t.slice(r.length)}}),era:F({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:F({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:F({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:F({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:F({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};const q={code:"en-US",formatDistance:function(t,e,n){var r,i=M[t];return r="string"==typeof i?i:1===e?i.one:i.other.replace("{{count}}",e.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:L,formatRelative:function(t,e,n,r){return P[t]},localize:V,match:j,options:{weekStartsOn:0,firstWeekContainsDate:1}};function $(t,e){if(null==t)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function z(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}var W=43200;function G(t,e,n){var r,i;I(2,arguments);var s=S(),o=null!==(r=null!==(i=null==n?void 0:n.locale)&&void 0!==i?i:s.locale)&&void 0!==r?r:q;if(!o.formatDistance)throw new RangeError("locale must contain formatDistance property");var a=D(t,e);if(isNaN(a))throw new RangeError("Invalid time value");var u,c,l=$($({},n),{addSuffix:Boolean(null==n?void 0:n.addSuffix),comparison:a});a>0?(u=x(e),c=x(t)):(u=x(t),c=x(e));var h,f=function(t,e,n){I(2,arguments);var r,i=function(t,e){return I(2,arguments),x(t).getTime()-x(e).getTime()}(t,e)/1e3;return((r=null==n?void 0:n.roundingMethod)?N[r]:N[R])(i)}(c,u),d=(z(c)-z(u))/1e3,p=Math.round((f-d)/60);if(p<2)return null!=n&&n.includeSeconds?f<5?o.formatDistance("lessThanXSeconds",5,l):f<10?o.formatDistance("lessThanXSeconds",10,l):f<20?o.formatDistance("lessThanXSeconds",20,l):f<40?o.formatDistance("halfAMinute",0,l):f<60?o.formatDistance("lessThanXMinutes",1,l):o.formatDistance("xMinutes",1,l):0===p?o.formatDistance("lessThanXMinutes",1,l):o.formatDistance("xMinutes",p,l);if(p<45)return o.formatDistance("xMinutes",p,l);if(p<90)return o.formatDistance("aboutXHours",1,l);if(p<1440){var g=Math.round(p/60);return o.formatDistance("aboutXHours",g,l)}if(p<2520)return o.formatDistance("xDays",1,l);if(p<W){var m=Math.round(p/1440);return o.formatDistance("xDays",m,l)}if(p<86400)return h=Math.round(p/W),o.formatDistance("aboutXMonths",h,l);if((h=k(c,u))<12){var y=Math.round(p/W);return o.formatDistance("xMonths",y,l)}var v=h%12,w=Math.floor(h/12);return v<3?o.formatDistance("aboutXYears",w,l):v<9?o.formatDistance("overXYears",w,l):o.formatDistance("almostXYears",w+1,l)}const H=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},K={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let e=0;e<t.length;e+=3){const i=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,u=a?t[e+2]:0,c=i>>2,l=(3&i)<<4|o>>4;let h=(15&o)<<2|u>>6,f=63&u;a||(f=64,s||(h=64)),r.push(n[c],n[l],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(H(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let e=0;e<t.length;){const i=n[t.charAt(e++)],s=e<t.length?n[t.charAt(e)]:0;++e;const o=e<t.length?n[t.charAt(e)]:64;++e;const a=e<t.length?n[t.charAt(e)]:64;if(++e,null==i||null==s||null==o||null==a)throw Error();const u=i<<2|s>>4;if(r.push(u),64!==o){const t=s<<4&240|o>>2;if(r.push(t),64!==a){const t=o<<6&192|a;r.push(t)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},X=function(t){return function(t){const e=H(t);return K.encodeByteArray(e,!0)}(t).replace(/\./g,"")};class Q{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function Y(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}class J extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,J.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Z.prototype.create)}}class Z{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,i=this.errors[t],s=i?function(t,e){return t.replace(tt,((t,n)=>{const r=e[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new J(r,o,n)}}const tt=/\{\$([^}]+)}/g;function et(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const n=t[i],s=e[i];if(nt(n)&&nt(s)){if(!et(n,s))return!1}else if(n!==s)return!1}for(const t of r)if(!n.includes(t))return!1;return!0}function nt(t){return null!==t&&"object"==typeof t}function rt(t){return t&&t._delegate?t._delegate:t}class it{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const st="[DEFAULT]";class ot{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new Q;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:st})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=st){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=st){return this.instances.has(t)}getOptions(t=st){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(r);return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&t(s,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===st?void 0:r),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var r;return n||null}normalizeInstanceIdentifier(t=st){return this.component?this.component.multipleInstances?t:st:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class at{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new ot(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const ut=[];var ct;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(ct||(ct={}));const lt={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},ht=ct.INFO,ft={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},dt=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=ft[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class pt{constructor(t){this.name=t,this._logLevel=ht,this._logHandler=dt,this._userLogHandler=null,ut.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ct))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?lt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...t),this._logHandler(this,ct.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...t),this._logHandler(this,ct.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...t),this._logHandler(this,ct.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...t),this._logHandler(this,ct.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...t),this._logHandler(this,ct.ERROR,...t)}}const gt=(t,e)=>e.some((e=>t instanceof e));let mt,yt;const vt=new WeakMap,wt=new WeakMap,bt=new WeakMap,_t=new WeakMap,At=new WeakMap;let Et={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return wt.get(t);if("objectStoreNames"===e)return t.objectStoreNames||bt.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tt(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Ct(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(yt||(yt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(St(this),t),Tt(vt.get(this))}:function(...t){return Tt(e.apply(St(this),t))}:function(t,...n){const r=e.call(St(this),t,...n);return bt.set(r,t.sort?t.sort():[t]),Tt(r)}:(t instanceof IDBTransaction&&function(t){if(wt.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{e(),r()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)}));wt.set(t,e)}(t),gt(t,mt||(mt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,Et):t);var e}function Tt(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{e(Tt(t.result)),r()},s=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&vt.set(e,t)})).catch((()=>{})),At.set(e,t),e}(t);if(_t.has(t))return _t.get(t);const e=Ct(t);return e!==t&&(_t.set(t,e),At.set(e,t)),e}const St=t=>At.get(t),It=["get","getKey","getAll","getAllKeys","count"],xt=["put","add","delete","clear"],Dt=new Map;function kt(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Dt.get(e))return Dt.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=xt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!It.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),i&&s.done]))[0]};return Dt.set(e,s),s}var Nt;Nt=Et,Et={...Nt,get:(t,e,n)=>kt(t,e)||Nt.get(t,e,n),has:(t,e)=>!!kt(t,e)||Nt.has(t,e)};class Rt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const Mt="@firebase/app",Ot="0.7.30",Lt=new pt("@firebase/app"),Pt="[DEFAULT]",Bt={[Mt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Vt=new Map,Ft=new Map;function Ut(t,e){try{t.container.addComponent(e)}catch(n){Lt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function jt(t){const e=t.name;if(Ft.has(e))return Lt.debug(`There were multiple attempts to register component ${e}.`),!1;Ft.set(e,t);for(const e of Vt.values())Ut(e,t);return!0}const qt=new Z("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class $t{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new it("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw qt.create("app-deleted",{appName:this._name})}}function zt(t,e,n){var r;let i=null!==(r=Bt[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${i}" with version "${e}":`];return s&&t.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Lt.warn(t.join(" "))}jt(new it(`${i}-version`,(()=>({library:i,version:e})),"VERSION"))}const Wt="firebase-heartbeat-database",Gt=1,Ht="firebase-heartbeat-store";let Kt=null;function Xt(){return Kt||(Kt=function(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Tt(o);return r&&o.addEventListener("upgradeneeded",(t=>{r(Tt(o.result),t.oldVersion,t.newVersion,Tt(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),a.then((t=>{s&&t.addEventListener("close",(()=>s())),i&&t.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),a}(Wt,Gt,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Ht)}}).catch((t=>{throw qt.create("idb-open",{originalErrorMessage:t.message})}))),Kt}async function Qt(t,e){var n;try{const n=(await Xt()).transaction(Ht,"readwrite"),r=n.objectStore(Ht);return await r.put(e,Yt(t)),n.done}catch(t){if(t instanceof J)Lt.warn(t.message);else{const e=qt.create("idb-set",{originalErrorMessage:null===(n=t)||void 0===n?void 0:n.message});Lt.warn(e.message)}}}function Yt(t){return`${t.name}!${t.options.appId}`}class Jt{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new te(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),e=Zt();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==e&&!this._heartbeatsCache.heartbeats.some((t=>t.date===e)))return this._heartbeatsCache.heartbeats.push({date:e,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=Zt(),{heartbeatsToSend:e,unsentEntries:n}=function(t,e=1024){const n=[];let r=t.slice();for(const i of t){const t=n.find((t=>t.agent===i.agent));if(t){if(t.dates.push(i.date),ee(n)>e){t.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ee(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=X(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Zt(){return(new Date).toISOString().substring(0,10)}class te{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!("object"!=typeof indexedDB)&&new Promise(((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(t){var e;try{return(await Xt()).transaction(Ht).objectStore(Ht).get(Yt(t))}catch(t){if(t instanceof J)Lt.warn(t.message);else{const n=qt.create("idb-get",{originalErrorMessage:null===(e=t)||void 0===e?void 0:e.message});Lt.warn(n.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Qt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Qt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function ee(t){return X(JSON.stringify({version:2,heartbeats:t})).length}jt(new it("platform-logger",(t=>new Rt(t)),"PRIVATE")),jt(new it("heartbeat",(t=>new Jt(t)),"PRIVATE")),zt(Mt,Ot,""),zt(Mt,Ot,"esm2017"),zt("fire-js",""),zt("firebase","9.9.2","app");var ne,re="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},ie={},se=se||{},oe=re||self;function ae(){}function ue(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ce(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var le="closure_uid_"+(1e9*Math.random()>>>0),he=0;function fe(t,e,n){return t.call.apply(t.bind,arguments)}function de(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function pe(t,e,n){return(pe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fe:de).apply(null,arguments)}function ge(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function me(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function ye(){this.s=this.s,this.o=this.o}var ve={};ye.prototype.s=!1,ye.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,le)&&t[le]||(t[le]=++he)}(this);delete ve[t]}},ye.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const we=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},be=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,i="string"==typeof t?t.split(""):t;for(let s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function _e(t){return Array.prototype.concat.apply([],arguments)}function Ae(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ee(t){return/^[\s\xa0]*$/.test(t)}var Ce,Te=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Se(t,e){return-1!=t.indexOf(e)}function Ie(t,e){return t<e?-1:t>e?1:0}t:{var xe=oe.navigator;if(xe){var De=xe.userAgent;if(De){Ce=De;break t}}Ce=""}function ke(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Ne(t){const e={};for(const n in t)e[n]=t[n];return e}var Re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Me(t,e){let n,r;for(let e=1;e<arguments.length;e++){for(n in r=arguments[e],r)t[n]=r[n];for(let e=0;e<Re.length;e++)n=Re[e],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Oe(t){return Oe[" "](t),t}Oe[" "]=ae;var Le,Pe,Be=Se(Ce,"Opera"),Ve=Se(Ce,"Trident")||Se(Ce,"MSIE"),Fe=Se(Ce,"Edge"),Ue=Fe||Ve,je=Se(Ce,"Gecko")&&!(Se(Ce.toLowerCase(),"webkit")&&!Se(Ce,"Edge"))&&!(Se(Ce,"Trident")||Se(Ce,"MSIE"))&&!Se(Ce,"Edge"),qe=Se(Ce.toLowerCase(),"webkit")&&!Se(Ce,"Edge");function $e(){var t=oe.document;return t?t.documentMode:void 0}t:{var ze="",We=(Pe=Ce,je?/rv:([^\);]+)(\)|;)/.exec(Pe):Fe?/Edge\/([\d\.]+)/.exec(Pe):Ve?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Pe):qe?/WebKit\/(\S+)/.exec(Pe):Be?/(?:Version)[ \/]?(\S+)/.exec(Pe):void 0);if(We&&(ze=We?We[1]:""),Ve){var Ge=$e();if(null!=Ge&&Ge>parseFloat(ze)){Le=String(Ge);break t}}Le=ze}var He,Ke={};function Xe(){return t=Ke,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let t=0;const e=Te(String(Le)).split("."),n=Te("9").split("."),r=Math.max(e.length,n.length);for(let o=0;0==t&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;t=Ie(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||Ie(0==i[2].length,0==s[2].length)||Ie(i[2],s[2]),i=i[3],s=s[3]}while(0==t)}return 0<=t}();var t}oe.document&&Ve?He=$e()||parseInt(Le,10)||void 0:He=void 0;var Qe=He,Ye=function(){if(!oe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{oe.addEventListener("test",ae,e),oe.removeEventListener("test",ae,e)}catch(t){}return t}();function Je(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Ze(t,e){if(Je.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(je){t:{try{Oe(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:tn[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ze.Z.h.call(this)}}Je.prototype.h=function(){this.defaultPrevented=!0},me(Ze,Je);var tn={2:"touch",3:"pen",4:"mouse"};Ze.prototype.h=function(){Ze.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var en="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++nn,this.ca=this.fa=!1}function sn(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function on(t){this.src=t,this.g={},this.h=0}function an(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=we(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(sn(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function un(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}on.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=un(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new rn(e,this.src,s,!!r,i)).fa=n,t.push(e)),e};var cn="closure_lm_"+(1e6*Math.random()|0),ln={};function hn(t,e,n,r,i){if(r&&r.once)return dn(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)hn(t,e[s],n,r,i);return null}return n=bn(n),t&&t[en]?t.N(e,n,ce(r)?!!r.capture:!!r,i):fn(t,e,n,!1,r,i)}function fn(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=ce(i)?!!i.capture:!!i,a=vn(t);if(a||(t[cn]=a=new on(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){var t=yn;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ye||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(mn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function dn(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)dn(t,e[s],n,r,i);return null}return n=bn(n),t&&t[en]?t.O(e,n,ce(r)?!!r.capture:!!r,i):fn(t,e,n,!0,r,i)}function pn(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)pn(t,e[s],n,r,i);else r=ce(r)?!!r.capture:!!r,n=bn(n),t&&t[en]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=un(s=t.g[e],n,r,i))&&(sn(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=vn(t))&&(e=t.g[e.toString()],t=-1,e&&(t=un(e,n,r,i)),(n=-1<t?e[t]:null)&&gn(n))}function gn(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[en])an(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(mn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=vn(e))?(an(n,t),0==n.h&&(n.src=null,e[cn]=null)):sn(t)}}}function mn(t){return t in ln?ln[t]:ln[t]="on"+t}function yn(t,e){if(t.ca)t=!0;else{e=new Ze(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&gn(t),t=n.call(r,e)}return t}function vn(t){return(t=t[cn])instanceof on?t:null}var wn="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(t){return"function"==typeof t?t:(t[wn]||(t[wn]=function(e){return t.handleEvent(e)}),t[wn])}function _n(){ye.call(this),this.i=new on(this),this.P=this,this.I=null}function An(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Je(e,t);else if(e instanceof Je)e.target=e.target||t;else{var i=e;Me(e=new Je(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=En(o,r,!0,e)&&i}if(i=En(o=e.g=t,r,!0,e)&&i,i=En(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=En(o=e.g=n[s],r,!1,e)&&i}function En(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&an(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}me(_n,ye),_n.prototype[en]=!0,_n.prototype.removeEventListener=function(t,e,n,r){pn(this,t,e,n,r)},_n.prototype.M=function(){if(_n.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)sn(n[r]);delete e.g[t],e.h--}}this.I=null},_n.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},_n.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Cn=oe.JSON.stringify;function Tn(){var t=Rn;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Sn,In=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new xn),(t=>t.reset()));class xn{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Dn(t){oe.setTimeout((()=>{throw t}),0)}function kn(t,e){Sn||function(){var t=oe.Promise.resolve(void 0);Sn=function(){t.then(Mn)}}(),Nn||(Sn(),Nn=!0),Rn.add(t,e)}var Nn=!1,Rn=new class{constructor(){this.h=this.g=null}add(t,e){const n=In.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}};function Mn(){for(var t;t=Tn();){try{t.h.call(t.g)}catch(t){Dn(t)}var e=In;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Nn=!1}function On(t,e){_n.call(this),this.h=t||1,this.g=e||oe,this.j=pe(this.kb,this),this.l=Date.now()}function Ln(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Pn(t,e,n){if("function"==typeof t)n&&(t=pe(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=pe(t.handleEvent,t)}return 2147483647<Number(e)?-1:oe.setTimeout(t,e||0)}function Bn(t){t.g=Pn((()=>{t.g=null,t.i&&(t.i=!1,Bn(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}me(On,_n),(ne=On.prototype).da=!1,ne.S=null,ne.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),An(this,"tick"),this.da&&(Ln(this),this.start()))}},ne.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ne.M=function(){On.Z.M.call(this),Ln(this),delete this.g};class Vn extends ye{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Bn(this)}M(){super.M(),this.g&&(oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fn(t){ye.call(this),this.h=t,this.g={}}me(Fn,ye);var Un=[];function jn(t,e,n,r){Array.isArray(n)||(n&&(Un[0]=n.toString()),n=Un);for(var i=0;i<n.length;i++){var s=hn(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function qn(t){ke(t.g,(function(t,e){this.g.hasOwnProperty(e)&&gn(t)}),t),t.g={}}function $n(){this.g=!0}function zn(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Cn(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Fn.prototype.M=function(){Fn.Z.M.call(this),qn(this)},Fn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$n.prototype.Aa=function(){this.g=!1},$n.prototype.info=function(){};var Wn={},Gn=null;function Hn(){return Gn=Gn||new _n}function Kn(t){Je.call(this,Wn.Ma,t)}function Xn(t){const e=Hn();An(e,new Kn(e,t))}function Qn(t,e){Je.call(this,Wn.STAT_EVENT,t),this.stat=e}function Yn(t){const e=Hn();An(e,new Qn(e,t))}function Jn(t,e){Je.call(this,Wn.Na,t),this.size=e}function Zn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return oe.setTimeout((function(){t()}),e)}Wn.Ma="serverreachability",me(Kn,Je),Wn.STAT_EVENT="statevent",me(Qn,Je),Wn.Na="timingevent",me(Jn,Je);var tr={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},er={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function nr(){}function rr(t){return t.h||(t.h=t.i())}function ir(){}nr.prototype.h=null;var sr,or={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ar(){Je.call(this,"d")}function ur(){Je.call(this,"c")}function cr(){}function lr(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Fn(this),this.P=fr,t=Ue?125:void 0,this.W=new On(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new hr}function hr(){this.i=null,this.g="",this.h=!1}me(ar,Je),me(ur,Je),me(cr,nr),cr.prototype.g=function(){return new XMLHttpRequest},cr.prototype.i=function(){return{}},sr=new cr;var fr=45e3,dr={},pr={};function gr(t,e,n){t.K=1,t.v=Vr(Rr(e)),t.s=n,t.U=!0,mr(t,null)}function mr(t,e){t.F=Date.now(),br(t),t.A=Rr(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Yr(n.h,"t",r),t.C=0,n=t.l.H,t.h=new hr,t.g=Ji(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Vn(pe(t.Ia,t,t.g),t.O)),jn(t.V,t.g,"readystatechange",t.gb),e=t.H?Ne(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Xn(1),function(t,e,n,r,i,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function yr(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function vr(t,e,n){let r,i=!0;for(;!t.I&&t.C<n.length;){if(r=wr(t,n),r==pr){4==e&&(t.o=4,Yn(14),i=!1),zn(t.j,t.m,null,"[Incomplete Response]");break}if(r==dr){t.o=4,Yn(15),zn(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}zn(t.j,t.m,r,null),Tr(t,r)}yr(t)&&r!=pr&&r!=dr&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Yn(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),zi(e),e.L=!0,Yn(11))):(zn(t.j,t.m,n,"[Invalid Chunked Response]"),Cr(t),Er(t))}function wr(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?pr:(n=Number(e.substring(n,r)),isNaN(n)?dr:(r+=1)+n>e.length?pr:(e=e.substr(r,n),t.C=r+n,e))}function br(t){t.Y=Date.now()+t.P,_r(t,t.P)}function _r(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Zn(pe(t.eb,t),e)}function Ar(t){t.B&&(oe.clearTimeout(t.B),t.B=null)}function Er(t){0==t.l.G||t.I||Hi(t.l,t)}function Cr(t){Ar(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Ln(t.W),qn(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Tr(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||ii(n.i,t)))if(n.I=t.N,!t.J&&ii(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Gi(n),Li(n)}$i(n),Yn(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Zn(pe(n.ab,n),6e3));if(1>=ri(n.i)&&n.ka){try{n.ka()}catch(t){}n.ka=void 0}}else Xi(n,11)}else if((t.J||n.g==t)&&Gi(n),!Ee(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.U=c[0],c=c[1],2==n.G)if("c"==c[0]){n.J=c[1],n.la=c[2];const e=c[3];null!=e&&(n.ma=e,n.h.info("VER="+n.ma));const i=c[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const l=c[5];null!=l&&"number"==typeof l&&0<l&&(r=1.5*l,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=r.i;!s.g&&(Se(t,"spdy")||Se(t,"quic")||Se(t,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(si(s,s.h),s.h=null))}if(r.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(r.sa=t,Br(r.F,r.D,t))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=t;if((r=n).oa=Yi(r,r.H?r.la:null,r.W),o.J){oi(r.i,o);var a=o,u=r.K;u&&a.setTimeout(u),a.B&&(Ar(a),br(a)),r.g=o}else qi(r);0<n.l.length&&Vi(n)}else"stop"!=c[0]&&"close"!=c[0]||Xi(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Xi(n,7):Oi(n):"noop"!=c[0]&&n.j&&n.j.wa(c),n.A=0)}Xn(4)}catch(t){}}function Sr(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ue(t)||"string"==typeof t)be(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(ue(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(ue(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function Ir(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ir)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function xr(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Dr(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Dr(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Dr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ne=lr.prototype).setTimeout=function(t){this.P=t},ne.gb=function(t){t=t.target;const e=this.L;e&&3==Di(t)?e.l():this.Ia(t)},ne.Ia=function(t){try{if(t==this.g)t:{const l=Di(this.g);var e=this.g.Da();const h=this.g.ba();if(!(3>l)&&(3!=l||Ue||this.g&&(this.h.h||this.g.ga()||ki(this.g)))){this.I||4!=l||7==e||Xn(8==e||0>=h?3:2),Ar(this);var n=this.g.ba();this.N=n;e:if(yr(this)){var r=ki(this.g);t="";var i=r.length,s=4==Di(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Cr(this),Er(this);var o="";break e}this.h.i=new oe.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(t,e,n,r,i,s,o){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.X,l,n),this.i){if(this.$&&!this.J){e:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ee(a)){var c=a;break e}}c=null}if(!(n=c)){this.i=!1,this.o=3,Yn(12),Cr(this),Er(this);break t}zn(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Tr(this,n)}this.U?(vr(this,l,o),Ue&&this.i&&3==l&&(jn(this.V,this.W,"tick",this.fb),this.W.start())):(zn(this.j,this.m,o,null),Tr(this,o)),4==l&&Cr(this),this.i&&!this.I&&(4==l?Hi(this.l,this):(this.i=!1,br(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Yn(12)):(this.o=0,Yn(13)),Cr(this),Er(this)}}}catch(t){}},ne.fb=function(){if(this.g){var t=Di(this.g),e=this.g.ga();this.C<e.length&&(Ar(this),vr(this,t,e),this.i&&4!=t&&br(this))}},ne.cancel=function(){this.I=!0,Cr(this)},ne.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Xn(3),Yn(17)),Cr(this),this.o=2,Er(this)):_r(this,this.Y-t)},(ne=Ir.prototype).R=function(){xr(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},ne.T=function(){return xr(this),this.g.concat()},ne.get=function(t,e){return Dr(this.h,t)?this.h[t]:e},ne.set=function(t,e){Dr(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},ne.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var kr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Nr(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Nr){this.g=void 0!==e?e:t.g,Mr(this,t.j),this.s=t.s,Or(this,t.i),Lr(this,t.m),this.l=t.l,e=t.h;var n=new Hr;n.i=e.i,e.g&&(n.g=new Ir(e.g),n.h=e.h),Pr(this,n),this.o=t.o}else t&&(n=String(t).match(kr))?(this.g=!!e,Mr(this,n[1]||"",!0),this.s=Fr(n[2]||""),Or(this,n[3]||"",!0),Lr(this,n[4]),this.l=Fr(n[5]||"",!0),Pr(this,n[6]||"",!0),this.o=Fr(n[7]||"")):(this.g=!!e,this.h=new Hr(null,this.g))}function Rr(t){return new Nr(t)}function Mr(t,e,n){t.j=n?Fr(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Or(t,e,n){t.i=n?Fr(e,!0):e}function Lr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Pr(t,e,n){e instanceof Hr?(t.h=e,function(t,e){e&&!t.j&&(Kr(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Xr(this,e),Yr(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=Ur(e,Wr)),t.h=new Hr(e,t.g))}function Br(t,e,n){t.h.set(e,n)}function Vr(t){return Br(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Fr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ur(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,jr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function jr(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Nr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ur(e,qr,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Ur(e,qr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ur(n,"/"==n.charAt(0)?zr:$r,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ur(n,Gr)),t.join("")};var qr=/[#\/\?@]/g,$r=/[#\?:]/g,zr=/[#\?]/g,Wr=/[#\?@]/g,Gr=/#/g;function Hr(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Kr(t){t.g||(t.g=new Ir,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xr(t,e){Kr(t),e=Jr(t,e),Dr(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Dr((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&xr(t)))}function Qr(t,e){return Kr(t),e=Jr(t,e),Dr(t.g.h,e)}function Yr(t,e,n){Xr(t,e),0<n.length&&(t.i=null,t.g.set(Jr(t,e),Ae(n)),t.h+=n.length)}function Jr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(ne=Hr.prototype).add=function(t,e){Kr(this),this.i=null,t=Jr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},ne.forEach=function(t,e){Kr(this),this.g.forEach((function(n,r){be(n,(function(n){t.call(e,n,r,this)}),this)}),this)},ne.T=function(){Kr(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},ne.R=function(t){Kr(this);var e=[];if("string"==typeof t)Qr(this,t)&&(e=_e(e,this.g.get(Jr(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=_e(e,t[n])}return e},ne.set=function(t,e){return Kr(this),this.i=null,Qr(this,t=Jr(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},ne.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},ne.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};var Zr=class{constructor(t,e){this.h=t,this.g=e}};function ti(t){this.l=t||ei,t=oe.PerformanceNavigationTiming?0<(t=oe.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(oe.g&&oe.g.Ea&&oe.g.Ea()&&oe.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ei=10;function ni(t){return!!t.h||!!t.g&&t.g.size>=t.j}function ri(t){return t.h?1:t.g?t.g.size:0}function ii(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function si(t,e){t.g?t.g.add(e):t.h=e}function oi(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function ai(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return Ae(t.i)}function ui(){}function ci(){this.g=new ui}function li(t,e,n){const r=n||"";try{Sr(t,(function(t,n){let i=t;ce(t)&&(i=Cn(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function hi(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function fi(t){this.l=t.$b||null,this.j=t.ib||!1}function di(t,e){_n.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=pi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ti.prototype.cancel=function(){if(this.i=ai(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},ui.prototype.stringify=function(t){return oe.JSON.stringify(t,void 0)},ui.prototype.parse=function(t){return oe.JSON.parse(t,void 0)},me(fi,nr),fi.prototype.g=function(){return new di(this.l,this.j)},fi.prototype.i=function(t){return function(){return t}}({}),me(di,_n);var pi=0;function gi(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function mi(t){t.readyState=4,t.l=null,t.j=null,t.A=null,yi(t)}function yi(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(ne=di.prototype).open=function(t,e){if(this.readyState!=pi)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,yi(this)},ne.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||oe).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ne.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,mi(this)),this.readyState=pi},ne.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,yi(this)),this.g&&(this.readyState=3,yi(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==oe.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gi(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},ne.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?mi(this):yi(this),3==this.readyState&&gi(this)}},ne.Ua=function(t){this.g&&(this.response=this.responseText=t,mi(this))},ne.Ta=function(t){this.g&&(this.response=t,mi(this))},ne.ha=function(){this.g&&mi(this)},ne.setRequestHeader=function(t,e){this.v.append(t,e)},ne.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},ne.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(di.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var vi=oe.JSON.parse;function wi(t){_n.call(this),this.headers=new Ir,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=bi,this.K=this.L=!1}me(wi,_n);var bi="",_i=/^https?$/i,Ai=["POST","PUT"];function Ei(t){return"content-type"==t.toLowerCase()}function Ci(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ti(t),Ii(t)}function Ti(t){t.D||(t.D=!0,An(t,"complete"),An(t,"error"))}function Si(t){if(t.h&&void 0!==se&&(!t.C[1]||4!=Di(t)||2!=t.ba()))if(t.v&&4==Di(t))Pn(t.Fa,0,t);else if(An(t,"readystatechange"),4==Di(t)){t.h=!1;try{const a=t.ba();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var r;if(r=0===a){var i=String(t.H).match(kr)[1]||null;if(!i&&oe.self&&oe.self.location){var s=oe.self.location.protocol;i=s.substr(0,s.length-1)}r=!_i.test(i?i.toLowerCase():"")}n=r}if(n)An(t,"complete"),An(t,"success");else{t.m=6;try{var o=2<Di(t)?t.g.statusText:""}catch(t){o=""}t.j=o+" ["+t.ba()+"]",Ti(t)}}finally{Ii(t)}}}function Ii(t,e){if(t.g){xi(t);const n=t.g,r=t.C[0]?ae:null;t.g=null,t.C=null,e||An(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function xi(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(oe.clearTimeout(t.A),t.A=null)}function Di(t){return t.g?t.g.readyState:0}function ki(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case bi:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ni(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){let e="";return ke(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Br(t,e,n))}function Ri(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Mi(t){this.za=0,this.l=[],this.h=new $n,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ri("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ri("baseRetryDelayMs",5e3,t),this.$a=Ri("retryDelaySeedMs",1e4,t),this.Ya=Ri("forwardChannelMaxRetries",2,t),this.ra=Ri("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new ti(t&&t.concurrentRequestLimit),this.Ca=new ci,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Oi(t){if(Pi(t),3==t.G){var e=t.V++,n=Rr(t.F);Br(n,"SID",t.J),Br(n,"RID",e),Br(n,"TYPE","terminate"),Ui(t,n),(e=new lr(t,t.h,e,void 0)).K=2,e.v=Vr(Rr(n)),n=!1,oe.navigator&&oe.navigator.sendBeacon&&(n=oe.navigator.sendBeacon(e.v.toString(),"")),!n&&oe.Image&&((new Image).src=e.v,n=!0),n||(e.g=Ji(e.l,null),e.g.ea(e.v)),e.F=Date.now(),br(e)}Qi(t)}function Li(t){t.g&&(zi(t),t.g.cancel(),t.g=null)}function Pi(t){Li(t),t.u&&(oe.clearTimeout(t.u),t.u=null),Gi(t),t.i.cancel(),t.m&&("number"==typeof t.m&&oe.clearTimeout(t.m),t.m=null)}function Bi(t,e){t.l.push(new Zr(t.Za++,e)),3==t.G&&Vi(t)}function Vi(t){ni(t.i)||t.m||(t.m=!0,kn(t.Ha,t),t.C=0)}function Fi(t,e){var n;n=e?e.m:t.V++;const r=Rr(t.F);Br(r,"SID",t.J),Br(r,"RID",n),Br(r,"AID",t.U),Ui(t,r),t.o&&t.s&&Ni(r,t.o,t.s),n=new lr(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=ji(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),si(t.i,n),gr(n,r,e)}function Ui(t,e){t.j&&Sr({},(function(t,n){Br(e,n,t)}))}function ji(t,e,n){n=Math.min(t.l.length,n);var r=t.j?pe(t.j.Oa,t.j,t):null;t:{var i=t.l;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=i[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=e,0>n)e=Math.max(0,i[o].h-100),s=!1;else try{li(a,t,"req"+n+"_")}catch(t){r&&r(a)}}if(s){r=t.join("&");break t}}}return t=t.l.splice(0,n),e.D=t,r}function qi(t){t.g||t.u||(t.Y=1,kn(t.Ga,t),t.A=0)}function $i(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Zn(pe(t.Ga,t),Ki(t,t.A)),t.A++,0))}function zi(t){null!=t.B&&(oe.clearTimeout(t.B),t.B=null)}function Wi(t){t.g=new lr(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Rr(t.oa);Br(e,"RID","rpc"),Br(e,"SID",t.J),Br(e,"CI",t.N?"0":"1"),Br(e,"AID",t.U),Ui(t,e),Br(e,"TYPE","xmlhttp"),t.o&&t.s&&Ni(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Vr(Rr(e)),n.s=null,n.U=!0,mr(n,t)}function Gi(t){null!=t.v&&(oe.clearTimeout(t.v),t.v=null)}function Hi(t,e){var n=null;if(t.g==e){Gi(t),zi(t),t.g=null;var r=2}else{if(!ii(t.i,e))return;n=e.D,oi(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;An(r=Hn(),new Jn(r,n,e,i)),Vi(t)}else qi(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(ri(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Zn(pe(t.Ha,t,e),Ki(t,t.C)),t.C++,0)))}(t,e)||2==r&&$i(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Xi(t,5);break;case 4:Xi(t,10);break;case 3:Xi(t,6);break;default:Xi(t,2)}}function Ki(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Xi(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=pe(t.jb,t);n||(n=new Nr("//www.google.com/images/cleardot.gif"),oe.location&&"http"==oe.location.protocol||Mr(n,"https"),Vr(n)),function(t,e){const n=new $n;if(oe.Image){const r=new Image;r.onload=ge(hi,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ge(hi,n,r,"TestLoadImage: error",!1,e),r.onabort=ge(hi,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ge(hi,n,r,"TestLoadImage: timeout",!1,e),oe.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Yn(2);t.G=0,t.j&&t.j.va(e),Qi(t),Pi(t)}function Qi(t){t.G=0,t.I=-1,t.j&&(0==ai(t.i).length&&0==t.l.length||(t.i.i.length=0,Ae(t.l),t.l.length=0),t.j.ua())}function Yi(t,e,n){let r=function(t){return t instanceof Nr?Rr(t):new Nr(t,void 0)}(n);if(""!=r.i)e&&Or(r,e+"."+r.i),Lr(r,r.m);else{const t=oe.location;r=function(t,e,n,r){var i=new Nr(null,void 0);return t&&Mr(i,t),e&&Or(i,e),n&&Lr(i,n),r&&(i.l=r),i}(t.protocol,e?e+"."+t.hostname:t.hostname,+t.port,n)}return t.aa&&ke(t.aa,(function(t,e){Br(r,e,t)})),e=t.D,n=t.sa,e&&n&&Br(r,e,n),Br(r,"VER",t.ma),Ui(t,r),r}function Ji(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new wi(new fi({ib:!0})):new wi(t.qa)).L=t.H,e}function Zi(){}function ts(){if(Ve&&!(10<=Number(Qe)))throw Error("Environmental error: no available transport.")}function es(t,e){_n.call(this),this.g=new Mi(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Ee(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ee(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new is(this)}function ns(t){ar.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function rs(){ur.call(this),this.status=1}function is(t){this.g=t}(ne=wi.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():sr.g(),this.C=this.u?rr(this.u):rr(sr),this.g.onreadystatechange=pe(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void Ci(this,t)}t=n||"";const i=new Ir(this.headers);r&&Sr(r,(function(t,e){i.set(e,t)})),r=function(t){t:{var e=Ei;const n=t.length,r="string"==typeof t?t.split(""):t;for(let i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=oe.FormData&&t instanceof oe.FormData,!(0<=we(Ai,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{xi(this),0<this.B&&((this.K=function(t){return Ve&&Xe()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=pe(this.pa,this)):this.A=Pn(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Ci(this,t)}},ne.pa=function(){void 0!==se&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,An(this,"timeout"),this.abort(8))},ne.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,An(this,"complete"),An(this,"abort"),Ii(this))},ne.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ii(this,!0)),wi.Z.M.call(this)},ne.Fa=function(){this.s||(this.F||this.v||this.l?Si(this):this.cb())},ne.cb=function(){Si(this)},ne.ba=function(){try{return 2<Di(this)?this.g.status:-1}catch(t){return-1}},ne.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},ne.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),vi(e)}},ne.Da=function(){return this.m},ne.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ne=Mi.prototype).ma=8,ne.G=1,ne.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},ne.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const i=new lr(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=Ne(s),Me(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)t:{for(var e=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break t}if(4096===e||n===this.l.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=ji(this,i,e),Br(n=Rr(this.F),"RID",t),Br(n,"CVER",22),this.D&&Br(n,"X-HTTP-Session-Id",this.D),Ui(this,n),this.o&&s&&Ni(n,this.o,s),si(this.i,i),this.Ra&&Br(n,"TYPE","init"),this.ja?(Br(n,"$req",e),Br(n,"SID","null"),i.$=!0,gr(i,n,null)):gr(i,n,e),this.G=2}}else 3==this.G&&(t?Fi(this,t):0==this.l.length||ni(this.i)||Fi(this))},ne.Ga=function(){if(this.u=null,Wi(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Zn(pe(this.bb,this),t)}},ne.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Yn(10),Li(this),Wi(this))},ne.ab=function(){null!=this.v&&(this.v=null,Li(this),$i(this),Yn(19))},ne.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Yn(2)):(this.h.info("Failed to ping google.com"),Yn(1))},(ne=Zi.prototype).xa=function(){},ne.wa=function(){},ne.va=function(){},ne.ua=function(){},ne.Oa=function(){},ts.prototype.g=function(t,e){return new es(t,e)},me(es,_n),es.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),kn(pe(t.hb,t,e))),Yn(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Yi(t,null,t.W),Vi(t)},es.prototype.close=function(){Oi(this.g)},es.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Bi(this.g,e)}else this.v?((e={}).__data__=Cn(t),Bi(this.g,e)):Bi(this.g,t)},es.prototype.M=function(){this.g.j=null,delete this.j,Oi(this.g),delete this.g,es.Z.M.call(this)},me(ns,ar),me(rs,ur),me(is,Zi),is.prototype.xa=function(){An(this.g,"a")},is.prototype.wa=function(t){An(this.g,new ns(t))},is.prototype.va=function(t){An(this.g,new rs(t))},is.prototype.ua=function(){An(this.g,"b")},ts.prototype.createWebChannel=ts.prototype.g,es.prototype.send=es.prototype.u,es.prototype.open=es.prototype.m,es.prototype.close=es.prototype.close,tr.NO_ERROR=0,tr.TIMEOUT=8,tr.HTTP_ERROR=6,er.COMPLETE="complete",ir.EventType=or,or.OPEN="a",or.CLOSE="b",or.ERROR="c",or.MESSAGE="d",_n.prototype.listen=_n.prototype.N,wi.prototype.listenOnce=wi.prototype.O,wi.prototype.getLastError=wi.prototype.La,wi.prototype.getLastErrorCode=wi.prototype.Da,wi.prototype.getStatus=wi.prototype.ba,wi.prototype.getResponseJson=wi.prototype.Qa,wi.prototype.getResponseText=wi.prototype.ga,wi.prototype.send=wi.prototype.ea;var ss=ie.createWebChannelTransport=function(){return new ts},os=ie.getStatEventTarget=function(){return Hn()},as=ie.ErrorCode=tr,us=ie.EventType=er,cs=ie.Event=Wn,ls=ie.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},hs=ie.FetchXmlHttpFactory=fi,fs=ie.WebChannel=ir,ds=ie.XhrIo=wi;const ps="@firebase/firestore";class gs{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}gs.UNAUTHENTICATED=new gs(null),gs.GOOGLE_CREDENTIALS=new gs("google-credentials-uid"),gs.FIRST_PARTY=new gs("first-party-uid"),gs.MOCK_USER=new gs("mock-user");let ms="9.9.2";const ys=new pt("@firebase/firestore");function vs(){return ys.logLevel}function ws(t,...e){if(ys.logLevel<=ct.DEBUG){const n=e.map(As);ys.debug(`Firestore (${ms}): ${t}`,...n)}}function bs(t,...e){if(ys.logLevel<=ct.ERROR){const n=e.map(As);ys.error(`Firestore (${ms}): ${t}`,...n)}}function _s(t,...e){if(ys.logLevel<=ct.WARN){const n=e.map(As);ys.warn(`Firestore (${ms}): ${t}`,...n)}}function As(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Es(t="Unexpected state"){const e=`FIRESTORE (${ms}) INTERNAL ASSERTION FAILED: `+t;throw bs(e),new Error(e)}function Cs(t,e){t||Es()}function Ts(t,e){return t}const Ss={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Is extends J{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xs{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Ds{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class ks{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(gs.UNAUTHENTICATED)))}shutdown(){}}class Ns{constructor(t){this.t=t,this.currentUser=gs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const r=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let i=new xs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new xs,t.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const e=i;t.enqueueRetryable((async()=>{await e.promise,await r(this.currentUser)}))},o=t=>{ws("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(ws("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new xs)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(ws("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Cs("string"==typeof e.accessToken),new Ds(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Cs(null===t||"string"==typeof t),new gs(t)}}class Rs{constructor(t,e,n){this.type="FirstParty",this.user=gs.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const r=t.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class Ms{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new Rs(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable((()=>e(gs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Os{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ls{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const n=t=>{null!=t.error&&ws("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.p;return this.p=t.token,ws("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const r=t=>{ws("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.g.onInit((t=>r(t))),setTimeout((()=>{if(!this.appCheck){const t=this.g.getImmediate({optional:!0});t?r(t):ws("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(Cs("string"==typeof t.token),this.p=t.token,new Os(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ps(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}class Bs{static I(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=Ps(40);for(let r=0;r<n.length;++r)e.length<20&&n[r]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return e}}function Vs(t,e){return t<e?-1:t>e?1:0}function Fs(t,e,n){return t.length===e.length&&t.every(((t,r)=>n(t,e[r])))}class Us{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Is(Ss.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Is(Ss.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Is(Ss.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Is(Ss.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Us.fromMillis(Date.now())}static fromDate(t){return Us.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Us(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Vs(this.nanoseconds,t.nanoseconds):Vs(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class js{constructor(t){this.timestamp=t}static fromTimestamp(t){return new js(t)}static min(){return new js(new Us(0,0))}static max(){return new js(new Us(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class qs{constructor(t,e,n){void 0===e?e=0:e>t.length&&Es(),void 0===n?n=t.length-e:n>t.length-e&&Es(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===qs.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof qs?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=t.get(r),i=e.get(r);if(n<i)return-1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class $s extends qs{construct(t,e,n){return new $s(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Is(Ss.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new $s(e)}static emptyPath(){return new $s([])}}const zs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ws extends qs{construct(t,e,n){return new Ws(t,e,n)}static isValidIdentifier(t){return zs.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ws.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ws(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Is(Ss.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new Is(Ss.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Is(Ss.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?(s=!s,r++):"."!==e||s?(n+=e,r++):(i(),r++)}if(i(),s)throw new Is(Ss.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ws(e)}static emptyPath(){return new Ws([])}}class Gs{constructor(t){this.path=t}static fromPath(t){return new Gs($s.fromString(t))}static fromName(t){return new Gs($s.fromString(t).popFirst(5))}static empty(){return new Gs($s.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===$s.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return $s.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Gs(new $s(t.slice()))}}function Hs(t){return new Ks(t.readTime,t.key,-1)}class Ks{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new Ks(js.min(),Gs.empty(),-1)}static max(){return new Ks(js.max(),Gs.empty(),-1)}}function Xs(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=Gs.comparator(t.documentKey,e.documentKey),0!==n?n:Vs(t.largestBatchId,e.largestBatchId))}const Qs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ys{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Js(t){if(t.code!==Ss.FAILED_PRECONDITION||t.message!==Qs)throw t;ws("LocalStore","Unexpectedly lost primary lease")}class Zs{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Es(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Zs(((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Zs?e:Zs.resolve(e)}catch(t){return Zs.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Zs.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Zs.reject(e)}static resolve(t){return new Zs(((e,n)=>{e(t)}))}static reject(t){return new Zs(((e,n)=>{n(t)}))}static waitFor(t){return new Zs(((e,n)=>{let r=0,i=0,s=!1;t.forEach((t=>{++r,t.next((()=>{++i,s&&i===r&&e()}),(t=>n(t)))})),s=!0,i===r&&e()}))}static or(t){let e=Zs.resolve(!1);for(const n of t)e=e.next((t=>t?Zs.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,r)=>{n.push(e.call(this,t,r))})),this.waitFor(n)}static mapArray(t,e){return new Zs(((n,r)=>{const i=t.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const u=a;e(t[u]).next((t=>{s[u]=t,++o,o===i&&n(s)}),(t=>r(t)))}}))}static doWhile(t,e){return new Zs(((n,r)=>{const i=()=>{!0===t()?e().next((()=>{i()}),r):n()};i()}))}}function to(t){return"IndexedDbTransactionError"===t.name}class eo{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.it(t),this.rt=t=>e.writeSequenceNumber(t))}it(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.rt&&this.rt(t),t}}function no(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ro(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function io(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}eo.ot=-1;class so{constructor(t,e){this.comparator=t,this.root=e||ao.EMPTY}insert(t,e){return new so(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ao.BLACK,null,null))}remove(t){return new so(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ao.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new oo(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new oo(this.root,t,this.comparator,!1)}getReverseIterator(){return new oo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new oo(this.root,t,this.comparator,!0)}}class oo{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,e&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ao{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:ao.RED,this.left=null!=r?r:ao.EMPTY,this.right=null!=i?i:ao.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,i){return new ao(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ao.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return ao.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ao.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ao.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Es();if(this.right.isRed())throw Es();const t=this.left.check();if(t!==this.right.check())throw Es();return t+(this.isRed()?0:1)}}ao.EMPTY=null,ao.RED=!0,ao.BLACK=!1,ao.EMPTY=new class{constructor(){this.size=0}get key(){throw Es()}get value(){throw Es()}get color(){throw Es()}get left(){throw Es()}get right(){throw Es()}copy(t,e,n,r,i){return this}insert(t,e,n){return new ao(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class uo{constructor(t){this.comparator=t,this.data=new so(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new co(this.data.getIterator())}getIteratorFrom(t){return new co(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof uo))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new uo(this.comparator);return e.data=t,e}}class co{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class lo{constructor(t){this.fields=t,t.sort(Ws.comparator)}static empty(){return new lo([])}unionWith(t){let e=new uo(Ws.comparator);for(const t of this.fields)e=e.add(t);for(const n of t)e=e.add(n);return new lo(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Fs(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class ho{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new ho(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new ho(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Vs(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ho.EMPTY_BYTE_STRING=new ho("");const fo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function po(t){if(Cs(!!t),"string"==typeof t){let e=0;const n=fo.exec(t);if(Cs(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:go(t.seconds),nanos:go(t.nanos)}}function go(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function mo(t){return"string"==typeof t?ho.fromBase64String(t):ho.fromUint8Array(t)}function yo(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function vo(t){const e=t.mapValue.fields.__previous_value__;return yo(e)?vo(e):e}function wo(t){const e=po(t.mapValue.fields.__local_write_time__.timestampValue);return new Us(e.seconds,e.nanos)}class bo{constructor(t,e,n,r,i,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class _o{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new _o("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof _o&&t.projectId===this.projectId&&t.database===this.database}}function Ao(t){return null==t}function Eo(t){return 0===t&&1/t==-1/0}const Co={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function To(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yo(t)?4:Fo(t)?9007199254740991:10:Es()}function So(t,e){if(t===e)return!0;const n=To(t);if(n!==To(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wo(t).isEqual(wo(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=po(t.timestampValue),r=po(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return mo(t.bytesValue).isEqual(mo(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return go(t.geoPointValue.latitude)===go(e.geoPointValue.latitude)&&go(t.geoPointValue.longitude)===go(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return go(t.integerValue)===go(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=go(t.doubleValue),r=go(e.doubleValue);return n===r?Eo(n)===Eo(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Fs(t.arrayValue.values||[],e.arrayValue.values||[],So);case 10:return function(t,e){const n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(no(n)!==no(r))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===r[t]||!So(n[t],r[t])))return!1;return!0}(t,e);default:return Es()}}function Io(t,e){return void 0!==(t.values||[]).find((t=>So(t,e)))}function xo(t,e){if(t===e)return 0;const n=To(t),r=To(e);if(n!==r)return Vs(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Vs(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=go(t.integerValue||t.doubleValue),r=go(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Do(t.timestampValue,e.timestampValue);case 4:return Do(wo(t),wo(e));case 5:return Vs(t.stringValue,e.stringValue);case 6:return function(t,e){const n=mo(t),r=mo(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),r=e.split("/");for(let t=0;t<n.length&&t<r.length;t++){const e=Vs(n[t],r[t]);if(0!==e)return e}return Vs(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=Vs(go(t.latitude),go(e.latitude));return 0!==n?n:Vs(go(t.longitude),go(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],r=e.values||[];for(let t=0;t<n.length&&t<r.length;++t){const e=xo(n[t],r[t]);if(e)return e}return Vs(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===Co.mapValue&&e===Co.mapValue)return 0;if(t===Co.mapValue)return 1;if(e===Co.mapValue)return-1;const n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let t=0;t<r.length&&t<s.length;++t){const e=Vs(r[t],s[t]);if(0!==e)return e;const o=xo(n[r[t]],i[s[t]]);if(0!==o)return o}return Vs(r.length,s.length)}(t.mapValue,e.mapValue);default:throw Es()}}function Do(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Vs(t,e);const n=po(t),r=po(e),i=Vs(n.seconds,r.seconds);return 0!==i?i:Vs(n.nanos,r.nanos)}function ko(t){return No(t)}function No(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=po(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?mo(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Gs.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const r of t.values||[])n?n=!1:e+=",",e+=No(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",r=!0;for(const i of e)r?r=!1:n+=",",n+=`${i}:${No(t.fields[i])}`;return n+"}"}(t.mapValue):Es();var e,n}function Ro(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Mo(t){return!!t&&"integerValue"in t}function Oo(t){return!!t&&"arrayValue"in t}function Lo(t){return!!t&&"nullValue"in t}function Po(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bo(t){return!!t&&"mapValue"in t}function Vo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ro(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Vo(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Fo(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class Uo{constructor(t){this.value=t}static empty(){return new Uo({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Bo(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Vo(e)}setAll(t){let e=Ws.emptyPath(),n={},r=[];t.forEach(((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,r),n={},r=[],e=i.popLast()}t?n[i.lastSegment()]=Vo(t):r.push(i.lastSegment())}));const i=this.getFieldsMap(e);this.applyChanges(i,n,r)}delete(t){const e=this.field(t.popLast());Bo(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return So(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];Bo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){ro(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new Uo(Vo(this.value))}}function jo(t){const e=[];return ro(t.fields,((t,n)=>{const r=new Ws([t]);if(Bo(n)){const t=jo(n.mapValue).fields;if(0===t.length)e.push(r);else for(const n of t)e.push(r.child(n))}else e.push(r)})),new lo(e)}class qo{constructor(t,e,n,r,i,s){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.data=i,this.documentState=s}static newInvalidDocument(t){return new qo(t,0,js.min(),js.min(),Uo.empty(),0)}static newFoundDocument(t,e,n){return new qo(t,1,e,js.min(),n,0)}static newNoDocument(t,e){return new qo(t,2,e,js.min(),Uo.empty(),0)}static newUnknownDocument(t,e){return new qo(t,3,e,js.min(),Uo.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Uo.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Uo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=js.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof qo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new qo(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $o{constructor(t,e=null,n=[],r=[],i=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ut=null}}function zo(t,e=null,n=[],r=[],i=null,s=null,o=null){return new $o(t,e,n,r,i,s,o)}function Wo(t){const e=Ts(t);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>{return(e=t).field.canonicalString()+e.op.toString()+ko(e.value);var e})).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Ao(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>ko(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>ko(t))).join(",")),e.ut=t}return e.ut}function Go(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!sa(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(n=t.filters[i],r=e.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!So(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!aa(t.startAt,e.startAt)&&aa(t.endAt,e.endAt)}function Ho(t){return Gs.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Ko extends class{}{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.ct(t,e,n):new Xo(t,e,n):"array-contains"===e?new Zo(t,n):"in"===e?new ta(t,n):"not-in"===e?new ea(t,n):"array-contains-any"===e?new na(t,n):new Ko(t,e,n)}static ct(t,e,n){return"in"===e?new Qo(t,n):new Yo(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.at(xo(e,this.value)):null!==e&&To(this.value)===To(e)&&this.at(xo(e,this.value))}at(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Es()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Xo extends Ko{constructor(t,e,n){super(t,e,n),this.key=Gs.fromName(n.referenceValue)}matches(t){const e=Gs.comparator(t.key,this.key);return this.at(e)}}class Qo extends Ko{constructor(t,e){super(t,"in",e),this.keys=Jo(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Yo extends Ko{constructor(t,e){super(t,"not-in",e),this.keys=Jo(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Jo(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>Gs.fromName(t.referenceValue)))}class Zo extends Ko{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Oo(e)&&Io(e.arrayValue,this.value)}}class ta extends Ko{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Io(this.value.arrayValue,e)}}class ea extends Ko{constructor(t,e){super(t,"not-in",e)}matches(t){if(Io(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Io(this.value.arrayValue,e)}}class na extends Ko{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Oo(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>Io(this.value.arrayValue,t)))}}class ra{constructor(t,e){this.position=t,this.inclusive=e}}class ia{constructor(t,e="asc"){this.field=t,this.dir=e}}function sa(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function oa(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?Gs.comparator(Gs.fromName(o.referenceValue),n.key):xo(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function aa(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!So(t.position[n],e.position[n]))return!1;return!0}class ua{constructor(t,e=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.lt=null,this.ft=null,this.startAt,this.endAt}}function ca(t){return new ua(t)}function la(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function ha(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function fa(t){for(const e of t.filters)if(e.ht())return e.field;return null}function da(t){return null!==t.collectionGroup}function pa(t){const e=Ts(t);if(null===e.lt){e.lt=[];const t=fa(e),n=ha(e);if(null!==t&&null===n)t.isKeyField()||e.lt.push(new ia(t)),e.lt.push(new ia(Ws.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.lt.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new ia(Ws.keyField(),t))}}}return e.lt}function ga(t){const e=Ts(t);if(!e.ft)if("F"===e.limitType)e.ft=zo(e.path,e.collectionGroup,pa(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const n of pa(e)){const e="desc"===n.dir?"asc":"desc";t.push(new ia(n.field,e))}const n=e.endAt?new ra(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ra(e.startAt.position,e.startAt.inclusive):null;e.ft=zo(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}return e.ft}function ma(t,e,n){return new ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ya(t,e){return Go(ga(t),ga(e))&&t.limitType===e.limitType}function va(t){return`${Wo(ga(t))}|lt:${t.limitType}`}function wa(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>{return`${(e=t).field.canonicalString()} ${e.op} ${ko(e.value)}`;var e})).join(", ")}]`),Ao(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>ko(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>ko(t))).join(",")),`Target(${e})`}(ga(t))}; limitType=${t.limitType})`}function ba(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Gs.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of t.explicitOrderBy)if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const r=oa(t,e,n);return t.inclusive?r<=0:r<0}(t.startAt,pa(t),e)||t.endAt&&!function(t,e,n){const r=oa(t,e,n);return t.inclusive?r>=0:r>0}(t.endAt,pa(t),e))}(t,e)}function _a(t){return(e,n)=>{let r=!1;for(const i of pa(t)){const t=Aa(i,e,n);if(0!==t)return t;r=r||i.field.isKeyField()}return 0}}function Aa(t,e,n){const r=t.field.isKeyField()?Gs.comparator(e.key,n.key):function(t,e,n){const r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?xo(r,i):Es()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Es()}}function Ea(t,e){if(t.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eo(e)?"-0":e}}function Ca(t){return{integerValue:""+t}}function Ta(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!Eo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?Ca(e):Ea(t,e)}class Sa{constructor(){this._=void 0}}function Ia(t,e,n){return t instanceof ka?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Na?Ra(t,e):t instanceof Ma?Oa(t,e):function(t,e){const n=Da(t,e),r=Pa(n)+Pa(t._t);return Mo(n)&&Mo(t._t)?Ca(r):Ea(t.wt,r)}(t,e)}function xa(t,e,n){return t instanceof Na?Ra(t,e):t instanceof Ma?Oa(t,e):n}function Da(t,e){return t instanceof La?Mo(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class ka extends Sa{}class Na extends Sa{constructor(t){super(),this.elements=t}}function Ra(t,e){const n=Ba(e);for(const e of t.elements)n.some((t=>So(t,e)))||n.push(e);return{arrayValue:{values:n}}}class Ma extends Sa{constructor(t){super(),this.elements=t}}function Oa(t,e){let n=Ba(e);for(const e of t.elements)n=n.filter((t=>!So(t,e)));return{arrayValue:{values:n}}}class La extends Sa{constructor(t,e){super(),this.wt=t,this._t=e}}function Pa(t){return go(t.integerValue||t.doubleValue)}function Ba(t){return Oo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Va{constructor(t,e){this.field=t,this.transform=e}}class Fa{constructor(t,e){this.version=t,this.transformResults=e}}class Ua{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ua}static exists(t){return new Ua(void 0,t)}static updateTime(t){return new Ua(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ja(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class qa{}function $a(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Za(t.key,Ua.none()):new Ka(t.key,t.data,Ua.none());{const n=t.data,r=Uo.empty();let i=new uo(Ws.comparator);for(let t of e.fields)if(!i.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?r.delete(t):r.set(t,e),i=i.add(t)}return new Xa(t.key,r,new lo(i.toArray()),Ua.none())}}function za(t,e,n){t instanceof Ka?function(t,e,n){const r=t.value.clone(),i=Ya(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Xa?function(t,e,n){if(!ja(t.precondition,e))return void e.convertToUnknownDocument(n.version);const r=Ya(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Qa(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Wa(t,e,n,r){return t instanceof Ka?function(t,e,n,r){if(!ja(t.precondition,e))return n;const i=t.value.clone(),s=Ja(t.fieldTransforms,r,e);return i.setAll(s),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xa?function(t,e,n,r){if(!ja(t.precondition,e))return n;const i=Ja(t.fieldTransforms,r,e),s=e.data;return s.setAll(Qa(t)),s.setAll(i),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,r):function(t,e,n){return ja(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function Ga(t,e){let n=null;for(const r of t.fieldTransforms){const t=e.data.field(r.field),i=Da(r.transform,t||null);null!=i&&(null===n&&(n=Uo.empty()),n.set(r.field,i))}return n||null}function Ha(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Fs(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Na&&e instanceof Na||t instanceof Ma&&e instanceof Ma?Fs(t.elements,e.elements,So):t instanceof La&&e instanceof La?So(t._t,e._t):t instanceof ka&&e instanceof ka}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ka extends qa{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Xa extends qa{constructor(t,e,n,r,i=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Qa(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Ya(t,e,n){const r=new Map;Cs(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,xa(o,a,n[i]))}return r}function Ja(t,e,n){const r=new Map;for(const i of t){const t=i.transform,s=n.data.field(i.field);r.set(i.field,Ia(t,s,e))}return r}class Za extends qa{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tu extends qa{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class eu{constructor(t){this.count=t}}var nu,ru;function iu(t){if(void 0===t)return bs("GRPC error has no .code"),Ss.UNKNOWN;switch(t){case nu.OK:return Ss.OK;case nu.CANCELLED:return Ss.CANCELLED;case nu.UNKNOWN:return Ss.UNKNOWN;case nu.DEADLINE_EXCEEDED:return Ss.DEADLINE_EXCEEDED;case nu.RESOURCE_EXHAUSTED:return Ss.RESOURCE_EXHAUSTED;case nu.INTERNAL:return Ss.INTERNAL;case nu.UNAVAILABLE:return Ss.UNAVAILABLE;case nu.UNAUTHENTICATED:return Ss.UNAUTHENTICATED;case nu.INVALID_ARGUMENT:return Ss.INVALID_ARGUMENT;case nu.NOT_FOUND:return Ss.NOT_FOUND;case nu.ALREADY_EXISTS:return Ss.ALREADY_EXISTS;case nu.PERMISSION_DENIED:return Ss.PERMISSION_DENIED;case nu.FAILED_PRECONDITION:return Ss.FAILED_PRECONDITION;case nu.ABORTED:return Ss.ABORTED;case nu.OUT_OF_RANGE:return Ss.OUT_OF_RANGE;case nu.UNIMPLEMENTED:return Ss.UNIMPLEMENTED;case nu.DATA_LOSS:return Ss.DATA_LOSS;default:return Es()}}(ru=nu||(nu={}))[ru.OK=0]="OK",ru[ru.CANCELLED=1]="CANCELLED",ru[ru.UNKNOWN=2]="UNKNOWN",ru[ru.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ru[ru.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ru[ru.NOT_FOUND=5]="NOT_FOUND",ru[ru.ALREADY_EXISTS=6]="ALREADY_EXISTS",ru[ru.PERMISSION_DENIED=7]="PERMISSION_DENIED",ru[ru.UNAUTHENTICATED=16]="UNAUTHENTICATED",ru[ru.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ru[ru.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ru[ru.ABORTED=10]="ABORTED",ru[ru.OUT_OF_RANGE=11]="OUT_OF_RANGE",ru[ru.UNIMPLEMENTED=12]="UNIMPLEMENTED",ru[ru.INTERNAL=13]="INTERNAL",ru[ru.UNAVAILABLE=14]="UNAVAILABLE",ru[ru.DATA_LOSS=15]="DATA_LOSS";class su{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,r]of n)if(this.equalsFn(e,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(void 0===r)return this.inner[n]=[[t,e]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],t))return void(r[n]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){ro(this.inner,((e,n)=>{for(const[e,r]of n)t(e,r)}))}isEmpty(){return io(this.inner)}size(){return this.innerSize}}const ou=new so(Gs.comparator);function au(){return ou}const uu=new so(Gs.comparator);function cu(...t){let e=uu;for(const n of t)e=e.insert(n.key,n);return e}function lu(t){let e=uu;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function hu(){return du()}function fu(){return du()}function du(){return new su((t=>t.toString()),((t,e)=>t.isEqual(e)))}const pu=new so(Gs.comparator),gu=new uo(Gs.comparator);function mu(...t){let e=gu;for(const n of t)e=e.add(n);return e}const yu=new uo(Vs);function vu(){return yu}class wu{constructor(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e){const n=new Map;return n.set(t,bu.createSynthesizedTargetChangeForCurrentChange(t,e)),new wu(js.min(),n,vu(),au(),mu())}}class bu{constructor(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e){return new bu(ho.EMPTY_BYTE_STRING,e,mu(),mu(),mu())}}class _u{constructor(t,e,n,r){this.gt=t,this.removedTargetIds=e,this.key=n,this.yt=r}}class Au{constructor(t,e){this.targetId=t,this.It=e}}class Eu{constructor(t,e,n=ho.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class Cu{constructor(){this.Tt=0,this.Et=Iu(),this.At=ho.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(t){t.approximateByteSize()>0&&(this.bt=!0,this.At=t)}St(){let t=mu(),e=mu(),n=mu();return this.Et.forEach(((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Es()}})),new bu(this.At,this.Rt,t,e,n)}Dt(){this.bt=!1,this.Et=Iu()}Ct(t,e){this.bt=!0,this.Et=this.Et.insert(t,e)}xt(t){this.bt=!0,this.Et=this.Et.remove(t)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class Tu{constructor(t){this.Ot=t,this.Ft=new Map,this.$t=au(),this.Bt=Su(),this.Lt=new uo(Vs)}Ut(t){for(const e of t.gt)t.yt&&t.yt.isFoundDocument()?this.qt(e,t.yt):this.Kt(e,t.key,t.yt);for(const e of t.removedTargetIds)this.Kt(e,t.key,t.yt)}Gt(t){this.forEachTarget(t,(e=>{const n=this.Qt(e);switch(t.state){case 0:this.jt(e)&&n.Vt(t.resumeToken);break;case 1:n.kt(),n.Pt||n.Dt(),n.Vt(t.resumeToken);break;case 2:n.kt(),n.Pt||this.removeTarget(e);break;case 3:this.jt(e)&&(n.Mt(),n.Vt(t.resumeToken));break;case 4:this.jt(e)&&(this.Wt(e),n.Vt(t.resumeToken));break;default:Es()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ft.forEach(((t,n)=>{this.jt(n)&&e(n)}))}zt(t){const e=t.targetId,n=t.It.count,r=this.Ht(e);if(r){const t=r.target;if(Ho(t))if(0===n){const n=new Gs(t.path);this.Kt(e,n,qo.newNoDocument(n,js.min()))}else Cs(1===n);else this.Jt(e)!==n&&(this.Wt(e),this.Lt=this.Lt.add(e))}}Yt(t){const e=new Map;this.Ft.forEach(((n,r)=>{const i=this.Ht(r);if(i){if(n.current&&Ho(i.target)){const e=new Gs(i.target.path);null!==this.$t.get(e)||this.Xt(r,e)||this.Kt(r,e,qo.newNoDocument(e,t))}n.vt&&(e.set(r,n.St()),n.Dt())}}));let n=mu();this.Bt.forEach(((t,e)=>{let r=!0;e.forEachWhile((t=>{const e=this.Ht(t);return!e||2===e.purpose||(r=!1,!1)})),r&&(n=n.add(t))})),this.$t.forEach(((e,n)=>n.setReadTime(t)));const r=new wu(t,e,this.Lt,this.$t,n);return this.$t=au(),this.Bt=Su(),this.Lt=new uo(Vs),r}qt(t,e){if(!this.jt(t))return;const n=this.Xt(t,e.key)?2:0;this.Qt(t).Ct(e.key,n),this.$t=this.$t.insert(e.key,e),this.Bt=this.Bt.insert(e.key,this.Zt(e.key).add(t))}Kt(t,e,n){if(!this.jt(t))return;const r=this.Qt(t);this.Xt(t,e)?r.Ct(e,1):r.xt(e),this.Bt=this.Bt.insert(e,this.Zt(e).delete(t)),n&&(this.$t=this.$t.insert(e,n))}removeTarget(t){this.Ft.delete(t)}Jt(t){const e=this.Qt(t).St();return this.Ot.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Nt(t){this.Qt(t).Nt()}Qt(t){let e=this.Ft.get(t);return e||(e=new Cu,this.Ft.set(t,e)),e}Zt(t){let e=this.Bt.get(t);return e||(e=new uo(Vs),this.Bt=this.Bt.insert(t,e)),e}jt(t){const e=null!==this.Ht(t);return e||ws("WatchChangeAggregator","Detected inactive target",t),e}Ht(t){const e=this.Ft.get(t);return e&&e.Pt?null:this.Ot.te(t)}Wt(t){this.Ft.set(t,new Cu),this.Ot.getRemoteKeysForTarget(t).forEach((e=>{this.Kt(t,e,null)}))}Xt(t,e){return this.Ot.getRemoteKeysForTarget(t).has(e)}}function Su(){return new so(Gs.comparator)}function Iu(){return new so(Gs.comparator)}const xu={asc:"ASCENDING",desc:"DESCENDING"},Du={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ku{constructor(t,e){this.databaseId=t,this.dt=e}}function Nu(t,e){return t.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ru(t,e){return t.dt?e.toBase64():e.toUint8Array()}function Mu(t,e){return Nu(t,e.toTimestamp())}function Ou(t){return Cs(!!t),js.fromTimestamp(function(t){const e=po(t);return new Us(e.seconds,e.nanos)}(t))}function Lu(t,e){return function(t){return new $s(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Pu(t){const e=$s.fromString(t);return Cs(tc(e)),e}function Bu(t,e){return Lu(t.databaseId,e.path)}function Vu(t,e){const n=Pu(e);if(n.get(1)!==t.databaseId.projectId)throw new Is(Ss.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Is(Ss.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Gs(ju(n))}function Fu(t,e){return Lu(t.databaseId,e)}function Uu(t){return new $s(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ju(t){return Cs(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function qu(t,e,n){return{name:Bu(t,e),fields:n.value.mapValue.fields}}function $u(t,e){return{documents:[Fu(t,e.path)]}}function zu(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Fu(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Fu(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(t){if(0===t.length)return;const e=t.map((t=>function(t){if("=="===t.op){if(Po(t.value))return{unaryFilter:{field:Xu(t.field),op:"IS_NAN"}};if(Lo(t.value))return{unaryFilter:{field:Xu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Po(t.value))return{unaryFilter:{field:Xu(t.field),op:"IS_NOT_NAN"}};if(Lo(t.value))return{unaryFilter:{field:Xu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xu(t.field),op:Ku(t.op),value:t.value}}}(t)));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}(e.filters);i&&(n.structuredQuery.where=i);const s=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:Xu(t.field),direction:Hu(t.dir)}}(t)))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(t,e){return t.dt||Ao(e)?e:{value:e}}(t,e.limit);var a;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),n}function Wu(t){let e=function(t){const e=Pu(t);return 4===e.length?$s.emptyPath():ju(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Cs(1===r);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=Gu(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>function(t){return new ia(Qu(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Ao(e)?null:e}(n.limit));let u=null;n.startAt&&(u=function(t){const e=!!t.before,n=t.values||[];return new ra(n,e)}(n.startAt));let c=null;return n.endAt&&(c=function(t){const e=!t.before,n=t.values||[];return new ra(n,e)}(n.endAt)),function(t,e,n,r,i,s,o,a){return new ua(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",u,c)}function Gu(t){return t?void 0!==t.unaryFilter?[Ju(t)]:void 0!==t.fieldFilter?[Yu(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((t=>Gu(t))).reduce(((t,e)=>t.concat(e))):Es():[]}function Hu(t){return xu[t]}function Ku(t){return Du[t]}function Xu(t){return{fieldPath:t.canonicalString()}}function Qu(t){return Ws.fromServerFormat(t.fieldPath)}function Yu(t){return Ko.create(Qu(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Es()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ju(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Qu(t.unaryFilter.field);return Ko.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Qu(t.unaryFilter.field);return Ko.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Qu(t.unaryFilter.field);return Ko.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Qu(t.unaryFilter.field);return Ko.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Es()}}function Zu(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function tc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class ec{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const r=this.mutations[e];r.key.isEqual(t.key)&&za(r,t,n[e])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Wa(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Wa(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=fu();return this.mutations.forEach((r=>{const i=t.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=e.has(r.key)?null:o;const a=$a(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(js.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),mu())}isEqual(t){return this.batchId===t.batchId&&Fs(this.mutations,t.mutations,((t,e)=>Ha(t,e)))&&Fs(this.baseMutations,t.baseMutations,((t,e)=>Ha(t,e)))}}class nc{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){Cs(t.mutations.length===n.length);let r=pu;const i=t.mutations;for(let t=0;t<i.length;t++)r=r.insert(i[t].key,n[t].version);return new nc(t,e,n,r)}}class rc{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ic{constructor(t,e,n,r,i=js.min(),s=js.min(),o=ho.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(t){return new ic(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new ic(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new ic(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class sc{constructor(t){this.ne=t}}function oc(t){const e=Wu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ma(e,e.limit,"L"):e}class ac{constructor(){}re(t,e){this.oe(t,e),e.ue()}oe(t,e){if("nullValue"in t)this.ce(e,5);else if("booleanValue"in t)this.ce(e,10),e.ae(t.booleanValue?1:0);else if("integerValue"in t)this.ce(e,15),e.ae(go(t.integerValue));else if("doubleValue"in t){const n=go(t.doubleValue);isNaN(n)?this.ce(e,13):(this.ce(e,15),Eo(n)?e.ae(0):e.ae(n))}else if("timestampValue"in t){const n=t.timestampValue;this.ce(e,20),"string"==typeof n?e.he(n):(e.he(`${n.seconds||""}`),e.ae(n.nanos||0))}else if("stringValue"in t)this.le(t.stringValue,e),this.fe(e);else if("bytesValue"in t)this.ce(e,30),e.de(mo(t.bytesValue)),this.fe(e);else if("referenceValue"in t)this._e(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.ce(e,45),e.ae(n.latitude||0),e.ae(n.longitude||0)}else"mapValue"in t?Fo(t)?this.ce(e,Number.MAX_SAFE_INTEGER):(this.we(t.mapValue,e),this.fe(e)):"arrayValue"in t?(this.me(t.arrayValue,e),this.fe(e)):Es()}le(t,e){this.ce(e,25),this.ge(t,e)}ge(t,e){e.he(t)}we(t,e){const n=t.fields||{};this.ce(e,55);for(const t of Object.keys(n))this.le(t,e),this.oe(n[t],e)}me(t,e){const n=t.values||[];this.ce(e,50);for(const t of n)this.oe(t,e)}_e(t,e){this.ce(e,37),Gs.fromName(t).path.forEach((t=>{this.ce(e,60),this.ge(t,e)}))}ce(t,e){t.ae(e)}fe(t){t.ae(2)}}ac.ye=new ac;class uc{constructor(){this.ze=new cc}addToCollectionParentIndex(t,e){return this.ze.add(e),Zs.resolve()}getCollectionParents(t,e){return Zs.resolve(this.ze.getEntries(e))}addFieldIndex(t,e){return Zs.resolve()}deleteFieldIndex(t,e){return Zs.resolve()}getDocumentsMatchingTarget(t,e){return Zs.resolve(null)}getIndexType(t,e){return Zs.resolve(0)}getFieldIndexes(t,e){return Zs.resolve([])}getNextCollectionGroupToUpdate(t){return Zs.resolve(null)}getMinOffset(t,e){return Zs.resolve(Ks.min())}getMinOffsetFromCollectionGroup(t,e){return Zs.resolve(Ks.min())}updateCollectionGroup(t,e,n){return Zs.resolve()}updateIndexEntries(t,e){return Zs.resolve()}}class cc{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new uo($s.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new uo($s.comparator)).toArray()}}new Uint8Array(0);class lc{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new lc(t,lc.DEFAULT_COLLECTION_PERCENTILE,lc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}lc.DEFAULT_COLLECTION_PERCENTILE=10,lc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lc.DEFAULT=new lc(41943040,lc.DEFAULT_COLLECTION_PERCENTILE,lc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lc.DISABLED=new lc(-1,0,0);class hc{constructor(t){this.En=t}next(){return this.En+=2,this.En}static An(){return new hc(0)}static Rn(){return new hc(-1)}}class fc{constructor(){this.changes=new su((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,qo.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Zs.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class dc{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class pc{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(n=r,this.getBaseDocument(t,e,n)))).next((t=>(null!==n&&Wa(n.mutation,t,lo.empty(),Us.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,mu()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=mu()){const r=hu();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,n).next((t=>{let e=cu();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=hu();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,mu())))}populateOverlays(t,e,n){const r=[];return n.forEach((t=>{e.has(t)||r.push(t)})),this.documentOverlayCache.getOverlays(t,r).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,r){let i=au();const s=du(),o=du();return e.forEach(((t,e)=>{const o=n.get(e.key);r.has(e.key)&&(void 0===o||o.mutation instanceof Xa)?i=i.insert(e.key,e):void 0!==o&&(s.set(e.key,o.mutation.getFieldMask()),Wa(o.mutation,e,o.mutation.getFieldMask(),Us.now()))})),this.recalculateAndSaveOverlays(t,i).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new dc(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=du();let r=new so(((t,e)=>t-e)),i=mu();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const i of t)i.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||lo.empty();o=i.applyToLocalView(s,o),n.set(t,o);const a=(r.get(i.batchId)||mu()).add(t);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,u=r.value,c=fu();u.forEach((t=>{if(!i.has(t)){const r=$a(e.get(t),n.get(t));null!==r&&c.set(t,r),i=i.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,c))}return Zs.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n){return function(t){return Gs.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):da(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-i.size):Zs.resolve(hu());let o=-1,a=i;return s.next((e=>Zs.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(e)?Zs.resolve():this.getBaseDocument(t,e,n).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,i))).next((()=>this.computeViews(t,a,e,mu()))).next((t=>({batchId:o,changes:lu(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Gs(e)).next((t=>{let e=cu();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n){const r=e.collectionGroup;let i=cu();return this.indexManager.getCollectionParents(t,r).next((s=>Zs.forEach(s,(s=>{const o=function(t,e){return new ua(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(r));return this.getDocumentsMatchingCollectionQuery(t,o,n).next((t=>{t.forEach(((t,e)=>{i=i.insert(t,e)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(t,e,n){let r;return this.remoteDocumentCache.getAllFromCollection(t,e.path,n).next((i=>(r=i,this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId)))).next((t=>{t.forEach(((t,e)=>{const n=e.getKey();null===r.get(n)&&(r=r.insert(n,qo.newInvalidDocument(n)))}));let n=cu();return r.forEach(((r,i)=>{const s=t.get(r);void 0!==s&&Wa(s.mutation,i,lo.empty(),Us.now()),ba(e,i)&&(n=n.insert(r,i))})),n}))}getBaseDocument(t,e,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(t,e):Zs.resolve(qo.newInvalidDocument(e))}}class gc{constructor(t){this.wt=t,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(t,e){return Zs.resolve(this.Jn.get(e))}saveBundleMetadata(t,e){var n;return this.Jn.set(e.id,{id:(n=e).id,version:n.version,createTime:Ou(n.createTime)}),Zs.resolve()}getNamedQuery(t,e){return Zs.resolve(this.Yn.get(e))}saveNamedQuery(t,e){return this.Yn.set(e.name,function(t){return{name:t.name,query:oc(t.bundledQuery),readTime:Ou(t.readTime)}}(e)),Zs.resolve()}}class mc{constructor(){this.overlays=new so(Gs.comparator),this.Xn=new Map}getOverlay(t,e){return Zs.resolve(this.overlays.get(e))}getOverlays(t,e){const n=hu();return Zs.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,r)=>{this.ie(t,e,r)})),Zs.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.Xn.get(n);return void 0!==r&&(r.forEach((t=>this.overlays=this.overlays.remove(t))),this.Xn.delete(n)),Zs.resolve()}getOverlaysForCollection(t,e,n){const r=hu(),i=e.length+1,s=new Gs(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===i&&t.largestBatchId>n&&r.set(t.getKey(),t)}return Zs.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let i=new so(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=i.get(t.largestBatchId);null===e&&(e=hu(),i=i.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=hu(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=r)););return Zs.resolve(o)}ie(t,e,n){const r=this.overlays.get(n.key);if(null!==r){const t=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new rc(e,n));let i=this.Xn.get(e);void 0===i&&(i=mu(),this.Xn.set(e,i)),this.Xn.set(e,i.add(n.key))}}class yc{constructor(){this.Zn=new uo(vc.ts),this.es=new uo(vc.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(t,e){const n=new vc(t,e);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}ss(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.rs(new vc(t,e))}os(t,e){t.forEach((t=>this.removeReference(t,e)))}us(t){const e=new Gs(new $s([])),n=new vc(e,t),r=new vc(e,t+1),i=[];return this.es.forEachInRange([n,r],(t=>{this.rs(t),i.push(t.key)})),i}cs(){this.Zn.forEach((t=>this.rs(t)))}rs(t){this.Zn=this.Zn.delete(t),this.es=this.es.delete(t)}hs(t){const e=new Gs(new $s([])),n=new vc(e,t),r=new vc(e,t+1);let i=mu();return this.es.forEachInRange([n,r],(t=>{i=i.add(t.key)})),i}containsKey(t){const e=new vc(t,0),n=this.Zn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class vc{constructor(t,e){this.key=t,this.ls=e}static ts(t,e){return Gs.comparator(t.key,e.key)||Vs(t.ls,e.ls)}static ns(t,e){return Vs(t.ls,e.ls)||Gs.comparator(t.key,e.key)}}class wc{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.fs=1,this.ds=new uo(vc.ts)}checkEmpty(t){return Zs.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,r){const i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new ec(i,e,n,r);this.mutationQueue.push(s);for(const e of r)this.ds=this.ds.add(new vc(e.key,i)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return Zs.resolve(s)}lookupMutationBatch(t,e){return Zs.resolve(this._s(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.ws(n),i=r<0?0:r;return Zs.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Zs.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(t){return Zs.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new vc(e,0),r=new vc(e,Number.POSITIVE_INFINITY),i=[];return this.ds.forEachInRange([n,r],(t=>{const e=this._s(t.ls);i.push(e)})),Zs.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new uo(Vs);return e.forEach((t=>{const e=new vc(t,0),r=new vc(t,Number.POSITIVE_INFINITY);this.ds.forEachInRange([e,r],(t=>{n=n.add(t.ls)}))})),Zs.resolve(this.gs(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let i=n;Gs.isDocumentKey(i)||(i=i.child(""));const s=new vc(new Gs(i),0);let o=new uo(Vs);return this.ds.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.ls)),!0)}),s),Zs.resolve(this.gs(o))}gs(t){const e=[];return t.forEach((t=>{const n=this._s(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){Cs(0===this.ys(e.batchId,"removed")),this.mutationQueue.shift();let n=this.ds;return Zs.forEach(e.mutations,(r=>{const i=new vc(r.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.ds=n}))}In(t){}containsKey(t,e){const n=new vc(e,0),r=this.ds.firstAfterOrEqual(n);return Zs.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,Zs.resolve()}ys(t,e){return this.ws(t)}ws(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}_s(t){const e=this.ws(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class bc{constructor(t){this.ps=t,this.docs=new so(Gs.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),i=r?r.size:0,s=this.ps(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Zs.resolve(n?n.document.mutableCopy():qo.newInvalidDocument(e))}getEntries(t,e){let n=au();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():qo.newInvalidDocument(t))})),Zs.resolve(n)}getAllFromCollection(t,e,n){let r=au();const i=new Gs(e.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:t,value:{document:i}}=s.getNext();if(!e.isPrefixOf(t.path))break;t.path.length>e.length+1||Xs(Hs(i),n)<=0||(r=r.insert(i.key,i.mutableCopy()))}return Zs.resolve(r)}getAllFromCollectionGroup(t,e,n,r){Es()}Is(t,e){return Zs.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new _c(this)}getSize(t){return Zs.resolve(this.size)}}class _c extends fc{constructor(t){super(),this.zn=t}applyChanges(t){const e=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?e.push(this.zn.addEntry(t,r)):this.zn.removeEntry(n)})),Zs.waitFor(e)}getFromCache(t,e){return this.zn.getEntry(t,e)}getAllFromCache(t,e){return this.zn.getEntries(t,e)}}class Ac{constructor(t){this.persistence=t,this.Ts=new su((t=>Wo(t)),Go),this.lastRemoteSnapshotVersion=js.min(),this.highestTargetId=0,this.Es=0,this.As=new yc,this.targetCount=0,this.Rs=hc.An()}forEachTarget(t,e){return this.Ts.forEach(((t,n)=>e(n))),Zs.resolve()}getLastRemoteSnapshotVersion(t){return Zs.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Zs.resolve(this.Es)}allocateTargetId(t){return this.highestTargetId=this.Rs.next(),Zs.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Es&&(this.Es=e),Zs.resolve()}vn(t){this.Ts.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Rs=new hc(e),this.highestTargetId=e),t.sequenceNumber>this.Es&&(this.Es=t.sequenceNumber)}addTargetData(t,e){return this.vn(e),this.targetCount+=1,Zs.resolve()}updateTargetData(t,e){return this.vn(e),Zs.resolve()}removeTargetData(t,e){return this.Ts.delete(e.target),this.As.us(e.targetId),this.targetCount-=1,Zs.resolve()}removeTargets(t,e,n){let r=0;const i=[];return this.Ts.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Ts.delete(s),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),r++)})),Zs.waitFor(i).next((()=>r))}getTargetCount(t){return Zs.resolve(this.targetCount)}getTargetData(t,e){const n=this.Ts.get(e)||null;return Zs.resolve(n)}addMatchingKeys(t,e,n){return this.As.ss(e,n),Zs.resolve()}removeMatchingKeys(t,e,n){this.As.os(e,n);const r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((e=>{i.push(r.markPotentiallyOrphaned(t,e))})),Zs.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.As.us(e),Zs.resolve()}getMatchingKeysForTargetId(t,e){const n=this.As.hs(e);return Zs.resolve(n)}containsKey(t,e){return Zs.resolve(this.As.containsKey(e))}}class Ec{constructor(t,e){this.bs={},this.overlays={},this.Ps=new eo(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new Ac(this),this.indexManager=new uc,this.remoteDocumentCache=function(t){return new bc(t)}((t=>this.referenceDelegate.Ss(t))),this.wt=new sc(e),this.Ds=new gc(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new mc,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.bs[t.toKey()];return n||(n=new wc(e,this.referenceDelegate),this.bs[t.toKey()]=n),n}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(t,e,n){ws("MemoryPersistence","Starting transaction:",t);const r=new Cc(this.Ps.next());return this.referenceDelegate.Cs(),n(r).next((t=>this.referenceDelegate.xs(r).next((()=>t)))).toPromise().then((t=>(r.raiseOnCommittedEvent(),t)))}Ns(t,e){return Zs.or(Object.values(this.bs).map((n=>()=>n.containsKey(t,e))))}}class Cc extends Ys{constructor(t){super(),this.currentSequenceNumber=t}}class Tc{constructor(t){this.persistence=t,this.ks=new yc,this.Ms=null}static Os(t){return new Tc(t)}get Fs(){if(this.Ms)return this.Ms;throw Es()}addReference(t,e,n){return this.ks.addReference(n,e),this.Fs.delete(n.toString()),Zs.resolve()}removeReference(t,e,n){return this.ks.removeReference(n,e),this.Fs.add(n.toString()),Zs.resolve()}markPotentiallyOrphaned(t,e){return this.Fs.add(e.toString()),Zs.resolve()}removeTarget(t,e){this.ks.us(e.targetId).forEach((t=>this.Fs.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Fs.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Cs(){this.Ms=new Set}xs(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Zs.forEach(this.Fs,(n=>{const r=Gs.fromPath(n);return this.$s(t,r).next((t=>{t||e.removeEntry(r,js.min())}))})).next((()=>(this.Ms=null,e.apply(t))))}updateLimboDocument(t,e){return this.$s(t,e).next((t=>{t?this.Fs.delete(e.toString()):this.Fs.add(e.toString())}))}Ss(t){return 0}$s(t,e){return Zs.or([()=>Zs.resolve(this.ks.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ns(t,e)])}}class Sc{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.Pi=n,this.vi=r}static Vi(t,e){let n=mu(),r=mu();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:r=r.add(t.doc.key)}return new Sc(t,e.fromCache,n,r)}}class Ic{constructor(){this.Si=!1}initialize(t,e){this.Di=t,this.indexManager=e,this.Si=!0}getDocumentsMatchingQuery(t,e,n,r){return this.Ci(t,e).next((i=>i||this.xi(t,e,r,n))).next((n=>n||this.Ni(t,e)))}Ci(t,e){if(la(e))return Zs.resolve(null);let n=ga(e);return this.indexManager.getIndexType(t,n).next((r=>0===r?null:(null!==e.limit&&1===r&&(e=ma(e,null,"F"),n=ga(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((r=>{const i=mu(...r);return this.Di.getDocuments(t,i).next((r=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.ki(e,r);return this.Mi(e,s,i,n.readTime)?this.Ci(t,ma(e,null,"F")):this.Oi(t,s,e,n)}))))})))))}xi(t,e,n,r){return la(e)||r.isEqual(js.min())?this.Ni(t,e):this.Di.getDocuments(t,n).next((i=>{const s=this.ki(e,i);return this.Mi(e,s,n,r)?this.Ni(t,e):(vs()<=ct.DEBUG&&ws("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),wa(e)),this.Oi(t,s,e,function(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=js.fromTimestamp(1e9===r?new Us(n+1,0):new Us(n,r));return new Ks(i,Gs.empty(),e)}(r,-1)))}))}ki(t,e){let n=new uo(_a(t));return e.forEach(((e,r)=>{ba(t,r)&&(n=n.add(r))})),n}Mi(t,e,n,r){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const i="F"===t.limitType?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ni(t,e){return vs()<=ct.DEBUG&&ws("QueryEngine","Using full collection scan to execute query:",wa(e)),this.Di.getDocumentsMatchingQuery(t,e,Ks.min())}Oi(t,e,n,r){return this.Di.getDocumentsMatchingQuery(t,n,r).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class xc{constructor(t,e,n,r){this.persistence=t,this.Fi=e,this.wt=r,this.$i=new so(Vs),this.Bi=new su((t=>Wo(t)),Go),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(n)}qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new pc(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.$i)))}}async function Dc(t,e){const n=Ts(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let r;return n.mutationQueue.getAllMutationBatches(t).next((i=>(r=i,n.qi(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const i=[],s=[];let o=mu();for(const t of r){i.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({Ki:t,removedBatchIds:i,addedBatchIds:s})))}))}))}function kc(t){const e=Ts(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Vs.getLastRemoteSnapshotVersion(t)))}function Nc(t,e){const n=Ts(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}async function Rc(t,e,n){const r=Ts(t),i=r.$i.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(t=>r.persistence.referenceDelegate.removeTarget(t,i)))}catch(t){if(!to(t))throw t;ws("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}function Mc(t,e,n){const r=Ts(t);let i=js.min(),s=mu();return r.persistence.runTransaction("Execute query","readonly",(t=>function(t,e,n){const r=Ts(t),i=r.Bi.get(n);return void 0!==i?Zs.resolve(r.$i.get(i)):r.Vs.getTargetData(e,n)}(r,t,ga(e)).next((e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>r.Fi.getDocumentsMatchingQuery(t,e,n?i:js.min(),n?s:mu()))).next((t=>(function(t,e,n){let r=js.min();n.forEach(((t,e)=>{e.readTime.compareTo(r)>0&&(r=e.readTime)})),t.Li.set(e,r)}(r,function(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),t),{documents:t,ji:s})))))}class Oc{constructor(){this.activeTargetIds=vu()}Xi(t){this.activeTargetIds=this.activeTargetIds.add(t)}Zi(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Yi(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Lc{constructor(){this.Fr=new Oc,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.Fr.Xi(t),this.$r[t]||"not-current"}updateQueryState(t,e,n){this.$r[t]=e}removeLocalQueryTarget(t){this.Fr.Zi(t)}isLocalQueryTarget(t){return this.Fr.activeTargetIds.has(t)}clearQueryState(t){delete this.$r[t]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(t){return this.Fr.activeTargetIds.has(t)}start(){return this.Fr=new Oc,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Pc{Br(t){}shutdown(){}}class Bc{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(t){this.Gr.push(t)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){ws("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Gr)t(0)}Kr(){ws("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Gr)t(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Vc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Fc{constructor(t){this.jr=t.jr,this.Wr=t.Wr}zr(t){this.Hr=t}Jr(t){this.Yr=t}onMessage(t){this.Xr=t}close(){this.Wr()}send(t){this.jr(t)}Zr(){this.Hr()}eo(t){this.Yr(t)}no(t){this.Xr(t)}}class Uc extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http";this.so=e+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(t,e,n,r,i){const s=this.oo(t,e);ws("RestConnection","Sending: ",s,n);const o={};return this.uo(o,r,i),this.co(t,s,o,n).then((t=>(ws("RestConnection","Received: ",t),t)),(e=>{throw _s("RestConnection",`${t} failed with error: `,e,"url: ",s,"request:",n),e}))}ao(t,e,n,r,i,s){return this.ro(t,e,n,r,i)}uo(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+ms,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}oo(t,e){const n=Vc[t];return`${this.so}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}co(t,e,n,r){return new Promise(((i,s)=>{const o=new ds;o.listenOnce(us.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case as.NO_ERROR:const e=o.getResponseJson();ws("Connection","XHR received:",JSON.stringify(e)),i(e);break;case as.TIMEOUT:ws("Connection",'RPC "'+t+'" timed out'),s(new Is(Ss.DEADLINE_EXCEEDED,"Request time out"));break;case as.HTTP_ERROR:const n=o.getStatus();if(ws("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const t=o.getResponseJson().error;if(t&&t.status&&t.message){const e=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ss).indexOf(e)>=0?e:Ss.UNKNOWN}(t.status);s(new Is(e,t.message))}else s(new Is(Ss.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Is(Ss.UNAVAILABLE,"Connection failed."));break;default:Es()}}finally{ws("Connection",'RPC "'+t+'" completed.')}}));const a=JSON.stringify(r);o.send(e,"POST",a,n,15)}))}ho(t,e,n){const r=[this.so,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=ss(),s=os(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new hs({})),this.uo(o.initMessageHeaders,e,n),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Y())||"object"==typeof navigator&&"ReactNative"===navigator.product||Y().indexOf("Electron/")>=0||function(){const t=Y();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||Y().indexOf("MSAppHost/")>=0||function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||(o.httpHeadersOverwriteParam="$httpHeaders");const a=r.join("");ws("Connection","Creating WebChannel: "+a,o);const u=i.createWebChannel(a,o);let c=!1,l=!1;const h=new Fc({jr:t=>{l?ws("Connection","Not sending because WebChannel is closed:",t):(c||(ws("Connection","Opening WebChannel transport."),u.open(),c=!0),ws("Connection","WebChannel sending:",t),u.send(t))},Wr:()=>u.close()}),f=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return f(u,fs.EventType.OPEN,(()=>{l||ws("Connection","WebChannel transport opened.")})),f(u,fs.EventType.CLOSE,(()=>{l||(l=!0,ws("Connection","WebChannel transport closed"),h.eo())})),f(u,fs.EventType.ERROR,(t=>{l||(l=!0,_s("Connection","WebChannel transport errored:",t),h.eo(new Is(Ss.UNAVAILABLE,"The operation could not be completed")))})),f(u,fs.EventType.MESSAGE,(t=>{var e;if(!l){const n=t.data[0];Cs(!!n);const r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){ws("Connection","WebChannel received error:",i);const t=i.status;let e=function(t){const e=nu[t];if(void 0!==e)return iu(e)}(t),n=i.message;void 0===e&&(e=Ss.INTERNAL,n="Unknown error status: "+t+" with message "+i.message),l=!0,h.eo(new Is(e,n)),u.close()}else ws("Connection","WebChannel received:",n),h.no(n)}})),f(s,cs.STAT_EVENT,(t=>{t.stat===ls.PROXY?ws("Connection","Detected buffering proxy"):t.stat===ls.NOPROXY&&ws("Connection","Detected no buffering proxy")})),setTimeout((()=>{h.Zr()}),0),h}}function jc(){return"undefined"!=typeof document?document:null}function qc(t){return new ku(t,!0)}class $c{constructor(t,e,n=1e3,r=1.5,i=6e4){this.js=t,this.timerId=e,this.lo=n,this.fo=r,this._o=i,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(t){this.cancel();const e=Math.floor(this.wo+this.To()),n=Math.max(0,Date.now()-this.yo),r=Math.max(0,e-n);r>0&&ws("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.wo} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,r,(()=>(this.yo=Date.now(),t()))),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class zc{constructor(t,e,n,r,i,s,o,a){this.js=t,this.Ao=n,this.Ro=r,this.bo=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new $c(t,e)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}async stop(){this.Do()&&await this.close(0)}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(()=>this.Mo())))}Oo(t){this.Fo(),this.stream.send(t)}async Mo(){if(this.Co())return this.close(0)}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}async close(t,e){this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():e&&e.code===Ss.RESOURCE_EXHAUSTED?(bs(e.toString()),bs("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):e&&e.code===Ss.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Jr(e)}Bo(){}auth(){this.state=1;const t=this.Lo(this.Po),e=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Po===e&&this.Uo(t,n)}),(e=>{t((()=>{const t=new Is(Ss.UNKNOWN,"Fetching auth token failed: "+e.message);return this.qo(t)}))}))}Uo(t,e){const n=this.Lo(this.Po);this.stream=this.Ko(t,e),this.stream.zr((()=>{n((()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,(()=>(this.Co()&&(this.state=3),Promise.resolve()))),this.listener.zr())))})),this.stream.Jr((t=>{n((()=>this.qo(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}xo(){this.state=5,this.So.Io((async()=>{this.state=0,this.start()}))}qo(t){return ws("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Lo(t){return e=>{this.js.enqueueAndForget((()=>this.Po===t?e():(ws("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Wc extends zc{constructor(t,e,n,r,i,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,s),this.wt=i}Ko(t,e){return this.bo.ho("Listen",t,e)}onMessage(t){this.So.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Es()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.dt?(Cs(void 0===e||"string"==typeof e),ho.fromBase64String(e||"")):(Cs(void 0===e||e instanceof Uint8Array),ho.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?Ss.UNKNOWN:iu(t.code);return new Is(e,t.message||"")}(o);n=new Eu(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Vu(t,r.document.name),s=Ou(r.document.updateTime),o=new Uo({mapValue:{fields:r.document.fields}}),a=qo.newFoundDocument(i,s,o),u=r.targetIds||[],c=r.removedTargetIds||[];n=new _u(u,c,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Vu(t,r.document),s=r.readTime?Ou(r.readTime):js.min(),o=qo.newNoDocument(i,s),a=r.removedTargetIds||[];n=new _u([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Vu(t,r.document),s=r.removedTargetIds||[];n=new _u([],s,i,null)}else{if(!("filter"in e))return Es();{e.filter;const t=e.filter;t.targetId;const r=t.count||0,i=new eu(r),s=t.targetId;n=new Au(s,i)}}return n}(this.wt,t),n=function(t){if(!("targetChange"in t))return js.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?js.min():e.readTime?Ou(e.readTime):js.min()}(t);return this.listener.Go(e,n)}Qo(t){const e={};e.database=Uu(this.wt),e.addTarget=function(t,e){let n;const r=e.target;return n=Ho(r)?{documents:$u(t,r)}:{query:zu(t,r)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Ru(t,e.resumeToken):e.snapshotVersion.compareTo(js.min())>0&&(n.readTime=Nu(t,e.snapshotVersion.toTimestamp())),n}(this.wt,t);const n=function(t,e){const n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Es()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,t);n&&(e.labels=n),this.Oo(e)}jo(t){const e={};e.database=Uu(this.wt),e.removeTarget=t,this.Oo(e)}}class Gc extends zc{constructor(t,e,n,r,i,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,s),this.wt=i,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(t,e){return this.bo.ho("Write",t,e)}onMessage(t){if(Cs(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Wo){this.So.reset();const e=function(t,e){return t&&t.length>0?(Cs(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?Ou(t.updateTime):Ou(e);return n.isEqual(js.min())&&(n=Ou(e)),new Fa(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=Ou(t.commitTime);return this.listener.Jo(n,e)}return Cs(!t.writeResults||0===t.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const t={};t.database=Uu(this.wt),this.Oo(t)}Ho(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof Ka)n={update:qu(t,e.key,e.value)};else if(e instanceof Za)n={delete:Bu(t,e.key)};else if(e instanceof Xa)n={update:qu(t,e.key,e.data),updateMask:Zu(e.fieldMask)};else{if(!(e instanceof tu))return Es();n={verify:Bu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof ka)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Na)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ma)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof La)return{fieldPath:e.field.canonicalString(),increment:n._t};throw Es()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Mu(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Es()}(t,e.precondition)),n}(this.wt,t)))};this.Oo(e)}}class Hc extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.bo=n,this.wt=r,this.Zo=!1}tu(){if(this.Zo)throw new Is(Ss.FAILED_PRECONDITION,"The client has already been terminated.")}ro(t,e,n){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.bo.ro(t,e,n,r,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Ss.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Is(Ss.UNKNOWN,t.toString())}))}ao(t,e,n,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.bo.ao(t,e,n,i,s,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Ss.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Is(Ss.UNKNOWN,t.toString())}))}terminate(){this.Zo=!0}}class Kc{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve()))))}uu(t){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ru("Offline")))}set(t){this.cu(),this.eu=0,"Online"===t&&(this.su=!1),this.ru(t)}ru(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ou(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(bs(e),this.su=!1):ws("OnlineStateTracker",e)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class Xc{constructor(t,e,n,r,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=i,this.du.Br((t=>{n.enqueueAndForget((async()=>{il(this)&&(ws("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=Ts(t);e.lu.add(4),await Yc(e),e._u.set("Unknown"),e.lu.delete(4),await Qc(e)}(this))}))})),this._u=new Kc(n,r)}}async function Qc(t){if(il(t))for(const e of t.fu)await e(!0)}async function Yc(t){for(const e of t.fu)await e(!1)}function Jc(t,e){const n=Ts(t);n.hu.has(e.targetId)||(n.hu.set(e.targetId,e),rl(n)?nl(n):_l(n).Co()&&tl(n,e))}function Zc(t,e){const n=Ts(t),r=_l(n);n.hu.delete(e),r.Co()&&el(n,e),0===n.hu.size&&(r.Co()?r.ko():il(n)&&n._u.set("Unknown"))}function tl(t,e){t.wu.Nt(e.targetId),_l(t).Qo(e)}function el(t,e){t.wu.Nt(e),_l(t).jo(e)}function nl(t){t.wu=new Tu({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),te:e=>t.hu.get(e)||null}),_l(t).start(),t._u.iu()}function rl(t){return il(t)&&!_l(t).Do()&&t.hu.size>0}function il(t){return 0===Ts(t).lu.size}function sl(t){t.wu=void 0}async function ol(t){t.hu.forEach(((e,n)=>{tl(t,e)}))}async function al(t,e){sl(t),rl(t)?(t._u.uu(e),nl(t)):t._u.set("Unknown")}async function ul(t,e,n){if(t._u.set("Online"),e instanceof Eu&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const r of e.targetIds)t.hu.has(r)&&(await t.remoteSyncer.rejectListen(r,n),t.hu.delete(r),t.wu.removeTarget(r))}(t,e)}catch(n){ws("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await cl(t,n)}else if(e instanceof _u?t.wu.Ut(e):e instanceof Au?t.wu.zt(e):t.wu.Gt(e),!n.isEqual(js.min()))try{const e=await kc(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.wu.Yt(e);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.hu.get(r);i&&t.hu.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((e=>{const n=t.hu.get(e);if(!n)return;t.hu.set(e,n.withResumeToken(ho.EMPTY_BYTE_STRING,n.snapshotVersion)),el(t,e);const r=new ic(n.target,e,1,n.sequenceNumber);tl(t,r)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){ws("RemoteStore","Failed to raise snapshot:",e),await cl(t,e)}}async function cl(t,e,n){if(!to(e))throw e;t.lu.add(1),await Yc(t),t._u.set("Offline"),n||(n=()=>kc(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ws("RemoteStore","Retrying IndexedDB access"),await n(),t.lu.delete(1),await Qc(t)}))}function ll(t,e){return e().catch((n=>cl(t,n,e)))}async function hl(t){const e=Ts(t),n=Al(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;fl(e);)try{const t=await Nc(e.localStore,r);if(null===t){0===e.au.length&&n.ko();break}r=t.batchId,dl(e,t)}catch(t){await cl(e,t)}pl(e)&&gl(e)}function fl(t){return il(t)&&t.au.length<10}function dl(t,e){t.au.push(e);const n=Al(t);n.Co()&&n.zo&&n.Ho(e.mutations)}function pl(t){return il(t)&&!Al(t).Do()&&t.au.length>0}function gl(t){Al(t).start()}async function ml(t){Al(t).Xo()}async function yl(t){const e=Al(t);for(const n of t.au)e.Ho(n.mutations)}async function vl(t,e,n){const r=t.au.shift(),i=nc.from(r,e,n);await ll(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await hl(t)}async function wl(t,e){e&&Al(t).zo&&await async function(t,e){if(function(t){switch(t){default:return Es();case Ss.CANCELLED:case Ss.UNKNOWN:case Ss.DEADLINE_EXCEEDED:case Ss.RESOURCE_EXHAUSTED:case Ss.INTERNAL:case Ss.UNAVAILABLE:case Ss.UNAUTHENTICATED:return!1;case Ss.INVALID_ARGUMENT:case Ss.NOT_FOUND:case Ss.ALREADY_EXISTS:case Ss.PERMISSION_DENIED:case Ss.FAILED_PRECONDITION:case Ss.ABORTED:case Ss.OUT_OF_RANGE:case Ss.UNIMPLEMENTED:case Ss.DATA_LOSS:return!0}}(n=e.code)&&n!==Ss.ABORTED){const n=t.au.shift();Al(t).No(),await ll(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await hl(t)}var n}(t,e),pl(t)&&gl(t)}async function bl(t,e){const n=Ts(t);n.asyncQueue.verifyOperationInProgress(),ws("RemoteStore","RemoteStore received new credentials");const r=il(n);n.lu.add(3),await Yc(n),r&&n._u.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.lu.delete(3),await Qc(n)}function _l(t){return t.mu||(t.mu=function(t,e,n){const r=Ts(t);return r.tu(),new Wc(e,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(t.datastore,t.asyncQueue,{zr:ol.bind(null,t),Jr:al.bind(null,t),Go:ul.bind(null,t)}),t.fu.push((async e=>{e?(t.mu.No(),rl(t)?nl(t):t._u.set("Unknown")):(await t.mu.stop(),sl(t))}))),t.mu}function Al(t){return t.gu||(t.gu=function(t,e,n){const r=Ts(t);return r.tu(),new Gc(e,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(t.datastore,t.asyncQueue,{zr:ml.bind(null,t),Jr:wl.bind(null,t),Yo:yl.bind(null,t),Jo:vl.bind(null,t)}),t.fu.push((async e=>{e?(t.gu.No(),await hl(t)):(await t.gu.stop(),t.au.length>0&&(ws("RemoteStore",`Stopping write stream with ${t.au.length} pending writes`),t.au=[]))}))),t.gu}class El{constructor(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,r,i){const s=Date.now()+n,o=new El(t,e,s,r,i);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Is(Ss.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cl(t,e){if(bs("AsyncQueue",`${e}: ${t}`),to(t))return new Is(Ss.UNAVAILABLE,`${e}: ${t}`);throw t}class Tl{constructor(t){this.comparator=t?(e,n)=>t(e,n)||Gs.comparator(e.key,n.key):(t,e)=>Gs.comparator(t.key,e.key),this.keyedMap=cu(),this.sortedSet=new so(this.comparator)}static emptySet(t){return new Tl(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Tl))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(!t.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new Tl;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class Sl{constructor(){this.yu=new so(Gs.comparator)}track(t){const e=t.doc.key,n=this.yu.get(e);n?0!==t.type&&3===n.type?this.yu=this.yu.insert(e,t):3===t.type&&1!==n.type?this.yu=this.yu.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.yu=this.yu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.yu=this.yu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.yu=this.yu.remove(e):1===t.type&&2===n.type?this.yu=this.yu.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.yu=this.yu.insert(e,{type:2,doc:t.doc}):Es():this.yu=this.yu.insert(e,t)}pu(){const t=[];return this.yu.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Il{constructor(t,e,n,r,i,s,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(t,e,n,r){const i=[];return e.forEach((t=>{i.push({type:0,doc:t})})),new Il(t,e,Tl.emptySet(e),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ya(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class xl{constructor(){this.Iu=void 0,this.listeners=[]}}class Dl{constructor(){this.queries=new su((t=>va(t)),ya),this.onlineState="Unknown",this.Tu=new Set}}function kl(t,e){const n=Ts(t);let r=!1;for(const t of e){const e=t.query,i=n.queries.get(e);if(i){for(const e of i.listeners)e.Au(t)&&(r=!0);i.Iu=t}}r&&Rl(n)}function Nl(t,e,n){const r=Ts(t),i=r.queries.get(e);if(i)for(const t of i.listeners)t.onError(n);r.queries.delete(e)}function Rl(t){t.Tu.forEach((t=>{t.next()}))}class Ml{constructor(t,e,n){this.query=t,this.Ru=e,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=n||{}}Au(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Il(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.bu?this.vu(t)&&(this.Ru.next(t),e=!0):this.Vu(t,this.onlineState)&&(this.Su(t),e=!0),this.Pu=t,e}onError(t){this.Ru.error(t)}Eu(t){this.onlineState=t;let e=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,t)&&(this.Su(this.Pu),e=!0),e}Vu(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return!(this.options.Du&&n||t.docs.isEmpty()&&"Offline"!==e)}vu(t){if(t.docChanges.length>0)return!0;const e=this.Pu&&this.Pu.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}Su(t){t=Il.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.bu=!0,this.Ru.next(t)}}class Ol{constructor(t){this.key=t}}class Ll{constructor(t){this.key=t}}class Pl{constructor(t,e){this.query=t,this.Fu=e,this.$u=null,this.current=!1,this.Bu=mu(),this.mutatedKeys=mu(),this.Lu=_a(t),this.Uu=new Tl(this.Lu)}get qu(){return this.Fu}Ku(t,e){const n=e?e.Gu:new Sl,r=e?e.Uu:this.Uu;let i=e?e.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,u="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((t,e)=>{const c=r.get(t),l=ba(this.query,e)?e:null,h=!!c&&this.mutatedKeys.has(c.key),f=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let d=!1;c&&l?c.data.isEqual(l.data)?h!==f&&(n.track({type:3,doc:l}),d=!0):this.Qu(c,l)||(n.track({type:2,doc:l}),d=!0,(a&&this.Lu(l,a)>0||u&&this.Lu(l,u)<0)&&(o=!0)):!c&&l?(n.track({type:0,doc:l}),d=!0):c&&!l&&(n.track({type:1,doc:c}),d=!0,(a||u)&&(o=!0)),d&&(l?(s=s.add(l),i=f?i.add(t):i.delete(t)):(s=s.delete(t),i=i.delete(t)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{Uu:s,Gu:n,Mi:o,mutatedKeys:i}}Qu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const r=this.Uu;this.Uu=t.Uu,this.mutatedKeys=t.mutatedKeys;const i=t.Gu.pu();i.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Es()}};return n(t)-n(e)}(t.type,e.type)||this.Lu(t.doc,e.doc))),this.ju(n);const s=e?this.Wu():[],o=0===this.Bu.size&&this.current?1:0,a=o!==this.$u;return this.$u=o,0!==i.length||a?{snapshot:new Il(this.query,t.Uu,r,i,t.mutatedKeys,0===o,a,!1),zu:s}:{zu:s}}Eu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new Sl,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(t){return!this.Fu.has(t)&&!!this.Uu.has(t)&&!this.Uu.get(t).hasLocalMutations}ju(t){t&&(t.addedDocuments.forEach((t=>this.Fu=this.Fu.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.Fu=this.Fu.delete(t))),this.current=t.current)}Wu(){if(!this.current)return[];const t=this.Bu;this.Bu=mu(),this.Uu.forEach((t=>{this.Hu(t.key)&&(this.Bu=this.Bu.add(t.key))}));const e=[];return t.forEach((t=>{this.Bu.has(t)||e.push(new Ll(t))})),this.Bu.forEach((n=>{t.has(n)||e.push(new Ol(n))})),e}Ju(t){this.Fu=t.ji,this.Bu=mu();const e=this.Ku(t.documents);return this.applyChanges(e,!0)}Yu(){return Il.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class Bl{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Vl{constructor(t){this.key=t,this.Xu=!1}}class Fl{constructor(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Zu={},this.tc=new su((t=>va(t)),ya),this.ec=new Map,this.nc=new Set,this.sc=new so(Gs.comparator),this.ic=new Map,this.rc=new yc,this.oc={},this.uc=new Map,this.cc=hc.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}async function Ul(t,e){const n=function(t){const e=Ts(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ql.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zl.bind(null,e),e.Zu.Go=kl.bind(null,e.eventManager),e.Zu.lc=Nl.bind(null,e.eventManager),e}(t);let r,i;const s=n.tc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Yu();else{const t=await function(t,e){const n=Ts(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let r;return n.Vs.getTargetData(t,e).next((i=>i?(r=i,Zs.resolve(r)):n.Vs.allocateTargetId(t).next((i=>(r=new ic(e,i,0,t.currentSequenceNumber),n.Vs.addTargetData(t,r).next((()=>r)))))))})).then((t=>{const r=n.$i.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(t.targetId,t),n.Bi.set(e,t.targetId)),t}))}(n.localStore,ga(e));n.isPrimaryClient&&Jc(n.remoteStore,t);const s=n.sharedClientState.addLocalQueryTarget(t.targetId);r=t.targetId,i=await async function(t,e,n,r){t.hc=(e,n,r)=>async function(t,e,n,r){let i=e.view.Ku(n);i.Mi&&(i=await Mc(t.localStore,e.query,!1).then((({documents:t})=>e.view.Ku(t,i))));const s=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,s);return Yl(t,e.targetId,o.zu),o.snapshot}(t,e,n,r);const i=await Mc(t.localStore,e,!0),s=new Pl(e,i.ji),o=s.Ku(i.documents),a=bu.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=s.applyChanges(o,t.isPrimaryClient,a);Yl(t,n,u.zu);const c=new Bl(e,n,s);return t.tc.set(e,c),t.ec.has(n)?t.ec.get(n).push(e):t.ec.set(n,[e]),u.snapshot}(n,e,r,"current"===s)}return i}async function jl(t,e){const n=Ts(t),r=n.tc.get(e),i=n.ec.get(r.targetId);if(i.length>1)return n.ec.set(r.targetId,i.filter((t=>!ya(t,e)))),void n.tc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Rc(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Zc(n.remoteStore,r.targetId),Xl(n,r.targetId)})).catch(Js)):(Xl(n,r.targetId),await Rc(n.localStore,r.targetId,!0))}async function ql(t,e){const n=Ts(t);try{const t=await function(t,e){const n=Ts(t),r=e.snapshotVersion;let i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;const o=[];e.targetChanges.forEach(((s,a)=>{const u=i.get(a);if(!u)return;o.push(n.Vs.removeMatchingKeys(t,s.removedDocuments,a).next((()=>n.Vs.addMatchingKeys(t,s.addedDocuments,a))));let c=u.withSequenceNumber(t.currentSequenceNumber);e.targetMismatches.has(a)?c=c.withResumeToken(ho.EMPTY_BYTE_STRING,js.min()).withLastLimboFreeSnapshotVersion(js.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(u,c,s)&&o.push(n.Vs.updateTargetData(t,c))}));let a=au(),u=mu();if(e.documentUpdates.forEach((r=>{e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),o.push(function(t,e,n){let r=mu(),i=mu();return n.forEach((t=>r=r.add(t))),e.getEntries(t,r).next((t=>{let r=au();return n.forEach(((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(js.min())?(e.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),r=r.insert(n,s)):ws("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{Gi:r,Qi:i}}))}(t,s,e.documentUpdates).next((t=>{a=t.Gi,u=t.Qi}))),!r.isEqual(js.min())){const e=n.Vs.getLastRemoteSnapshotVersion(t).next((e=>n.Vs.setTargetsMetadata(t,t.currentSequenceNumber,r)));o.push(e)}return Zs.waitFor(o).next((()=>s.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,u))).next((()=>a))})).then((t=>(n.$i=i,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const r=n.ic.get(e);r&&(Cs(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Xu=!0:t.modifiedDocuments.size>0?Cs(r.Xu):t.removedDocuments.size>0&&(Cs(r.Xu),r.Xu=!1))})),await th(n,t,e)}catch(t){await Js(t)}}function $l(t,e,n){const r=Ts(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const t=[];r.tc.forEach(((n,r)=>{const i=r.view.Eu(e);i.snapshot&&t.push(i.snapshot)})),function(t,e){const n=Ts(t);n.onlineState=e;let r=!1;n.queries.forEach(((t,n)=>{for(const t of n.listeners)t.Eu(e)&&(r=!0)})),r&&Rl(n)}(r.eventManager,e),t.length&&r.Zu.Go(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function zl(t,e,n){const r=Ts(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ic.get(e),s=i&&i.key;if(s){let t=new so(Gs.comparator);t=t.insert(s,qo.newNoDocument(s,js.min()));const n=mu().add(s),i=new wu(js.min(),new Map,new uo(Vs),t,n);await ql(r,i),r.sc=r.sc.remove(s),r.ic.delete(e),Zl(r)}else await Rc(r.localStore,e,!1).then((()=>Xl(r,e,n))).catch(Js)}async function Wl(t,e){const n=Ts(t),r=e.batch.batchId;try{const t=await function(t,e){const n=Ts(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const r=e.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){const i=n.batch,s=i.keys();let o=Zs.resolve();return s.forEach((t=>{o=o.next((()=>r.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);Cs(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),r.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,i)))}(n,t,e,i).next((()=>i.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=mu();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,r)))}))}(n.localStore,e);Kl(n,r,null),Hl(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await th(n,t)}catch(t){await Js(t)}}async function Gl(t,e,n){const r=Ts(t);try{const t=await function(t,e){const n=Ts(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let r;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(Cs(null!==e),r=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,r))).next((()=>n.localDocuments.getDocuments(t,r)))}))}(r.localStore,e);Kl(r,e,n),Hl(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await th(r,t)}catch(n){await Js(n)}}function Hl(t,e){(t.uc.get(e)||[]).forEach((t=>{t.resolve()})),t.uc.delete(e)}function Kl(t,e,n){const r=Ts(t);let i=r.oc[r.currentUser.toKey()];if(i){const t=i.get(e);t&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function Xl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.ec.get(e))t.tc.delete(r),n&&t.Zu.lc(r,n);t.ec.delete(e),t.isPrimaryClient&&t.rc.us(e).forEach((e=>{t.rc.containsKey(e)||Ql(t,e)}))}function Ql(t,e){t.nc.delete(e.path.canonicalString());const n=t.sc.get(e);null!==n&&(Zc(t.remoteStore,n),t.sc=t.sc.remove(e),t.ic.delete(n),Zl(t))}function Yl(t,e,n){for(const r of n)r instanceof Ol?(t.rc.addReference(r.key,e),Jl(t,r)):r instanceof Ll?(ws("SyncEngine","Document no longer in limbo: "+r.key),t.rc.removeReference(r.key,e),t.rc.containsKey(r.key)||Ql(t,r.key)):Es()}function Jl(t,e){const n=e.key,r=n.path.canonicalString();t.sc.get(n)||t.nc.has(r)||(ws("SyncEngine","New document in limbo: "+n),t.nc.add(r),Zl(t))}function Zl(t){for(;t.nc.size>0&&t.sc.size<t.maxConcurrentLimboResolutions;){const e=t.nc.values().next().value;t.nc.delete(e);const n=new Gs($s.fromString(e)),r=t.cc.next();t.ic.set(r,new Vl(n)),t.sc=t.sc.insert(n,r),Jc(t.remoteStore,new ic(ga(ca(n.path)),r,2,eo.ot))}}async function th(t,e,n){const r=Ts(t),i=[],s=[],o=[];r.tc.isEmpty()||(r.tc.forEach(((t,a)=>{o.push(r.hc(a,e,n).then((t=>{if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);const e=Sc.Vi(a.targetId,t);s.push(e)}})))})),await Promise.all(o),r.Zu.Go(i),await async function(t,e){const n=Ts(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>Zs.forEach(e,(e=>Zs.forEach(e.Pi,(r=>n.persistence.referenceDelegate.addReference(t,e.targetId,r))).next((()=>Zs.forEach(e.vi,(r=>n.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))))))}catch(t){if(!to(t))throw t;ws("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.$i.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.$i=n.$i.insert(e,i)}}}(r.localStore,s))}async function eh(t,e){const n=Ts(t);if(!n.currentUser.isEqual(e)){ws("SyncEngine","User change. New user:",e.toKey());const t=await Dc(n.localStore,e);n.currentUser=e,function(t,e){t.uc.forEach((t=>{t.forEach((t=>{t.reject(new Is(Ss.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.uc.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await th(n,t.Ki)}}function nh(t,e){const n=Ts(t),r=n.ic.get(e);if(r&&r.Xu)return mu().add(r.key);{let t=mu();const r=n.ec.get(e);if(!r)return t;for(const e of r){const r=n.tc.get(e);t=t.unionWith(r.view.qu)}return t}}function rh(t){const e=Ts(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Wl.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Gl.bind(null,e),e}class ih{constructor(){this.synchronizeTabs=!1}async initialize(t){this.wt=qc(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),await this.persistence.start(),this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore)}mc(t,e){return null}gc(t,e){return null}wc(t){return function(t,e,n,r){return new xc(t,e,n,r)}(this.persistence,new Ic,t.initialUser,this.wt)}_c(t){return new Ec(Tc.Os,this.wt)}dc(t){return new Lc}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class sh{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>$l(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=eh.bind(null,this.syncEngine),await async function(t,e){const n=Ts(t);e?(n.lu.delete(2),await Qc(n)):e||(n.lu.add(2),await Yc(n),n._u.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Dl}createDatastore(t){const e=qc(t.databaseInfo.databaseId),n=(r=t.databaseInfo,new Uc(r));var r;return function(t,e,n,r){return new Hc(t,e,n,r)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=t=>$l(this.syncEngine,t,0),s=Bc.V()?new Bc:new Pc,new Xc(e,n,r,i,s);var e,n,r,i,s}createSyncEngine(t,e){return function(t,e,n,r,i,s,o){const a=new Fl(t,e,n,r,i,s);return o&&(a.ac=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=Ts(t);ws("RemoteStore","RemoteStore shutting down."),e.lu.add(5),await Yc(e),e.du.shutdown(),e._u.set("Unknown")}(this.remoteStore)}}class oh{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ic(this.observer.next,t)}error(t){this.observer.error?this.Ic(this.observer.error,t):bs("Uncaught Error in snapshot listener:",t)}Tc(){this.muted=!0}Ic(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class ah{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=gs.UNAUTHENTICATED,this.clientId=Bs.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{ws("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(ws("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Is(Ss.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Cl(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function uh(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){return t.offlineComponents||(ws("FirestoreClient","Using default OfflineComponentProvider"),await async function(t,e){t.asyncQueue.verifyOperationInProgress(),ws("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async t=>{r.isEqual(t)||(await Dc(e.localStore,t),r=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t.offlineComponents=e}(t,new ih)),t.offlineComponents}(t);ws("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener((t=>bl(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>bl(e.remoteStore,n))),t.onlineComponents=e}async function ch(t){return t.onlineComponents||(ws("FirestoreClient","Using default OnlineComponentProvider"),await uh(t,new sh)),t.onlineComponents}async function lh(t){const e=await ch(t),n=e.eventManager;return n.onListen=Ul.bind(null,e.syncEngine),n.onUnlisten=jl.bind(null,e.syncEngine),n}function hh(t,e,n={}){const r=new xs;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,r,i){const s=new oh({next:n=>{e.enqueueAndForget((()=>async function(t,e){const n=Ts(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const t=s.listeners.indexOf(e);t>=0&&(s.listeners.splice(t,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}(t,o))),n.fromCache&&"server"===r.source?i.reject(new Is(Ss.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:t=>i.reject(t)}),o=new Ml(n,s,{includeMetadataChanges:!0,Du:!0});return async function(t,e){const n=Ts(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new xl),i)try{s.Iu=await n.onListen(r)}catch(t){const n=Cl(t,`Initialization of query '${wa(e.query)}' failed`);return void e.onError(n)}n.queries.set(r,s),s.listeners.push(e),e.Eu(n.onlineState),s.Iu&&e.Au(s.Iu)&&Rl(n)}(t,o)}(await lh(t),t.asyncQueue,e,n,r))),r.promise}const fh=new Map;function dh(t,e,n){if(!n)throw new Is(Ss.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ph(t){if(!Gs.isDocumentKey(t))throw new Is(Ss.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function gh(t){if(Gs.isDocumentKey(t))throw new Is(Ss.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function mh(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":Es()}function yh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Is(Ss.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=mh(t);throw new Is(Ss.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class vh{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Is(Ss.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Is(Ss.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(t,e,n,r){if(!0===e&&!0===r)throw new Is(Ss.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class wh{constructor(t,e,n){this._authCredentials=e,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vh({}),this._settingsFrozen=!1,t instanceof _o?this._databaseId=t:(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Is(Ss.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _o(t.options.projectId)}(t))}get app(){if(!this._app)throw new Is(Ss.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Is(Ss.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vh(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new ks;switch(t.type){case"gapi":const e=t.client;return Cs(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Ms(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Is(Ss.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=fh.get(t);e&&(ws("ComponentProvider","Removing Datastore"),fh.delete(t),e.terminate())}(this),Promise.resolve()}}class bh{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ah(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new bh(this.firestore,t,this._key)}}class _h{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new _h(this.firestore,t,this._query)}}class Ah extends _h{constructor(t,e,n){super(t,e,ca(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new bh(this.firestore,null,new Gs(t))}withConverter(t){return new Ah(this.firestore,t,this._path)}}function Eh(t,e,...n){if(t=rt(t),1===arguments.length&&(e=Bs.I()),dh("doc","path",e),t instanceof wh){const r=$s.fromString(e,...n);return ph(r),new bh(t,null,new Gs(r))}{if(!(t instanceof bh||t instanceof Ah))throw new Is(Ss.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($s.fromString(e,...n));return ph(r),new bh(t.firestore,t instanceof Ah?t.converter:null,new Gs(r))}}class Ch{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new $c(this,"async_queue_retry"),this.Kc=()=>{const t=jc();t&&ws("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const t=jc();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Gc(),this.Qc(t)}enterRestrictedMode(t){if(!this.Fc){this.Fc=!0,this.Uc=t||!1;const e=jc();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Kc)}}enqueue(t){if(this.Gc(),this.Fc)return new Promise((()=>{}));const e=new xs;return this.Qc((()=>this.Fc&&this.Uc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Oc.push(t),this.jc())))}async jc(){if(0!==this.Oc.length){try{await this.Oc[0](),this.Oc.shift(),this.So.reset()}catch(t){if(!to(t))throw t;ws("AsyncQueue","Operation failed with retryable error: "+t)}this.Oc.length>0&&this.So.Io((()=>this.jc()))}}Qc(t){const e=this.Mc.then((()=>(this.Lc=!0,t().catch((t=>{this.Bc=t,this.Lc=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw bs("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.Lc=!1,t))))));return this.Mc=e,e}enqueueAfterDelay(t,e,n){this.Gc(),this.qc.indexOf(t)>-1&&(e=0);const r=El.createAndSchedule(this,t,e,n,(t=>this.Wc(t)));return this.$c.push(r),r}Gc(){this.Bc&&Es()}verifyOperationInProgress(){}async zc(){let t;do{t=this.Mc,await t}while(t!==this.Mc)}Hc(t){for(const e of this.$c)if(e.timerId===t)return!0;return!1}Jc(t){return this.zc().then((()=>{this.$c.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.$c)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.zc()}))}Yc(t){this.qc.push(t)}Wc(t){const e=this.$c.indexOf(t);this.$c.splice(e,1)}}class Th extends wh{constructor(t,e,n){super(t,e,n),this.type="firestore",this._queue=new Ch,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Ih(this),this._firestoreClient.terminate()}}function Sh(t){return t._firestoreClient||Ih(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Ih(t){var e;const n=t._freezeSettings(),r=function(t,e,n,r){return new bo(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new ah(t._authCredentials,t._appCheckCredentials,t._queue,r)}class xh{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Is(Ss.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ws(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Dh{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Dh(ho.fromBase64String(t))}catch(t){throw new Is(Ss.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Dh(ho.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class kh{constructor(t){this._methodName=t}}class Nh{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Is(Ss.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Is(Ss.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Vs(this._lat,t._lat)||Vs(this._long,t._long)}}const Rh=/^__.*__$/;class Mh{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Xa(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ka(t,this.data,e,this.fieldTransforms)}}function Oh(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Es()}}class Lh{constructor(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.wt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Xc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(t){return new Lh(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ta({path:n,na:!1});return r.sa(t),r}ia(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ta({path:n,na:!1});return r.Xc(),r}ra(t){return this.ta({path:void 0,na:!0})}oa(t){return Hh(t,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Xc(){if(this.path)for(let t=0;t<this.path.length;t++)this.sa(this.path.get(t))}sa(t){if(0===t.length)throw this.oa("Document fields must not be empty");if(Oh(this.Zc)&&Rh.test(t))throw this.oa('Document fields cannot begin and end with "__"')}}class Ph{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.wt=n||qc(t)}aa(t,e,n,r=!1){return new Lh({Zc:t,methodName:e,ca:n,path:Ws.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Bh(t){const e=t._freezeSettings(),n=qc(t._databaseId);return new Ph(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Vh(t,e,n,r,i,s={}){const o=t.aa(s.merge||s.mergeFields?2:0,e,n,i);$h("Data must be an object, but it was:",o,r);const a=jh(r,o);let u,c;if(s.merge)u=new lo(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const r of s.mergeFields){const i=zh(e,r,n);if(!o.contains(i))throw new Is(Ss.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Kh(t,i)||t.push(i)}u=new lo(t),c=o.fieldTransforms.filter((t=>u.covers(t.field)))}else u=null,c=o.fieldTransforms;return new Mh(new Uo(a),u,c)}class Fh extends kh{_toFieldTransform(t){return new Va(t.path,new ka)}isEqual(t){return t instanceof Fh}}function Uh(t,e){if(qh(t=rt(t)))return $h("Unsupported field value:",e,t),jh(t,e);if(t instanceof kh)return function(t,e){if(!Oh(e.Zc))throw e.oa(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.oa(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,e){const n=[];let r=0;for(const i of t){let t=Uh(i,e.ra(r));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=rt(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ta(e.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Us.fromDate(t);return{timestampValue:Nu(e.wt,n)}}if(t instanceof Us){const n=new Us(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Nu(e.wt,n)}}if(t instanceof Nh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Dh)return{bytesValue:Ru(e.wt,t._byteString)};if(t instanceof bh){const n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.oa(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Lu(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.oa(`Unsupported field value: ${mh(t)}`)}(t,e)}function jh(t,e){const n={};return io(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ro(t,((t,r)=>{const i=Uh(r,e.ea(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function qh(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Us||t instanceof Nh||t instanceof Dh||t instanceof bh||t instanceof kh)}function $h(t,e,n){if(!qh(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const r=mh(n);throw"an object"===r?e.oa(t+" a custom object"):e.oa(t+" "+r)}}function zh(t,e,n){if((e=rt(e))instanceof xh)return e._internalPath;if("string"==typeof e)return Gh(t,e);throw Hh("Field path arguments must be of type string or ",t,!1,void 0,n)}const Wh=new RegExp("[~\\*/\\[\\]]");function Gh(t,e,n){if(e.search(Wh)>=0)throw Hh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xh(...e.split("."))._internalPath}catch(r){throw Hh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Is(Ss.INVALID_ARGUMENT,a+t+u)}function Kh(t,e){return t.some((t=>t.isEqual(e)))}class Xh{constructor(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new bh(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Qh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Yh("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Qh extends Xh{data(){return super.data()}}function Yh(t,e){return"string"==typeof e?Gh(t,e):e instanceof xh?e._internalPath:e._delegate._internalPath}class Jh{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Zh extends Xh{constructor(t,e,n,r,i,s){super(t,e,n,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new tf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Yh("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class tf extends Zh{data(t={}){return super.data(t)}}class ef{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Jh(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new tf(this._firestore,this._userDataWriter,n.key,n,new Jh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Is(Ss.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>({type:"added",doc:new tf(t._firestore,t._userDataWriter,n.doc.key,n.doc,new Jh(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:e++})))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const r=new tf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Jh(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let i=-1,s=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:nf(e.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function nf(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Es()}}class rf{}class sf extends rf{constructor(t,e,n){super(),this.fa=t,this.da=e,this._a=n,this.type="where"}_apply(t){const e=Bh(t.firestore),n=function(t,e,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Is(Ss.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){cf(o,s);const e=[];for(const n of o)e.push(uf(r,t,n));a={arrayValue:{values:e}}}else a=uf(r,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||cf(o,s),a=function(t,e,n,r=!1){return Uh(n,t.aa(r?4:3,e))}(n,"where",o,"in"===s||"not-in"===s);const u=Ko.create(i,s,a);return function(t,e){if(e.ht()){const n=fa(t);if(null!==n&&!n.isEqual(e.field))throw new Is(Ss.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${e.field.toString()}'`);const r=ha(t);null!==r&&lf(0,e.field,r)}const n=function(t,e){for(const n of t.filters)if(e.indexOf(n.op)>=0)return n.op;return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new Is(Ss.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Is(Ss.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}(t,u),u}(t._query,0,e,t.firestore._databaseId,this.fa,this.da,this._a);return new _h(t.firestore,t.converter,function(t,e){const n=t.filters.concat([e]);return new ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))}}class of extends rf{constructor(t,e){super(),this.fa=t,this.wa=e,this.type="orderBy"}_apply(t){const e=function(t,e,n){if(null!==t.startAt)throw new Is(Ss.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Is(Ss.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new ia(e,n);return function(t,e){if(null===ha(t)){const n=fa(t);null!==n&&lf(0,n,e.field)}}(t,r),r}(t._query,this.fa,this.wa);return new _h(t.firestore,t.converter,function(t,e){const n=t.explicitOrderBy.concat([e]);return new ua(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}class af extends rf{constructor(t,e,n){super(),this.type=t,this.ma=e,this.ga=n}_apply(t){return new _h(t.firestore,t.converter,ma(t._query,this.ma,this.ga))}}function uf(t,e,n){if("string"==typeof(n=rt(n))){if(""===n)throw new Is(Ss.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!da(e)&&-1!==n.indexOf("/"))throw new Is(Ss.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child($s.fromString(n));if(!Gs.isDocumentKey(r))throw new Is(Ss.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ro(t,new Gs(r))}if(n instanceof bh)return Ro(t,n._key);throw new Is(Ss.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mh(n)}.`)}function cf(t,e){if(!Array.isArray(t)||0===t.length)throw new Is(Ss.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new Is(Ss.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function lf(t,e,n){if(!n.isEqual(e))throw new Is(Ss.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class hf{convertValue(t,e="none"){switch(To(t)){case 0:return null;case 1:return t.booleanValue;case 2:return go(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(mo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Es()}}convertObject(t,e){const n={};return ro(t.fields,((t,r)=>{n[t]=this.convertValue(r,e)})),n}convertGeoPoint(t){return new Nh(go(t.latitude),go(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=vo(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(wo(t));default:return null}}convertTimestamp(t){const e=po(t);return new Us(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=$s.fromString(t);Cs(tc(n));const r=new _o(n.get(1),n.get(3)),i=new Gs(n.popFirst(5));return r.isEqual(e)||bs(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}class ff extends hf{constructor(t){super(),this.firestore=t}convertBytes(t){return new Dh(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new bh(this.firestore,null,e)}}function df(t,e){return function(t,e){const n=new xs;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const r=rh(t);try{const t=await function(t,e){const n=Ts(t),r=Us.now(),i=e.reduce(((t,e)=>t.add(e.key)),mu());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=au(),u=mu();return n.Ui.getEntries(t,i).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(u=u.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((i=>{s=i;const o=[];for(const t of e){const e=Ga(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new Xa(t.key,e,jo(e.value.mapValue),Ua.exists(!0)))}return n.mutationQueue.addMutationBatch(t,r,o,e)})).next((e=>{o=e;const r=e.applyToLocalDocumentSet(s,u);return n.documentOverlayCache.saveOverlays(t,e.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:lu(s)})))}(r.localStore,e);r.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let r=t.oc[t.currentUser.toKey()];r||(r=new so(Vs)),r=r.insert(e,n),t.oc[t.currentUser.toKey()]=r}(r,t.batchId,n),await th(r,t.changes),await hl(r.remoteStore)}catch(t){const e=Cl(t,"Failed to persist write");n.reject(e)}}(await function(t){return ch(t).then((t=>t.syncEngine))}(t),e,n))),n.promise}(Sh(t),e)}!function(t,e=!0){ms="9.9.2",jt(new it("firestore",((t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=new Th(r,new Ns(t.getProvider("auth-internal")),new Ls(t.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:e},n),i._setSettings(n),i}),"PUBLIC")),zt(ps,"3.4.14",t),zt(ps,"3.4.14","esm2017")}();var pf=function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{u(r.next(t))}catch(t){s(t)}}function a(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}u((r=r.apply(t,e||[])).next())}))};const gf=new class{constructor(){!function(t,e={}){"object"!=typeof e&&(e={name:e});const n=Object.assign({name:Pt,automaticDataCollectionEnabled:!1},e),r=n.name;if("string"!=typeof r||!r)throw qt.create("bad-app-name",{appName:String(r)});const i=Vt.get(r);if(i){if(et(t,i.options)&&et(n,i.config))return i;throw qt.create("duplicate-app",{appName:r})}const s=new at(r);for(const t of Ft.values())s.addComponent(t);const o=new $t(t,n,s);Vt.set(r,o)}({apiKey:"AIzaSyDDOpqVOYyNZg1jfpVlHkmOTdB26C2o6Bg",authDomain:"tetris-42db2.firebaseapp.com",projectId:"tetris-42db2",storageBucket:"tetris-42db2.appspot.com",messagingSenderId:"946992964471",appId:"1:946992964471:web:ee59687f2f59c52ca0f772",measurementId:"G-CMS24Y7R0P"}),this.db=function(t=function(t=Pt){const e=Vt.get(t);if(!e)throw qt.create("no-app",{appName:t});return e}()){return function(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}(t,"firestore").getImmediate()}(),this.colRef=function(t,e,...n){if(t=rt(t),dh("collection","path",e),t instanceof wh){const r=$s.fromString(e,...n);return gh(r),new Ah(t,null,r)}{if(!(t instanceof bh||t instanceof Ah))throw new Is(Ss.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($s.fromString(e,...n));return gh(r),new Ah(t.firestore,null,r)}}(this.db,"highscores")}fetchHighScores(){return pf(this,void 0,void 0,(function*(){try{const t=function(t,...e){for(const n of e)t=n._apply(t);return t}(this.colRef,function(t,e,n){const r=Yh("where","score");return new sf(r,">",0)}(),function(t,e="asc"){const n=e,r=Yh("orderBy","score");return new of(r,n)}(0,"desc"),(function(t,e){if(e<=0)throw new Is(Ss.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}("limit",10),new af("limit",10,"F"))),e=yield function(t){t=yh(t,_h);const e=yh(t.firestore,Th),n=Sh(e),r=new ff(e);return function(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Is(Ss.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),hh(n,t._query).then((n=>new ef(e,r,t,n)))}(t),n=e.docs.map((t=>{const e=t.data(),{id:n}=t,{name:r,score:i,createdAt:s}=e;let o="..";return s instanceof Us&&(o=function(t,e){return I(1,arguments),G(t,Date.now(),e)}(s.toDate(),{addSuffix:!0})),{id:n,name:r,score:i,createdAt:o}}));return n}catch(t){throw console.error("Error getting highscores:",t),t}}))}storeHighScore(t,e){return pf(this,void 0,void 0,(function*(){try{const n={name:t,score:e,createdAt:new Fh("serverTimestamp")};yield function(t,e){const n=yh(t.firestore,Th),r=Eh(t),i=function(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}(t.converter,e);return df(n,[Vh(Bh(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Ua.exists(!1))]).then((()=>r))}(this.colRef,n);const r=yield this.fetchHighScores();if(r.length>=10){const t=r[r.length-1],e=Eh(this.db,"highscores",t.id);yield function(t){return df(yh(t.firestore,Th),[new Za(t._key,Ua.none())])}(e)}}catch(t){console.error("Error:",t)}}))}};const mf=t=>function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{u(r.next(t))}catch(t){s(t)}}function a(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}u((r=r.apply(t,e||[])).next())}))}(void 0,void 0,void 0,(function*(){const e=yield new Promise((t=>{t([{id:"Xv3XaXjOBd9CUa0uk7Sw",name:"Player 1",score:999,createdAt:(new Date).toLocaleDateString()}])})),n=g("#scores-list",t);n.innerHTML="",e.forEach(((t,e)=>{const r=m("li");r.innerHTML=`${e+1}. ${t.name}: ${t.score} <span class="${C.date}">${t.createdAt}</span>`,n.appendChild(r)}))}));var yf=n(753),vf={};vf.styleTagTransform=f(),vf.setAttributes=u(),vf.insert=o().bind(null,"head"),vf.domAPI=i(),vf.insertStyleElement=l(),e()(yf.A,vf);const wf=yf.A&&yf.A.locals?yf.A.locals:void 0,bf=(t,e="Paused",n="Resume")=>{const r=g("#menu"),i=g("#heading",r),s=g("#start",r),o=g("#play",r);t?(i.innerText=e,o.innerText=n,r.style.display="block",o.style.display="block",s.style.display="none"):r.style.display="none"};var _f=n(543);const Af=["O","I","S","Z","L","J","T"],Ef=["purple","yellow","orange","blue","cyan","green","red"];class Cf{constructor(){this.matrix=[],this.pieceType=null}updatePiece(t){this.matrix=t.matrix,this.pieceType=t.pieceType}static createRandomPiece(){const t=(0,_f.random)(0,Af.length-1,!1),e=new Cf;return e.pieceType=Af[t],e.matrix=y(e.pieceType),e}}const Tf=Cf,Sf=class extends Tf{constructor(t){super(),this.stack=t,this.offsetY=0,this.offsetX=4,this.updatePiece(Tf.createRandomPiece())}hardDrop(t){return this.offsetY=t,!0}softDrop(){return this.offsetY+=1,!!this.stack.stackCollision(this.matrix,this.offsetY,this.offsetX)&&(this.offsetY-=1,!0)}goRight(){this.offsetX+=1,(this.rightWallCollision()||this.stack.stackCollision(this.matrix,this.offsetY,this.offsetX))&&(this.offsetX-=1)}goLeft(){this.offsetX-=1,(this.leftWallCollision()||this.stack.stackCollision(this.matrix,this.offsetY,this.offsetX))&&(this.offsetX+=1)}rotateRight(){const t=[];for(let e=0;e<this.matrix.length;e+=1)t[e]=[...this.matrix[e]];const e=this.matrix.length-1,n=this.matrix[0].length-1;for(let r=0;r<=e;r+=1)for(let i=0;i<=n;i+=1)this.matrix[i][e-r]=t[r][i];for(;this.leftWallCollision();)this.offsetX+=1;for(;this.rightWallCollision();)this.offsetX-=1;if(this.stack.stackCollision(this.matrix,this.offsetY,this.offsetX))for(let e=0;e<this.matrix.length;e+=1)this.matrix[e]=[...t[e]]}leftWallCollision(){for(let t=0;t<this.matrix.length;t+=1)for(let e=0;e<this.matrix[t].length;e+=1)if(0!==this.matrix[t][e]&&this.offsetX+e<0)return!0;return!1}rightWallCollision(){for(let t=0;t<this.matrix.length;t+=1)for(let e=0;e<this.matrix[t].length;e+=1)if(0!==this.matrix[t][e]&&this.offsetX+e>=this.stack.matrix[0].length)return!0;return!1}updatePiece(t){super.updatePiece(t),this.offsetY=0,this.offsetX=4}},If=class{constructor(){this.createMatrix=(t,e)=>{this.matrix=Array.from({length:t},(()=>new Array(e).fill(0)))},this.matrix=[[]],this.createMatrix(20,10)}emptyStack(){this.matrix.forEach((t=>t.fill(0)))}removeLines(){let t=0,e=!0,n=this.matrix.length-1;for(;n>=0;){for(let t=0;t<this.matrix[n].length;t+=1)0===this.matrix[n][t]&&(e=!1);if(!0===e){t+=1;for(let t=n;t>0;t-=1)this.matrix[t]=[...this.matrix[t-1]]}else n-=1,e=!0}return t}stackCollision(t,e,n){for(let r=0;r<t.length;r+=1)for(let i=0;i<t[r].length;i+=1)if(0!==t[r][i]){const t=n+i,s=e+r;if(s>=this.matrix.length)return!0;if(0!==this.matrix[s][t])return!0}return!1}merge(t,e,n){for(let r=0;r<t.length;r+=1)for(let i=0;i<t[r].length;i+=1)r+e<this.matrix.length&&0!==t[r][i]&&(this.matrix[r+e][i+n]=t[r][i])}},xf=class extends Tf{constructor(t){super(),this.stack=t,this.offsetY=0,this.offsetX=4}drop(t){for(this.matrix=t.matrix,this.offsetX=t.offsetX,this.offsetY=t.offsetY;!this.stack.stackCollision(this.matrix,this.offsetY,this.offsetX);)this.offsetY+=1;this.offsetY-=1}};document.body.appendChild(m("div",{id:"root"}));const Df=g("#root");Df.appendChild((()=>{const t=m("div",{className:_.container});return t.innerHTML=`\n\t\t\t<div class="${_.side}">\n\t\t\t\t<div>\n\t\t\t\t\t<h2>Hold</h2>\n\t\t\t\t\t<canvas id="hold" class="${_.hold}" width="140" height="140"></canvas>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h2>Score</h2>\n\t\t\t\t\t<p id="score">0</p>\n\t\t\t\t</div>\n\t\t\t</div>  \n\n\t\t\t<div class="center">\n\t\t\t\t<canvas id="tetris" class="${_.tetris}" width="200" height="400"></canvas>\n\t\t\t</div>\n\n\t\t\t<div class="${_.side}">\n\t\t\t\t<div>\n\t\t\t\t\t<h2>Next</h2>\n\t\t\t\t\t<canvas id="next" width="140" height="140"></canvas>\n\t\t\t\t</div>\n\t\t\t\t<div style="align-self: flex-end;">\n\t\t\t\t\t<svg id="pause" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\n\t\t\t\t\t\t<path d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM224 191.1v128C224 337.7 209.7 352 192 352S160 337.7 160 320V191.1C160 174.3 174.3 160 191.1 160S224 174.3 224 191.1zM352 191.1v128C352 337.7 337.7 352 320 352S288 337.7 288 320V191.1C288 174.3 302.3 160 319.1 160S352 174.3 352 191.1z"/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`,t})()),Df.appendChild((()=>{const t=m("div",{className:C.highscores});return t.innerHTML=`\n\t\t\t<div class="${C.highscores}">\n\t\t\t\t<h3>Top Scorers</h3>\n\t\t\t\t<ul id="scores-list"></ul>\n\t\t\t</div>\n\t\t`,mf(t),t})()),Df.appendChild((()=>{const t=m("div",{className:wf.menu,id:"menu"});return t.innerHTML=`\n\t\t\t<div class="${wf.content}">\n\t\t\t\t<h2 id="heading">Play Game</h2>\n\t\t\t\t<p id="message" class="${wf.message}"></p>\n\t\t\t\t<input\n\t\t\t\t\ttype="text"\n\t\t\t\t\tname="name"\n\t\t\t\t\tid="name"\n\t\t\t\t\tclass="${wf.name}"\n\t\t\t\t\tplaceholder="Enter Your Name"\n\t\t\t\t/>\n\t\t\t\t<button id="submitScore">Submit</button>\n\t\t\t\t<button id="start" style="display: block;">Start Game</button>\n\t\t\t\t<button id="play">Resume</button>\n\t\t\t\t<button id="restart">Restart</button>\n\t\t\t</div>\n\t\t`,t})());const kf=new class{constructor(){this.canvas=g("#tetris"),this.ctx=this.canvas.getContext("2d"),this.waitingPieceCanvas=g("#next"),this.waitingPieceCtx=this.waitingPieceCanvas.getContext("2d"),this.holdPieceCanvas=g("#hold"),this.holdPieceCtx=this.holdPieceCanvas.getContext("2d"),this.canHold=!0,this.isGamePaused=!1,this.ctx.scale(20,20),this.waitingPieceCtx.scale(20,20),this.holdPieceCtx.scale(20,20),this.score=0,this.stack=new If,this.activePiece=new Sf(this.stack),this.waitingPiece=Tf.createRandomPiece(),this.shadowPiece=new xf(this.stack),this.holdPiece=null,this.lastTime=0,this.dropCounter=0,this.dropInterval=1e3,this.setEvents()}animate(t=0){if(!0===this.isGamePaused)return;const e=t-this.lastTime;this.lastTime=t,this.dropCounter+=e,this.dropCounter>this.dropInterval&&this.dropHandler(),this.draw(),requestAnimationFrame(this.animate.bind(this))}dropHandler(){this.activePiece.softDrop()&&(this.stack.merge(this.activePiece.matrix,this.activePiece.offsetY,this.activePiece.offsetX),this.activePiece.updatePiece(this.waitingPiece),this.waitingPiece=Tf.createRandomPiece(),this.updateScore(this.stack.removeLines()),this.stack.stackCollision(this.activePiece.matrix,this.activePiece.offsetY,this.activePiece.offsetX)&&this.gameover(),this.canHold=!0),this.shadowPiece.drop(this.activePiece),this.dropCounter=0}draw(){this.waitingPieceCtx.fillStyle="#000",this.waitingPieceCtx.fillRect(0,0,this.waitingPieceCanvas.width,this.waitingPieceCanvas.height);const t=y(this.waitingPiece.pieceType);if(v(t,((t,e)=>{this.waitingPieceCtx.fillStyle=Ef[this.waitingPiece.matrix[t][e]-1],this.waitingPieceCtx.fillRect(e+2.5,t+2,1,1)})),this.holdPieceCtx.fillStyle="#000",this.holdPieceCtx.fillRect(0,0,this.holdPieceCanvas.width,this.holdPieceCanvas.height),this.holdPiece){const t=y(this.holdPiece.pieceType);v(t,((e,n)=>{this.holdPieceCtx.fillStyle=Ef[t[e][n]-1],this.holdPieceCtx.fillRect(n+2.5,e+2,1,1)}))}this.ctx.fillStyle="#000",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),v(this.shadowPiece.matrix,((t,e)=>{const{offsetY:n,offsetX:r}=this.shadowPiece;this.ctx.clearRect(e+r,t+n,1,1),this.ctx.rect(e+r,t+n,1,1)})),v(this.stack.matrix,((t,e)=>{const{matrix:n}=this.stack;this.ctx.fillStyle=Ef[n[t][e]-1],this.ctx.fillRect(e,t,1,1),this.ctx.lineWidth=.1,this.ctx.strokeStyle="black",this.ctx.strokeRect(e,t,1,1)})),v(this.activePiece.matrix,((t,e)=>{const{matrix:n,offsetY:r,offsetX:i}=this.activePiece;this.ctx.fillStyle=Ef[n[t][e]-1],this.ctx.fillRect(e+i,t+r,1,1),this.ctx.lineWidth=.1,this.ctx.strokeStyle="black",this.ctx.strokeRect(e+i,t+r,1,1)}))}setEvents(){document.addEventListener("keydown",(t=>{if(!0!==this.isGamePaused||"Escape"===t.key)if("ArrowDown"===t.key)this.dropHandler();else if("ArrowLeft"===t.key)this.activePiece.goLeft(),this.shadowPiece.drop(this.activePiece);else if("ArrowRight"===t.key)this.activePiece.goRight(),this.shadowPiece.drop(this.activePiece);else if("ArrowUp"===t.key)this.activePiece.rotateRight(),this.shadowPiece.drop(this.activePiece);else if(" "===t.key)this.activePiece.hardDrop(this.shadowPiece.offsetY),this.dropHandler();else if("Shift"===t.key){if(null===this.holdPiece)this.holdPiece=new Tf,this.holdPiece.updatePiece(this.activePiece),this.activePiece.updatePiece(this.waitingPiece),this.waitingPiece=Tf.createRandomPiece();else if(this.canHold){const t=(0,_f.cloneDeep)(this.holdPiece);this.holdPiece.updatePiece(this.activePiece),this.activePiece.updatePiece(t)}this.shadowPiece.drop(this.activePiece),this.canHold=!1}else"Escape"===t.key&&(this.toggleGamePause(),bf(this.isGamePaused))}));const t=g("#play"),e=g("#pause"),n=g("#submitScore"),r=g("#restart");t.addEventListener("click",(()=>{this.toggleGamePause(),bf(this.isGamePaused)})),e.addEventListener("click",(()=>{this.toggleGamePause(),bf(this.isGamePaused)})),n.addEventListener("click",(()=>{(t=>{const e=g("#menu"),n=g("#message",e),r=g("#name",e),i=g("#submitScore",e);n.style.color="red",""!==r.value?r.value.length<=3?n.innerText="name too small":r.value.length>10?n.innerText="name too big":(n.style.color="white",n.style.display="none",gf.storeHighScore(r.value,t),mf(),r.style.display="none",i.style.display="none"):n.innerText="name input empty"})(this.score)})),r.addEventListener("click",(()=>{this.stack.emptyStack(),this.updateScore(-1),this.toggleGamePause(),g("#menu").style.display="none"}))}toggleGamePause(){this.isGamePaused=!this.isGamePaused,!1===this.isGamePaused&&this.animate()}updateScore(t){-1!==t?(this.score+=t,g("#score").innerText=this.score.toString()):this.score=0}gameover(){return function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{u(r.next(t))}catch(t){s(t)}}function a(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){this.toggleGamePause();let t="Game Over",e=!1;const n=`You Scored ${this.score}`,r=yield gf.fetchHighScores();0===r.length||this.score>r[r.length-1].score?(t="Congrats! New HighScore",e=!0):this.updateScore(-1),((t,e,n)=>{const r=g("#menu"),i=g("#start",r),s=g("#play",r),o=g("#restart",r),a=g("#heading",r),u=g("#message",r),c=g("#name",r),l=g("#submitScore",r);r.style.display="block",a.innerText=e,i.style.display="none",o.style.display="block",o.innerText="Play Again",s.style.display="none",u.style.display="block",u.innerText=n,t?(c.style.display="block",l.style.display="block"):(c.style.display="none",l.style.display="none")})(e,t,n)}))}},Nf=g("#start"),Rf=g("#menu");Nf.addEventListener("click",(()=>{Rf.style.display="none",kf.animate()}))})()})();
//# sourceMappingURL=bundle.51150e2e3fd877ebc5e2.js.map